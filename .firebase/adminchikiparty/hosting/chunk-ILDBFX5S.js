import{A as zd,a as Sd,b as kd,c as xd,d as Dd,e as Ed,f as bt,g as bd,h as It,i as Id,k as Cd,l as Ad,m as Yd,n as Md,o as Vn,p as Fd,q as Rd,r as Nd,s as Od,t as Vd,u as jt,v as Ld,w as jd}from"./chunk-TUQJJXNC.js";import{Aa as dd,Ba as ja,Bc as nr,Cc as ar,Dc as ir,Ec as wd,Ma as hd,Na as md,Qa as za,Xa as fd,Yc as Pd,Za as pd,_a as gd,a as tr,ab as yd,c as cd,cb as vd,db as Ua,g as B,ka as he,ma as rr,n as ud,na as Qo,oc as _d,pa as Lr,ra as Et,sa as Nn,ua as On,vc as Td,ya as Jo}from"./chunk-6NT6WMN2.js";var Ud={isTestMode:!1};var Bd={},Bp="[NG-ZORRO]:";function qp(...n){let e=n.reduce((t,r)=>t+r.toString(),"");return Bd[e]?!1:(Bd[e]=!0,!0)}function Hp(n,...e){(Ud.isTestMode||_d()&&qp(...e))&&n(...e)}var jr=(...n)=>Hp((...e)=>console.warn(Bp,...e),...n);function Qe(n){"@babel/helpers - typeof";return Qe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qe(n)}function oe(n){if(n===null||n===!0||n===!1)return NaN;var e=Number(n);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function C(n,e){if(e.length<n)throw new TypeError(n+" argument"+(n>1?"s":"")+" required, but only "+e.length+" present")}function R(n){C(1,arguments);var e=Object.prototype.toString.call(n);return n instanceof Date||Qe(n)==="object"&&e==="[object Date]"?new Date(n.getTime()):typeof n=="number"||e==="[object Number]"?new Date(n):((typeof n=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Xo(n,e){C(2,arguments);var t=R(n),r=oe(e);return isNaN(r)?new Date(NaN):(r&&t.setDate(t.getDate()+r),t)}function zr(n,e){C(2,arguments);var t=R(n),r=oe(e);if(isNaN(r))return new Date(NaN);if(!r)return t;var a=t.getDate(),i=new Date(t.getTime());i.setMonth(t.getMonth()+r+1,0);var o=i.getDate();return a>=o?i:(t.setFullYear(i.getFullYear(),i.getMonth(),a),t)}function Zo(n,e){C(2,arguments);var t=R(n).getTime(),r=oe(e);return new Date(t+r)}var Kp={};function qe(){return Kp}function Ur(n,e){var t,r,a,i,o,l,u,h;C(1,arguments);var f=qe(),g=oe((t=(r=(a=(i=e?.weekStartsOn)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&a!==void 0?a:f.weekStartsOn)!==null&&r!==void 0?r:(u=f.locale)===null||u===void 0||(h=u.options)===null||h===void 0?void 0:h.weekStartsOn)!==null&&t!==void 0?t:0);if(!(g>=0&&g<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var _=R(n),S=_.getDay(),D=(S<g?7:0)+S-g;return _.setDate(_.getDate()-D),_.setHours(0,0,0,0),_}function zt(n){return C(1,arguments),Ur(n,{weekStartsOn:1})}function es(n){C(1,arguments);var e=R(n),t=e.getFullYear(),r=new Date(0);r.setFullYear(t+1,0,4),r.setHours(0,0,0,0);var a=zt(r),i=new Date(0);i.setFullYear(t,0,4),i.setHours(0,0,0,0);var o=zt(i);return e.getTime()>=a.getTime()?t+1:e.getTime()>=o.getTime()?t:t-1}function ts(n){C(1,arguments);var e=es(n),t=new Date(0);t.setFullYear(e,0,4),t.setHours(0,0,0,0);var r=zt(t);return r}function Ut(n){var e=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return e.setUTCFullYear(n.getFullYear()),n.getTime()-e.getTime()}function or(n){C(1,arguments);var e=R(n);return e.setHours(0,0,0,0),e}var Wp=864e5;function Ln(n,e){C(2,arguments);var t=or(n),r=or(e),a=t.getTime()-Ut(t),i=r.getTime()-Ut(r);return Math.round((a-i)/Wp)}function Ba(n,e){C(2,arguments);var t=oe(e);return zr(n,t*12)}var $p=365.2425,Gp=Math.pow(10,8)*24*60*60*1e3,qa=6e4,Ha=36e5,qd=1e3,Uw=-Gp;var Qp=3600;var Hd=Qp*24,Bw=Hd*7,Jp=Hd*$p,Xp=Jp/12,qw=Xp*3;function sr(n,e){C(2,arguments);var t=or(n),r=or(e);return t.getTime()===r.getTime()}function rs(n){return C(1,arguments),n instanceof Date||Qe(n)==="object"&&Object.prototype.toString.call(n)==="[object Date]"}function Br(n){if(C(1,arguments),!rs(n)&&typeof n!="number")return!1;var e=R(n);return!isNaN(Number(e))}function Ka(n,e){C(2,arguments);var t=R(n),r=R(e),a=t.getFullYear()-r.getFullYear(),i=t.getMonth()-r.getMonth();return a*12+i}function Wa(n,e){C(2,arguments);var t=R(n),r=R(e);return t.getFullYear()-r.getFullYear()}function lr(n,e){return C(2,arguments),R(n).getTime()-R(e).getTime()}var Kd={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}},Zp="trunc";function qr(n){return n?Kd[n]:Kd[Zp]}function $a(n,e,t){C(2,arguments);var r=lr(n,e)/Ha;return qr(t?.roundingMethod)(r)}function Ga(n,e,t){C(2,arguments);var r=lr(n,e)/qa;return qr(t?.roundingMethod)(r)}function ns(n){C(1,arguments);var e=R(n);return e.setHours(23,59,59,999),e}function as(n){C(1,arguments);var e=R(n),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(23,59,59,999),e}function Qa(n){C(1,arguments);var e=R(n);return ns(e).getTime()===as(e).getTime()}function Ja(n,e,t){C(2,arguments);var r=lr(n,e)/1e3;return qr(t?.roundingMethod)(r)}function Xa(n){C(1,arguments);var e=R(n);return e.setSeconds(0,0),e}function Za(n){C(1,arguments);var e=R(n);return e.setDate(1),e.setHours(0,0,0,0),e}function jn(n,e){C(2,arguments);var t=oe(e);return Zo(n,-t)}var eg=864e5;function is(n){C(1,arguments);var e=R(n),t=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime(),a=t-r;return Math.floor(a/eg)+1}function at(n){C(1,arguments);var e=1,t=R(n),r=t.getUTCDay(),a=(r<e?7:0)+r-e;return t.setUTCDate(t.getUTCDate()-a),t.setUTCHours(0,0,0,0),t}function zn(n){C(1,arguments);var e=R(n),t=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(t+1,0,4),r.setUTCHours(0,0,0,0);var a=at(r),i=new Date(0);i.setUTCFullYear(t,0,4),i.setUTCHours(0,0,0,0);var o=at(i);return e.getTime()>=a.getTime()?t+1:e.getTime()>=o.getTime()?t:t-1}function os(n){C(1,arguments);var e=zn(n),t=new Date(0);t.setUTCFullYear(e,0,4),t.setUTCHours(0,0,0,0);var r=at(t);return r}var tg=6048e5;function Un(n){C(1,arguments);var e=R(n),t=at(e).getTime()-os(e).getTime();return Math.round(t/tg)+1}function Ze(n,e){var t,r,a,i,o,l,u,h;C(1,arguments);var f=qe(),g=oe((t=(r=(a=(i=e?.weekStartsOn)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&a!==void 0?a:f.weekStartsOn)!==null&&r!==void 0?r:(u=f.locale)===null||u===void 0||(h=u.options)===null||h===void 0?void 0:h.weekStartsOn)!==null&&t!==void 0?t:0);if(!(g>=0&&g<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var _=R(n),S=_.getUTCDay(),D=(S<g?7:0)+S-g;return _.setUTCDate(_.getUTCDate()-D),_.setUTCHours(0,0,0,0),_}function cr(n,e){var t,r,a,i,o,l,u,h;C(1,arguments);var f=R(n),g=f.getUTCFullYear(),_=qe(),S=oe((t=(r=(a=(i=e?.firstWeekContainsDate)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&a!==void 0?a:_.firstWeekContainsDate)!==null&&r!==void 0?r:(u=_.locale)===null||u===void 0||(h=u.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&t!==void 0?t:1);if(!(S>=1&&S<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var D=new Date(0);D.setUTCFullYear(g+1,0,S),D.setUTCHours(0,0,0,0);var b=Ze(D,e),I=new Date(0);I.setUTCFullYear(g,0,S),I.setUTCHours(0,0,0,0);var V=Ze(I,e);return f.getTime()>=b.getTime()?g+1:f.getTime()>=V.getTime()?g:g-1}function ss(n,e){var t,r,a,i,o,l,u,h;C(1,arguments);var f=qe(),g=oe((t=(r=(a=(i=e?.firstWeekContainsDate)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&a!==void 0?a:f.firstWeekContainsDate)!==null&&r!==void 0?r:(u=f.locale)===null||u===void 0||(h=u.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&t!==void 0?t:1),_=cr(n,e),S=new Date(0);S.setUTCFullYear(_,0,g),S.setUTCHours(0,0,0,0);var D=Ze(S,e);return D}var rg=6048e5;function Bn(n,e){C(1,arguments);var t=R(n),r=Ze(t,e).getTime()-ss(t,e).getTime();return Math.round(r/rg)+1}function fe(n,e){for(var t=n<0?"-":"",r=Math.abs(n).toString();r.length<e;)r="0"+r;return t+r}var ng={y:function(e,t){var r=e.getUTCFullYear(),a=r>0?r:1-r;return fe(t==="yy"?a%100:a,t.length)},M:function(e,t){var r=e.getUTCMonth();return t==="M"?String(r+1):fe(r+1,2)},d:function(e,t){return fe(e.getUTCDate(),t.length)},a:function(e,t){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(e,t){return fe(e.getUTCHours()%12||12,t.length)},H:function(e,t){return fe(e.getUTCHours(),t.length)},m:function(e,t){return fe(e.getUTCMinutes(),t.length)},s:function(e,t){return fe(e.getUTCSeconds(),t.length)},S:function(e,t){var r=t.length,a=e.getUTCMilliseconds(),i=Math.floor(a*Math.pow(10,r-3));return fe(i,t.length)}},Ct=ng;var Hr={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ag={G:function(e,t,r){var a=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(a,{width:"abbreviated"});case"GGGGG":return r.era(a,{width:"narrow"});case"GGGG":default:return r.era(a,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){var a=e.getUTCFullYear(),i=a>0?a:1-a;return r.ordinalNumber(i,{unit:"year"})}return Ct.y(e,t)},Y:function(e,t,r,a){var i=cr(e,a),o=i>0?i:1-i;if(t==="YY"){var l=o%100;return fe(l,2)}return t==="Yo"?r.ordinalNumber(o,{unit:"year"}):fe(o,t.length)},R:function(e,t){var r=zn(e);return fe(r,t.length)},u:function(e,t){var r=e.getUTCFullYear();return fe(r,t.length)},Q:function(e,t,r){var a=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return fe(a,2);case"Qo":return r.ordinalNumber(a,{unit:"quarter"});case"QQQ":return r.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(a,{width:"wide",context:"formatting"})}},q:function(e,t,r){var a=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return fe(a,2);case"qo":return r.ordinalNumber(a,{unit:"quarter"});case"qqq":return r.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(a,{width:"wide",context:"standalone"})}},M:function(e,t,r){var a=e.getUTCMonth();switch(t){case"M":case"MM":return Ct.M(e,t);case"Mo":return r.ordinalNumber(a+1,{unit:"month"});case"MMM":return r.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(a,{width:"wide",context:"formatting"})}},L:function(e,t,r){var a=e.getUTCMonth();switch(t){case"L":return String(a+1);case"LL":return fe(a+1,2);case"Lo":return r.ordinalNumber(a+1,{unit:"month"});case"LLL":return r.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(a,{width:"wide",context:"standalone"})}},w:function(e,t,r,a){var i=Bn(e,a);return t==="wo"?r.ordinalNumber(i,{unit:"week"}):fe(i,t.length)},I:function(e,t,r){var a=Un(e);return t==="Io"?r.ordinalNumber(a,{unit:"week"}):fe(a,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getUTCDate(),{unit:"date"}):Ct.d(e,t)},D:function(e,t,r){var a=is(e);return t==="Do"?r.ordinalNumber(a,{unit:"dayOfYear"}):fe(a,t.length)},E:function(e,t,r){var a=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return r.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(a,{width:"short",context:"formatting"});case"EEEE":default:return r.day(a,{width:"wide",context:"formatting"})}},e:function(e,t,r,a){var i=e.getUTCDay(),o=(i-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return fe(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,r,a){var i=e.getUTCDay(),o=(i-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return fe(o,t.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,r){var a=e.getUTCDay(),i=a===0?7:a;switch(t){case"i":return String(i);case"ii":return fe(i,t.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(a,{width:"short",context:"formatting"});case"iiii":default:return r.day(a,{width:"wide",context:"formatting"})}},a:function(e,t,r){var a=e.getUTCHours(),i=a/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,r){var a=e.getUTCHours(),i;switch(a===12?i=Hr.noon:a===0?i=Hr.midnight:i=a/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,r){var a=e.getUTCHours(),i;switch(a>=17?i=Hr.evening:a>=12?i=Hr.afternoon:a>=4?i=Hr.morning:i=Hr.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){var a=e.getUTCHours()%12;return a===0&&(a=12),r.ordinalNumber(a,{unit:"hour"})}return Ct.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getUTCHours(),{unit:"hour"}):Ct.H(e,t)},K:function(e,t,r){var a=e.getUTCHours()%12;return t==="Ko"?r.ordinalNumber(a,{unit:"hour"}):fe(a,t.length)},k:function(e,t,r){var a=e.getUTCHours();return a===0&&(a=24),t==="ko"?r.ordinalNumber(a,{unit:"hour"}):fe(a,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):Ct.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):Ct.s(e,t)},S:function(e,t){return Ct.S(e,t)},X:function(e,t,r,a){var i=a._originalDate||e,o=i.getTimezoneOffset();if(o===0)return"Z";switch(t){case"X":return $d(o);case"XXXX":case"XX":return ur(o);case"XXXXX":case"XXX":default:return ur(o,":")}},x:function(e,t,r,a){var i=a._originalDate||e,o=i.getTimezoneOffset();switch(t){case"x":return $d(o);case"xxxx":case"xx":return ur(o);case"xxxxx":case"xxx":default:return ur(o,":")}},O:function(e,t,r,a){var i=a._originalDate||e,o=i.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Wd(o,":");case"OOOO":default:return"GMT"+ur(o,":")}},z:function(e,t,r,a){var i=a._originalDate||e,o=i.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Wd(o,":");case"zzzz":default:return"GMT"+ur(o,":")}},t:function(e,t,r,a){var i=a._originalDate||e,o=Math.floor(i.getTime()/1e3);return fe(o,t.length)},T:function(e,t,r,a){var i=a._originalDate||e,o=i.getTime();return fe(o,t.length)}};function Wd(n,e){var t=n>0?"-":"+",r=Math.abs(n),a=Math.floor(r/60),i=r%60;if(i===0)return t+String(a);var o=e||"";return t+String(a)+o+fe(i,2)}function $d(n,e){if(n%60===0){var t=n>0?"-":"+";return t+fe(Math.abs(n)/60,2)}return ur(n,e)}function ur(n,e){var t=e||"",r=n>0?"-":"+",a=Math.abs(n),i=fe(Math.floor(a/60),2),o=fe(a%60,2);return r+i+t+o}var Gd=ag;var Qd=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Jd=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},ig=function(e,t){var r=e.match(/(P+)(p+)?/)||[],a=r[1],i=r[2];if(!i)return Qd(e,t);var o;switch(a){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;case"PPPP":default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",Qd(a,t)).replace("{{time}}",Jd(i,t))},og={p:Jd,P:ig},qn=og;var sg=["D","DD"],lg=["YY","YYYY"];function ei(n){return sg.indexOf(n)!==-1}function ti(n){return lg.indexOf(n)!==-1}function Kr(n,e,t){if(n==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var cg={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ug=function(e,t,r){var a,i=cg[e];return typeof i=="string"?a=i:t===1?a=i.one:a=i.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+a:a+" ago":a},Xd=ug;function Hn(n){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.width?String(e.width):n.defaultWidth,r=n.formats[t]||n.formats[n.defaultWidth];return r}}var dg={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},hg={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},mg={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},fg={date:Hn({formats:dg,defaultWidth:"full"}),time:Hn({formats:hg,defaultWidth:"full"}),dateTime:Hn({formats:mg,defaultWidth:"full"})},Zd=fg;var pg={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},gg=function(e,t,r,a){return pg[e]},eh=gg;function dr(n){return function(e,t){var r=t!=null&&t.context?String(t.context):"standalone",a;if(r==="formatting"&&n.formattingValues){var i=n.defaultFormattingWidth||n.defaultWidth,o=t!=null&&t.width?String(t.width):i;a=n.formattingValues[o]||n.formattingValues[i]}else{var l=n.defaultWidth,u=t!=null&&t.width?String(t.width):n.defaultWidth;a=n.values[u]||n.values[l]}var h=n.argumentCallback?n.argumentCallback(e):e;return a[h]}}var yg={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},vg={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},_g={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Tg={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},wg={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Pg={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Sg=function(e,t){var r=Number(e),a=r%100;if(a>20||a<10)switch(a%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},kg={ordinalNumber:Sg,era:dr({values:yg,defaultWidth:"wide"}),quarter:dr({values:vg,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:dr({values:_g,defaultWidth:"wide"}),day:dr({values:Tg,defaultWidth:"wide"}),dayPeriod:dr({values:wg,defaultWidth:"wide",formattingValues:Pg,defaultFormattingWidth:"wide"})},th=kg;function hr(n){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.width,a=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],i=e.match(a);if(!i)return null;var o=i[0],l=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],u=Array.isArray(l)?Dg(l,function(g){return g.test(o)}):xg(l,function(g){return g.test(o)}),h;h=n.valueCallback?n.valueCallback(u):u,h=t.valueCallback?t.valueCallback(h):h;var f=e.slice(o.length);return{value:h,rest:f}}}function xg(n,e){for(var t in n)if(n.hasOwnProperty(t)&&e(n[t]))return t}function Dg(n,e){for(var t=0;t<n.length;t++)if(e(n[t]))return t}function ls(n){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.match(n.matchPattern);if(!r)return null;var a=r[0],i=e.match(n.parsePattern);if(!i)return null;var o=n.valueCallback?n.valueCallback(i[0]):i[0];o=t.valueCallback?t.valueCallback(o):o;var l=e.slice(a.length);return{value:o,rest:l}}}var Eg=/^(\d+)(th|st|nd|rd)?/i,bg=/\d+/i,Ig={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Cg={any:[/^b/i,/^(a|c)/i]},Ag={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Yg={any:[/1/i,/2/i,/3/i,/4/i]},Mg={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Fg={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Rg={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Ng={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Og={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Vg={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Lg={ordinalNumber:ls({matchPattern:Eg,parsePattern:bg,valueCallback:function(e){return parseInt(e,10)}}),era:hr({matchPatterns:Ig,defaultMatchWidth:"wide",parsePatterns:Cg,defaultParseWidth:"any"}),quarter:hr({matchPatterns:Ag,defaultMatchWidth:"wide",parsePatterns:Yg,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:hr({matchPatterns:Mg,defaultMatchWidth:"wide",parsePatterns:Fg,defaultParseWidth:"any"}),day:hr({matchPatterns:Rg,defaultMatchWidth:"wide",parsePatterns:Ng,defaultParseWidth:"any"}),dayPeriod:hr({matchPatterns:Og,defaultMatchWidth:"any",parsePatterns:Vg,defaultParseWidth:"any"})},rh=Lg;var jg={code:"en-US",formatDistance:Xd,formatLong:Zd,formatRelative:eh,localize:th,match:rh,options:{weekStartsOn:0,firstWeekContainsDate:1}},nh=jg;var ri=nh;var zg=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ug=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Bg=/^'([^]*?)'?$/,qg=/''/g,Hg=/[a-zA-Z]/;function ni(n,e,t){var r,a,i,o,l,u,h,f,g,_,S,D,b,I,V,z,$,Z;C(2,arguments);var xe=String(e),J=qe(),T=(r=(a=t?.locale)!==null&&a!==void 0?a:J.locale)!==null&&r!==void 0?r:ri,p=oe((i=(o=(l=(u=t?.firstWeekContainsDate)!==null&&u!==void 0?u:t==null||(h=t.locale)===null||h===void 0||(f=h.options)===null||f===void 0?void 0:f.firstWeekContainsDate)!==null&&l!==void 0?l:J.firstWeekContainsDate)!==null&&o!==void 0?o:(g=J.locale)===null||g===void 0||(_=g.options)===null||_===void 0?void 0:_.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var y=oe((S=(D=(b=(I=t?.weekStartsOn)!==null&&I!==void 0?I:t==null||(V=t.locale)===null||V===void 0||(z=V.options)===null||z===void 0?void 0:z.weekStartsOn)!==null&&b!==void 0?b:J.weekStartsOn)!==null&&D!==void 0?D:($=J.locale)===null||$===void 0||(Z=$.options)===null||Z===void 0?void 0:Z.weekStartsOn)!==null&&S!==void 0?S:0);if(!(y>=0&&y<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!T.localize)throw new RangeError("locale must contain localize property");if(!T.formatLong)throw new RangeError("locale must contain formatLong property");var w=R(n);if(!Br(w))throw new RangeError("Invalid time value");var P=Ut(w),k=jn(w,P),v={firstWeekContainsDate:p,weekStartsOn:y,locale:T,_originalDate:w},Le=xe.match(Ug).map(function(ke){var O=ke[0];if(O==="p"||O==="P"){var U=qn[O];return U(ke,T.formatLong)}return ke}).join("").match(zg).map(function(ke){if(ke==="''")return"'";var O=ke[0];if(O==="'")return Kg(ke);var U=Gd[O];if(U)return!(t!=null&&t.useAdditionalWeekYearTokens)&&ti(ke)&&Kr(ke,e,String(n)),!(t!=null&&t.useAdditionalDayOfYearTokens)&&ei(ke)&&Kr(ke,e,String(n)),U(k,ke,T.localize,v);if(O.match(Hg))throw new RangeError("Format string contains an unescaped latin alphabet character `"+O+"`");return ke}).join("");return Le}function Kg(n){var e=n.match(Bg);return e?e[1].replace(qg,"'"):n}function cs(n,e){if(n==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n}function us(n){C(1,arguments);var e=R(n),t=e.getFullYear(),r=e.getMonth(),a=new Date(0);return a.setFullYear(t,r+1,0),a.setHours(0,0,0,0),a.getDate()}var Wg=6048e5;function ai(n){C(1,arguments);var e=R(n),t=zt(e).getTime()-ts(e).getTime();return Math.round(t/Wg)+1}function ii(n){return C(1,arguments),R(n).getDate()===1}function ds(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function ah(n,e){if(n){if(typeof n=="string")return ds(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ds(n,e):void 0}}function hs(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=ah(n))||e&&n&&typeof n.length=="number"){t&&(n=t);var r=0,a=function(){};return{s:a,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(h){throw h},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,o=!0,l=!1;return{s:function(){t=t.call(n)},n:function(){var h=t.next();return o=h.done,h},e:function(h){l=!0,i=h},f:function(){try{o||t.return==null||t.return()}finally{if(l)throw i}}}}function Y(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function oi(n,e){return oi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},oi(n,e)}function q(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&oi(n,e)}function Kn(n){return Kn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Kn(n)}function ms(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ms=function(){return!!n})()}function ih(n,e){if(e&&(Qe(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Y(n)}function H(n){var e=ms();return function(){var t,r=Kn(n);if(e){var a=Kn(this).constructor;t=Reflect.construct(r,arguments,a)}else t=r.apply(this,arguments);return ih(this,t)}}function L(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function oh(n,e){if(Qe(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(Qe(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function si(n){var e=oh(n,"string");return Qe(e)=="symbol"?e:e+""}function sh(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,si(r.key),r)}}function j(n,e,t){return e&&sh(n.prototype,e),t&&sh(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function A(n,e,t){return(e=si(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var $g=10,lh=function(){function n(){L(this,n),A(this,"priority",void 0),A(this,"subPriority",0)}return j(n,[{key:"validate",value:function(t,r){return!0}}]),n}(),ch=function(n){q(t,n);var e=H(t);function t(r,a,i,o,l){var u;return L(this,t),u=e.call(this),u.value=r,u.validateValue=a,u.setValue=i,u.priority=o,l&&(u.subPriority=l),u}return j(t,[{key:"validate",value:function(a,i){return this.validateValue(a,this.value,i)}},{key:"set",value:function(a,i,o){return this.setValue(a,i,this.value,o)}}]),t}(lh),uh=function(n){q(t,n);var e=H(t);function t(){var r;L(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),A(Y(r),"priority",$g),A(Y(r),"subPriority",-1),r}return j(t,[{key:"set",value:function(a,i){if(i.timestampIsSet)return a;var o=new Date(0);return o.setFullYear(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()),o.setHours(a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds()),o}}]),t}(lh);var K=function(){function n(){L(this,n),A(this,"incompatibleTokens",void 0),A(this,"priority",void 0),A(this,"subPriority",void 0)}return j(n,[{key:"run",value:function(t,r,a,i){var o=this.parse(t,r,a,i);return o?{setter:new ch(o.value,this.validate,this.set,this.priority,this.subPriority),rest:o.rest}:null}},{key:"validate",value:function(t,r,a){return!0}}]),n}();var dh=function(n){q(t,n);var e=H(t);function t(){var r;L(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),A(Y(r),"priority",140),A(Y(r),"incompatibleTokens",["R","u","t","T"]),r}return j(t,[{key:"parse",value:function(a,i,o){switch(i){case"G":case"GG":case"GGG":return o.era(a,{width:"abbreviated"})||o.era(a,{width:"narrow"});case"GGGGG":return o.era(a,{width:"narrow"});case"GGGG":default:return o.era(a,{width:"wide"})||o.era(a,{width:"abbreviated"})||o.era(a,{width:"narrow"})}}},{key:"set",value:function(a,i,o){return i.era=o,a.setUTCFullYear(o,0,1),a.setUTCHours(0,0,0,0),a}}]),t}(K);var ue={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},it={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function ye(n,e){return n&&{value:e(n.value),rest:n.rest}}function ce(n,e){var t=e.match(n);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function ot(n,e){var t=e.match(n);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};var r=t[1]==="+"?1:-1,a=t[2]?parseInt(t[2],10):0,i=t[3]?parseInt(t[3],10):0,o=t[5]?parseInt(t[5],10):0;return{value:r*(a*Ha+i*qa+o*qd),rest:e.slice(t[0].length)}}function li(n){return ce(ue.anyDigitsSigned,n)}function ne(n,e){switch(n){case 1:return ce(ue.singleDigit,e);case 2:return ce(ue.twoDigits,e);case 3:return ce(ue.threeDigits,e);case 4:return ce(ue.fourDigits,e);default:return ce(new RegExp("^\\d{1,"+n+"}"),e)}}function Wr(n,e){switch(n){case 1:return ce(ue.singleDigitSigned,e);case 2:return ce(ue.twoDigitsSigned,e);case 3:return ce(ue.threeDigitsSigned,e);case 4:return ce(ue.fourDigitsSigned,e);default:return ce(new RegExp("^-?\\d{1,"+n+"}"),e)}}function $r(n){switch(n){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function ci(n,e){var t=e>0,r=t?e:1-e,a;if(r<=50)a=n||100;else{var i=r+50,o=Math.floor(i/100)*100,l=n>=i%100;a=n+o-(l?100:0)}return t?a:1-a}function ui(n){return n%400===0||n%4===0&&n%100!==0}var hh=function(n){q(t,n);var e=H(t);function t(){var r;L(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),A(Y(r),"priority",130),A(Y(r),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),r}return j(t,[{key:"parse",value:function(a,i,o){var l=function(h){return{year:h,isTwoDigitYear:i==="yy"}};switch(i){case"y":return ye(ne(4,a),l);case"yo":return ye(o.ordinalNumber(a,{unit:"year"}),l);default:return ye(ne(i.length,a),l)}}},{key:"validate",value:function(a,i){return i.isTwoDigitYear||i.year>0}},{key:"set",value:function(a,i,o){var l=a.getUTCFullYear();if(o.isTwoDigitYear){var u=ci(o.year,l);return a.setUTCFullYear(u,0,1),a.setUTCHours(0,0,0,0),a}var h=!("era"in i)||i.era===1?o.year:1-o.year;return a.setUTCFullYear(h,0,1),a.setUTCHours(0,0,0,0),a}}]),t}(K);var mh=function(n){q(t,n);var e=H(t);function t(){var r;L(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),A(Y(r),"priority",130),A(Y(r),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),r}return j(t,[{key:"parse",value:function(a,i,o){var l=function(h){return{year:h,isTwoDigitYear:i==="YY"}};switch(i){case"Y":return ye(ne(4,a),l);case"Yo":return ye(o.ordinalNumber(a,{unit:"year"}),l);default:return ye(ne(i.length,a),l)}}},{key:"validate",value:function(a,i){return i.isTwoDigitYear||i.year>0}},{key:"set",value:function(a,i,o,l){var u=cr(a,l);if(o.isTwoDigitYear){var h=ci(o.year,u);return a.setUTCFullYear(h,0,l.firstWeekContainsDate),a.setUTCHours(0,0,0,0),Ze(a,l)}var f=!("era"in i)||i.era===1?o.year:1-o.year;return a.setUTCFullYear(f,0,l.firstWeekContainsDate),a.setUTCHours(0,0,0,0),Ze(a,l)}}]),t}(K);var fh=function(n){q(t,n);var e=H(t);function t(){var r;L(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),A(Y(r),"priority",130),A(Y(r),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),r}return j(t,[{key:"parse",value:function(a,i){return i==="R"?Wr(4,a):Wr(i.length,a)}},{key:"set",value:function(a,i,o){var l=new Date(0);return l.setUTCFullYear(o,0,4),l.setUTCHours(0,0,0,0),at(l)}}]),t}(K);var ph=function(n){q(t,n);var e=H(t);function t(){var r;L(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),A(Y(r),"priority",130),A(Y(r),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),r}return j(t,[{key:"parse",value:function(a,i){return i==="u"?Wr(4,a):Wr(i.length,a)}},{key:"set",value:function(a,i,o){return a.setUTCFullYear(o,0,1),a.setUTCHours(0,0,0,0),a}}]),t}(K);var gh=function(n){q(t,n);var e=H(t);function t(){var r;L(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),A(Y(r),"priority",120),A(Y(r),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),r}return j(t,[{key:"parse",value:function(a,i,o){switch(i){case"Q":case"QQ":return ne(i.length,a);case"Qo":return o.ordinalNumber(a,{unit:"quarter"});case"QQQ":return o.quarter(a,{width:"abbreviated",context:"formatting"})||o.quarter(a,{width:"narrow",context:"formatting"});case"QQQQQ":return o.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return o.quarter(a,{width:"wide",context:"formatting"})||o.quarter(a,{width:"abbreviated",context:"formatting"})||o.quarter(a,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(a,i){return i>=1&&i<=4}},{key:"set",value:function(a,i,o){return a.setUTCMonth((o-1)*3,1),a.setUTCHours(0,0,0,0),a}}]),t}(K);var yh=function(n){q(t,n);var e=H(t);function t(){var r;L(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),A(Y(r),"priority",120),A(Y(r),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),r}return j(t,[{key:"parse",value:function(a,i,o){switch(i){case"q":case"qq":return ne(i.length,a);case"qo":return o.ordinalNumber(a,{unit:"quarter"});case"qqq":return o.quarter(a,{width:"abbreviated",context:"standalone"})||o.quarter(a,{width:"narrow",context:"standalone"});case"qqqqq":return o.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return o.quarter(a,{width:"wide",context:"standalone"})||o.quarter(a,{width:"abbreviated",context:"standalone"})||o.quarter(a,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(a,i){return i>=1&&i<=4}},{key:"set",value:function(a,i,o){return a.setUTCMonth((o-1)*3,1),a.setUTCHours(0,0,0,0),a}}]),t}(K);var vh=function(n){q(t,n);var e=H(t);function t(){var r;L(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),A(Y(r),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),A(Y(r),"priority",110),r}return j(t,[{key:"parse",value:function(a,i,o){var l=function(h){return h-1};switch(i){case"M":return ye(ce(ue.month,a),l);case"MM":return ye(ne(2,a),l);case"Mo":return ye(o.ordinalNumber(a,{unit:"month"}),l);case"MMM":return o.month(a,{width:"abbreviated",context:"formatting"})||o.month(a,{width:"narrow",context:"formatting"});case"MMMMM":return o.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return o.month(a,{width:"wide",context:"formatting"})||o.month(a,{width:"abbreviated",context:"formatting"})||o.month(a,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(a,i){return i>=0&&i<=11}},{key:"set",value:function(a,i,o){return a.setUTCMonth(o,1),a.setUTCHours(0,0,0,0),a}}]),t}(K);var _h=function(n){q(t,n);var e=H(t);function t(){var r;L(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),A(Y(r),"priority",110),A(Y(r),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),r}return j(t,[{key:"parse",value:function(a,i,o){var l=function(h){return h-1};switch(i){case"L":return ye(ce(ue.month,a),l);case"LL":return ye(ne(2,a),l);case"Lo":return ye(o.ordinalNumber(a,{unit:"month"}),l);case"LLL":return o.month(a,{width:"abbreviated",context:"standalone"})||o.month(a,{width:"narrow",context:"standalone"});case"LLLLL":return o.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return o.month(a,{width:"wide",context:"standalone"})||o.month(a,{width:"abbreviated",context:"standalone"})||o.month(a,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(a,i){return i>=0&&i<=11}},{key:"set",value:function(a,i,o){return a.setUTCMonth(o,1),a.setUTCHours(0,0,0,0),a}}]),t}(K);function fs(n,e,t){C(2,arguments);var r=R(n),a=oe(e),i=Bn(r,t)-a;return r.setUTCDate(r.getUTCDate()-i*7),r}var Th=function(n){q(t,n);var e=H(t);function t(){var r;L(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),A(Y(r),"priority",100),A(Y(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),r}return j(t,[{key:"parse",value:function(a,i,o){switch(i){case"w":return ce(ue.week,a);case"wo":return o.ordinalNumber(a,{unit:"week"});default:return ne(i.length,a)}}},{key:"validate",value:function(a,i){return i>=1&&i<=53}},{key:"set",value:function(a,i,o,l){return Ze(fs(a,o,l),l)}}]),t}(K);function ps(n,e){C(2,arguments);var t=R(n),r=oe(e),a=Un(t)-r;return t.setUTCDate(t.getUTCDate()-a*7),t}var wh=function(n){q(t,n);var e=H(t);function t(){var r;L(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),A(Y(r),"priority",100),A(Y(r),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),r}return j(t,[{key:"parse",value:function(a,i,o){switch(i){case"I":return ce(ue.week,a);case"Io":return o.ordinalNumber(a,{unit:"week"});default:return ne(i.length,a)}}},{key:"validate",value:function(a,i){return i>=1&&i<=53}},{key:"set",value:function(a,i,o){return at(ps(a,o))}}]),t}(K);var Gg=[31,28,31,30,31,30,31,31,30,31,30,31],Qg=[31,29,31,30,31,30,31,31,30,31,30,31],Ph=function(n){q(t,n);var e=H(t);function t(){var r;L(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),A(Y(r),"priority",90),A(Y(r),"subPriority",1),A(Y(r),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),r}return j(t,[{key:"parse",value:function(a,i,o){switch(i){case"d":return ce(ue.date,a);case"do":return o.ordinalNumber(a,{unit:"date"});default:return ne(i.length,a)}}},{key:"validate",value:function(a,i){var o=a.getUTCFullYear(),l=ui(o),u=a.getUTCMonth();return l?i>=1&&i<=Qg[u]:i>=1&&i<=Gg[u]}},{key:"set",value:function(a,i,o){return a.setUTCDate(o),a.setUTCHours(0,0,0,0),a}}]),t}(K);var Sh=function(n){q(t,n);var e=H(t);function t(){var r;L(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),A(Y(r),"priority",90),A(Y(r),"subpriority",1),A(Y(r),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),r}return j(t,[{key:"parse",value:function(a,i,o){switch(i){case"D":case"DD":return ce(ue.dayOfYear,a);case"Do":return o.ordinalNumber(a,{unit:"date"});default:return ne(i.length,a)}}},{key:"validate",value:function(a,i){var o=a.getUTCFullYear(),l=ui(o);return l?i>=1&&i<=366:i>=1&&i<=365}},{key:"set",value:function(a,i,o){return a.setUTCMonth(0,o),a.setUTCHours(0,0,0,0),a}}]),t}(K);function mr(n,e,t){var r,a,i,o,l,u,h,f;C(2,arguments);var g=qe(),_=oe((r=(a=(i=(o=t?.weekStartsOn)!==null&&o!==void 0?o:t==null||(l=t.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&i!==void 0?i:g.weekStartsOn)!==null&&a!==void 0?a:(h=g.locale)===null||h===void 0||(f=h.options)===null||f===void 0?void 0:f.weekStartsOn)!==null&&r!==void 0?r:0);if(!(_>=0&&_<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var S=R(n),D=oe(e),b=S.getUTCDay(),I=D%7,V=(I+7)%7,z=(V<_?7:0)+D-b;return S.setUTCDate(S.getUTCDate()+z),S}var kh=function(n){q(t,n);var e=H(t);function t(){var r;L(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),A(Y(r),"priority",90),A(Y(r),"incompatibleTokens",["D","i","e","c","t","T"]),r}return j(t,[{key:"parse",value:function(a,i,o){switch(i){case"E":case"EE":case"EEE":return o.day(a,{width:"abbreviated",context:"formatting"})||o.day(a,{width:"short",context:"formatting"})||o.day(a,{width:"narrow",context:"formatting"});case"EEEEE":return o.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return o.day(a,{width:"short",context:"formatting"})||o.day(a,{width:"narrow",context:"formatting"});case"EEEE":default:return o.day(a,{width:"wide",context:"formatting"})||o.day(a,{width:"abbreviated",context:"formatting"})||o.day(a,{width:"short",context:"formatting"})||o.day(a,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(a,i){return i>=0&&i<=6}},{key:"set",value:function(a,i,o,l){return a=mr(a,o,l),a.setUTCHours(0,0,0,0),a}}]),t}(K);var xh=function(n){q(t,n);var e=H(t);function t(){var r;L(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),A(Y(r),"priority",90),A(Y(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),r}return j(t,[{key:"parse",value:function(a,i,o,l){var u=function(f){var g=Math.floor((f-1)/7)*7;return(f+l.weekStartsOn+6)%7+g};switch(i){case"e":case"ee":return ye(ne(i.length,a),u);case"eo":return ye(o.ordinalNumber(a,{unit:"day"}),u);case"eee":return o.day(a,{width:"abbreviated",context:"formatting"})||o.day(a,{width:"short",context:"formatting"})||o.day(a,{width:"narrow",context:"formatting"});case"eeeee":return o.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return o.day(a,{width:"short",context:"formatting"})||o.day(a,{width:"narrow",context:"formatting"});case"eeee":default:return o.day(a,{width:"wide",context:"formatting"})||o.day(a,{width:"abbreviated",context:"formatting"})||o.day(a,{width:"short",context:"formatting"})||o.day(a,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(a,i){return i>=0&&i<=6}},{key:"set",value:function(a,i,o,l){return a=mr(a,o,l),a.setUTCHours(0,0,0,0),a}}]),t}(K);var Dh=function(n){q(t,n);var e=H(t);function t(){var r;L(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),A(Y(r),"priority",90),A(Y(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),r}return j(t,[{key:"parse",value:function(a,i,o,l){var u=function(f){var g=Math.floor((f-1)/7)*7;return(f+l.weekStartsOn+6)%7+g};switch(i){case"c":case"cc":return ye(ne(i.length,a),u);case"co":return ye(o.ordinalNumber(a,{unit:"day"}),u);case"ccc":return o.day(a,{width:"abbreviated",context:"standalone"})||o.day(a,{width:"short",context:"standalone"})||o.day(a,{width:"narrow",context:"standalone"});case"ccccc":return o.day(a,{width:"narrow",context:"standalone"});case"cccccc":return o.day(a,{width:"short",context:"standalone"})||o.day(a,{width:"narrow",context:"standalone"});case"cccc":default:return o.day(a,{width:"wide",context:"standalone"})||o.day(a,{width:"abbreviated",context:"standalone"})||o.day(a,{width:"short",context:"standalone"})||o.day(a,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(a,i){return i>=0&&i<=6}},{key:"set",value:function(a,i,o,l){return a=mr(a,o,l),a.setUTCHours(0,0,0,0),a}}]),t}(K);function gs(n,e){C(2,arguments);var t=oe(e);t%7===0&&(t=t-7);var r=1,a=R(n),i=a.getUTCDay(),o=t%7,l=(o+7)%7,u=(l<r?7:0)+t-i;return a.setUTCDate(a.getUTCDate()+u),a}var Eh=function(n){q(t,n);var e=H(t);function t(){var r;L(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),A(Y(r),"priority",90),A(Y(r),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),r}return j(t,[{key:"parse",value:function(a,i,o){var l=function(h){return h===0?7:h};switch(i){case"i":case"ii":return ne(i.length,a);case"io":return o.ordinalNumber(a,{unit:"day"});case"iii":return ye(o.day(a,{width:"abbreviated",context:"formatting"})||o.day(a,{width:"short",context:"formatting"})||o.day(a,{width:"narrow",context:"formatting"}),l);case"iiiii":return ye(o.day(a,{width:"narrow",context:"formatting"}),l);case"iiiiii":return ye(o.day(a,{width:"short",context:"formatting"})||o.day(a,{width:"narrow",context:"formatting"}),l);case"iiii":default:return ye(o.day(a,{width:"wide",context:"formatting"})||o.day(a,{width:"abbreviated",context:"formatting"})||o.day(a,{width:"short",context:"formatting"})||o.day(a,{width:"narrow",context:"formatting"}),l)}}},{key:"validate",value:function(a,i){return i>=1&&i<=7}},{key:"set",value:function(a,i,o){return a=gs(a,o),a.setUTCHours(0,0,0,0),a}}]),t}(K);var bh=function(n){q(t,n);var e=H(t);function t(){var r;L(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),A(Y(r),"priority",80),A(Y(r),"incompatibleTokens",["b","B","H","k","t","T"]),r}return j(t,[{key:"parse",value:function(a,i,o){switch(i){case"a":case"aa":case"aaa":return o.dayPeriod(a,{width:"abbreviated",context:"formatting"})||o.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaaa":return o.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return o.dayPeriod(a,{width:"wide",context:"formatting"})||o.dayPeriod(a,{width:"abbreviated",context:"formatting"})||o.dayPeriod(a,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(a,i,o){return a.setUTCHours($r(o),0,0,0),a}}]),t}(K);var Ih=function(n){q(t,n);var e=H(t);function t(){var r;L(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),A(Y(r),"priority",80),A(Y(r),"incompatibleTokens",["a","B","H","k","t","T"]),r}return j(t,[{key:"parse",value:function(a,i,o){switch(i){case"b":case"bb":case"bbb":return o.dayPeriod(a,{width:"abbreviated",context:"formatting"})||o.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbbb":return o.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return o.dayPeriod(a,{width:"wide",context:"formatting"})||o.dayPeriod(a,{width:"abbreviated",context:"formatting"})||o.dayPeriod(a,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(a,i,o){return a.setUTCHours($r(o),0,0,0),a}}]),t}(K);var Ch=function(n){q(t,n);var e=H(t);function t(){var r;L(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),A(Y(r),"priority",80),A(Y(r),"incompatibleTokens",["a","b","t","T"]),r}return j(t,[{key:"parse",value:function(a,i,o){switch(i){case"B":case"BB":case"BBB":return o.dayPeriod(a,{width:"abbreviated",context:"formatting"})||o.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBBB":return o.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return o.dayPeriod(a,{width:"wide",context:"formatting"})||o.dayPeriod(a,{width:"abbreviated",context:"formatting"})||o.dayPeriod(a,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(a,i,o){return a.setUTCHours($r(o),0,0,0),a}}]),t}(K);var Ah=function(n){q(t,n);var e=H(t);function t(){var r;L(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),A(Y(r),"priority",70),A(Y(r),"incompatibleTokens",["H","K","k","t","T"]),r}return j(t,[{key:"parse",value:function(a,i,o){switch(i){case"h":return ce(ue.hour12h,a);case"ho":return o.ordinalNumber(a,{unit:"hour"});default:return ne(i.length,a)}}},{key:"validate",value:function(a,i){return i>=1&&i<=12}},{key:"set",value:function(a,i,o){var l=a.getUTCHours()>=12;return l&&o<12?a.setUTCHours(o+12,0,0,0):!l&&o===12?a.setUTCHours(0,0,0,0):a.setUTCHours(o,0,0,0),a}}]),t}(K);var Yh=function(n){q(t,n);var e=H(t);function t(){var r;L(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),A(Y(r),"priority",70),A(Y(r),"incompatibleTokens",["a","b","h","K","k","t","T"]),r}return j(t,[{key:"parse",value:function(a,i,o){switch(i){case"H":return ce(ue.hour23h,a);case"Ho":return o.ordinalNumber(a,{unit:"hour"});default:return ne(i.length,a)}}},{key:"validate",value:function(a,i){return i>=0&&i<=23}},{key:"set",value:function(a,i,o){return a.setUTCHours(o,0,0,0),a}}]),t}(K);var Mh=function(n){q(t,n);var e=H(t);function t(){var r;L(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),A(Y(r),"priority",70),A(Y(r),"incompatibleTokens",["h","H","k","t","T"]),r}return j(t,[{key:"parse",value:function(a,i,o){switch(i){case"K":return ce(ue.hour11h,a);case"Ko":return o.ordinalNumber(a,{unit:"hour"});default:return ne(i.length,a)}}},{key:"validate",value:function(a,i){return i>=0&&i<=11}},{key:"set",value:function(a,i,o){var l=a.getUTCHours()>=12;return l&&o<12?a.setUTCHours(o+12,0,0,0):a.setUTCHours(o,0,0,0),a}}]),t}(K);var Fh=function(n){q(t,n);var e=H(t);function t(){var r;L(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),A(Y(r),"priority",70),A(Y(r),"incompatibleTokens",["a","b","h","H","K","t","T"]),r}return j(t,[{key:"parse",value:function(a,i,o){switch(i){case"k":return ce(ue.hour24h,a);case"ko":return o.ordinalNumber(a,{unit:"hour"});default:return ne(i.length,a)}}},{key:"validate",value:function(a,i){return i>=1&&i<=24}},{key:"set",value:function(a,i,o){var l=o<=24?o%24:o;return a.setUTCHours(l,0,0,0),a}}]),t}(K);var Rh=function(n){q(t,n);var e=H(t);function t(){var r;L(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),A(Y(r),"priority",60),A(Y(r),"incompatibleTokens",["t","T"]),r}return j(t,[{key:"parse",value:function(a,i,o){switch(i){case"m":return ce(ue.minute,a);case"mo":return o.ordinalNumber(a,{unit:"minute"});default:return ne(i.length,a)}}},{key:"validate",value:function(a,i){return i>=0&&i<=59}},{key:"set",value:function(a,i,o){return a.setUTCMinutes(o,0,0),a}}]),t}(K);var Nh=function(n){q(t,n);var e=H(t);function t(){var r;L(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),A(Y(r),"priority",50),A(Y(r),"incompatibleTokens",["t","T"]),r}return j(t,[{key:"parse",value:function(a,i,o){switch(i){case"s":return ce(ue.second,a);case"so":return o.ordinalNumber(a,{unit:"second"});default:return ne(i.length,a)}}},{key:"validate",value:function(a,i){return i>=0&&i<=59}},{key:"set",value:function(a,i,o){return a.setUTCSeconds(o,0),a}}]),t}(K);var Oh=function(n){q(t,n);var e=H(t);function t(){var r;L(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),A(Y(r),"priority",30),A(Y(r),"incompatibleTokens",["t","T"]),r}return j(t,[{key:"parse",value:function(a,i){var o=function(u){return Math.floor(u*Math.pow(10,-i.length+3))};return ye(ne(i.length,a),o)}},{key:"set",value:function(a,i,o){return a.setUTCMilliseconds(o),a}}]),t}(K);var Vh=function(n){q(t,n);var e=H(t);function t(){var r;L(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),A(Y(r),"priority",10),A(Y(r),"incompatibleTokens",["t","T","x"]),r}return j(t,[{key:"parse",value:function(a,i){switch(i){case"X":return ot(it.basicOptionalMinutes,a);case"XX":return ot(it.basic,a);case"XXXX":return ot(it.basicOptionalSeconds,a);case"XXXXX":return ot(it.extendedOptionalSeconds,a);case"XXX":default:return ot(it.extended,a)}}},{key:"set",value:function(a,i,o){return i.timestampIsSet?a:new Date(a.getTime()-o)}}]),t}(K);var Lh=function(n){q(t,n);var e=H(t);function t(){var r;L(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),A(Y(r),"priority",10),A(Y(r),"incompatibleTokens",["t","T","X"]),r}return j(t,[{key:"parse",value:function(a,i){switch(i){case"x":return ot(it.basicOptionalMinutes,a);case"xx":return ot(it.basic,a);case"xxxx":return ot(it.basicOptionalSeconds,a);case"xxxxx":return ot(it.extendedOptionalSeconds,a);case"xxx":default:return ot(it.extended,a)}}},{key:"set",value:function(a,i,o){return i.timestampIsSet?a:new Date(a.getTime()-o)}}]),t}(K);var jh=function(n){q(t,n);var e=H(t);function t(){var r;L(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),A(Y(r),"priority",40),A(Y(r),"incompatibleTokens","*"),r}return j(t,[{key:"parse",value:function(a){return li(a)}},{key:"set",value:function(a,i,o){return[new Date(o*1e3),{timestampIsSet:!0}]}}]),t}(K);var zh=function(n){q(t,n);var e=H(t);function t(){var r;L(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),A(Y(r),"priority",20),A(Y(r),"incompatibleTokens","*"),r}return j(t,[{key:"parse",value:function(a){return li(a)}},{key:"set",value:function(a,i,o){return[new Date(o),{timestampIsSet:!0}]}}]),t}(K);var Uh={G:new dh,y:new hh,Y:new mh,R:new fh,u:new ph,Q:new gh,q:new yh,M:new vh,L:new _h,w:new Th,I:new wh,d:new Ph,D:new Sh,E:new kh,e:new xh,c:new Dh,i:new Eh,a:new bh,b:new Ih,B:new Ch,h:new Ah,H:new Yh,K:new Mh,k:new Fh,m:new Rh,s:new Nh,S:new Oh,X:new Vh,x:new Lh,t:new jh,T:new zh};var Jg=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Xg=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Zg=/^'([^]*?)'?$/,ey=/''/g,ty=/\S/,ry=/[a-zA-Z]/;function di(n,e,t,r){var a,i,o,l,u,h,f,g,_,S,D,b,I,V,z,$,Z,xe;C(3,arguments);var J=String(n),T=String(e),p=qe(),y=(a=(i=r?.locale)!==null&&i!==void 0?i:p.locale)!==null&&a!==void 0?a:ri;if(!y.match)throw new RangeError("locale must contain match property");var w=oe((o=(l=(u=(h=r?.firstWeekContainsDate)!==null&&h!==void 0?h:r==null||(f=r.locale)===null||f===void 0||(g=f.options)===null||g===void 0?void 0:g.firstWeekContainsDate)!==null&&u!==void 0?u:p.firstWeekContainsDate)!==null&&l!==void 0?l:(_=p.locale)===null||_===void 0||(S=_.options)===null||S===void 0?void 0:S.firstWeekContainsDate)!==null&&o!==void 0?o:1);if(!(w>=1&&w<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var P=oe((D=(b=(I=(V=r?.weekStartsOn)!==null&&V!==void 0?V:r==null||(z=r.locale)===null||z===void 0||($=z.options)===null||$===void 0?void 0:$.weekStartsOn)!==null&&I!==void 0?I:p.weekStartsOn)!==null&&b!==void 0?b:(Z=p.locale)===null||Z===void 0||(xe=Z.options)===null||xe===void 0?void 0:xe.weekStartsOn)!==null&&D!==void 0?D:0);if(!(P>=0&&P<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(T==="")return J===""?R(t):new Date(NaN);var k={firstWeekContainsDate:w,weekStartsOn:P,locale:y},v=[new uh],Le=T.match(Xg).map(function(we){var ie=we[0];if(ie in qn){var Ie=qn[ie];return Ie(we,y.formatLong)}return we}).join("").match(Jg),ke=[],O=hs(Le),U;try{var G=function(){var ie=U.value;!(r!=null&&r.useAdditionalWeekYearTokens)&&ti(ie)&&Kr(ie,T,n),!(r!=null&&r.useAdditionalDayOfYearTokens)&&ei(ie)&&Kr(ie,T,n);var Ie=ie[0],Je=Uh[Ie];if(Je){var Yr=Je.incompatibleTokens;if(Array.isArray(Yr)){var Mr=ke.find(function(Fr){return Yr.includes(Fr.token)||Fr.token===Ie});if(Mr)throw new RangeError("The format string mustn't contain `".concat(Mr.fullToken,"` and `").concat(ie,"` at the same time"))}else if(Je.incompatibleTokens==="*"&&ke.length>0)throw new RangeError("The format string mustn't contain `".concat(ie,"` and any other token at the same time"));ke.push({token:Ie,fullToken:ie});var Qt=Je.run(J,ie,y.match,k);if(!Qt)return{v:new Date(NaN)};v.push(Qt.setter),J=Qt.rest}else{if(Ie.match(ry))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Ie+"`");if(ie==="''"?ie="'":Ie==="'"&&(ie=ny(ie)),J.indexOf(ie)===0)J=J.slice(ie.length);else return{v:new Date(NaN)}}};for(O.s();!(U=O.n()).done;){var se=G();if(Qe(se)==="object")return se.v}}catch(we){O.e(we)}finally{O.f()}if(J.length>0&&ty.test(J))return new Date(NaN);var be=v.map(function(we){return we.priority}).sort(function(we,ie){return ie-we}).filter(function(we,ie,Ie){return Ie.indexOf(we)===ie}).map(function(we){return v.filter(function(ie){return ie.priority===we}).sort(function(ie,Ie){return Ie.subPriority-ie.subPriority})}).map(function(we){return we[0]}),je=R(t);if(isNaN(je.getTime()))return new Date(NaN);var _e=jn(je,Ut(je)),Te={},ge=hs(be),ut;try{for(ge.s();!(ut=ge.n()).done;){var Ar=ut.value;if(!Ar.validate(_e,k))return new Date(NaN);var Pe=Ar.set(_e,Te,k);Array.isArray(Pe)?(_e=Pe[0],cs(Te,Pe[1])):_e=Pe}}catch(we){ge.e(we)}finally{ge.f()}return _e}function ny(n){return n.match(Zg)[1].replace(ey,"'")}function hi(n){C(1,arguments);var e=R(n);return e.setMinutes(0,0,0),e}function mi(n,e){C(2,arguments);var t=hi(n),r=hi(e);return t.getTime()===r.getTime()}function fi(n,e){C(2,arguments);var t=Xa(n),r=Xa(e);return t.getTime()===r.getTime()}function pi(n,e){C(2,arguments);var t=R(n),r=R(e);return t.getFullYear()===r.getFullYear()&&t.getMonth()===r.getMonth()}function gi(n){C(1,arguments);var e=R(n);return e.setMilliseconds(0),e}function yi(n,e){C(2,arguments);var t=gi(n),r=gi(e);return t.getTime()===r.getTime()}function vi(n,e){C(2,arguments);var t=R(n),r=R(e);return t.getFullYear()===r.getFullYear()}function _i(n){return C(1,arguments),sr(n,Date.now())}function Ti(n,e){C(2,arguments);var t=R(n),r=oe(e),a=t.getFullYear(),i=t.getDate(),o=new Date(0);o.setFullYear(a,r,15),o.setHours(0,0,0,0);var l=us(o);return t.setMonth(r,Math.min(i,l)),t}function wi(n,e,t){var r,a,i,o,l,u,h,f;C(2,arguments);var g=qe(),_=oe((r=(a=(i=(o=t?.weekStartsOn)!==null&&o!==void 0?o:t==null||(l=t.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&i!==void 0?i:g.weekStartsOn)!==null&&a!==void 0?a:(h=g.locale)===null||h===void 0||(f=h.options)===null||f===void 0?void 0:f.weekStartsOn)!==null&&r!==void 0?r:0);if(!(_>=0&&_<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var S=R(n),D=oe(e),b=S.getDay(),I=D%7,V=(I+7)%7,z=7-_,$=D<0||D>6?D-(b+z)%7:(V+z)%7-(b+z)%7;return Xo(S,$)}function Pi(n,e){C(2,arguments);var t=R(n),r=oe(e);return isNaN(t.getTime())?new Date(NaN):(t.setFullYear(r),t)}function Bh(n){return n!=null&&`${n}`!="false"}function YY(n,e=0){return qh(n)?Number(n):e}function qh(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}function MY(n){return Array.isArray(n)?n:[n]}function ay(n){return n==null?"":typeof n=="string"?n:`${n}px`}function FY(n){return n instanceof md?n.nativeElement:n}function ft(n){return typeof n<"u"&&n!==null}function LY(n){return typeof n>"u"||n===null}function jY(n){return typeof n=="string"&&n!==""}function zY(n){return n instanceof pd}function iy(n){return Bh(n)}function UY(n,...e){return typeof n=="function"?n(...e):n}function oy(n,e){function t(r,a,i){let o=`$$__zorroPropDecorator__${a}`;return Object.prototype.hasOwnProperty.call(r,o)&&jr(`The prop "${o}" is already exist, it will be overrided by ${n} decorator.`),Object.defineProperty(r,o,{configurable:!0,writable:!0}),{get(){return i&&i.get?i.get.bind(this)():this[o]},set(l){i&&i.set&&i.set.bind(this)(e(l)),this[o]=e(l)}}}return t}function BY(){return oy("InputBoolean",iy)}function qY(n){if(!n.getClientRects().length)return{top:0,left:0};let e=n.getBoundingClientRect(),t=n.ownerDocument.defaultView;return{top:e.top+t.pageYOffset,left:e.left+t.pageXOffset}}function HY(n){return!!n&&typeof n.then=="function"&&typeof n.catch=="function"}function KY(n){return typeof n=="number"&&isFinite(n)}function WY(n,e){return Math.round(n*Math.pow(10,e))/Math.pow(10,e)}var sy=typeof window<"u",$Y=sy&&window.mozInnerScreenX!=null;function ly(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var cy="rc-util-key";function Kh({mark:n}={}){return n?n.startsWith("data-")?n:`data-${n}`:cy}function vs(n){return n.attachTo?n.attachTo:document.querySelector("head")||document.body}function Hh(n,e={}){if(!ly())return null;let t=document.createElement("style");e.cspNonce&&(t.nonce=e.cspNonce),t.innerHTML=n;let r=vs(e),{firstChild:a}=r;return e.prepend&&r.prepend?r.prepend(t):e.prepend&&a?r.insertBefore(t,a):r.appendChild(t),t}var ys=new Map;function uy(n,e={}){let t=vs(e);return Array.from(ys.get(t)?.children||[]).find(r=>r.tagName==="STYLE"&&r.getAttribute(Kh(e))===n)}function GY(n,e,t={}){let r=vs(t);if(!ys.has(r)){let o=Hh("",t),{parentNode:l}=o;ys.set(r,l),l.removeChild(o)}let a=uy(e,t);if(a)return t.cspNonce&&a.nonce!==t.cspNonce&&(a.nonce=t.cspNonce),a.innerHTML!==n&&(a.innerHTML=n),a;let i=Hh(n,t);return i?.setAttribute(Kh(t),e),i}function QY(n,e,t){return{[`${n}-status-success`]:e==="success",[`${n}-status-warning`]:e==="warning",[`${n}-status-error`]:e==="error",[`${n}-status-validating`]:e==="validating",[`${n}-has-feedback`]:t}}function rM(n){let[e,t]=n;return!!e&&!!t&&t.isBeforeDay(e)}function nM(n,e,t="month",r="left"){let[a,i]=n,o=a||new Wn,l=i||(e?o:o.add(1,t));return a&&!i?(o=a,l=e?a:a.add(1,t)):!a&&i?(o=e?i:i.add(-1,t),l=i):a&&i&&!e&&(a.isSame(i,t)||r==="left"?l=o.add(1,t):o=l.add(-1,t)),[o,l]}function aM(n){return Array.isArray(n)?n.map(e=>e instanceof Wn?e.clone():null):n instanceof Wn?n.clone():null}var Wn=class n{constructor(e){if(e)if(e instanceof Date)this.nativeDate=e;else if(typeof e=="string"||typeof e=="number")jr('The string type is not recommended for date-picker, use "Date" type'),this.nativeDate=new Date(e);else throw new Error('The input date type is not supported ("Date" is now recommended)');else this.nativeDate=new Date}calendarStart(e){return new n(Ur(Za(this.nativeDate),e))}getYear(){return this.nativeDate.getFullYear()}getMonth(){return this.nativeDate.getMonth()}getDay(){return this.nativeDate.getDay()}getTime(){return this.nativeDate.getTime()}getDate(){return this.nativeDate.getDate()}getHours(){return this.nativeDate.getHours()}getMinutes(){return this.nativeDate.getMinutes()}getSeconds(){return this.nativeDate.getSeconds()}getMilliseconds(){return this.nativeDate.getMilliseconds()}clone(){return new n(new Date(this.nativeDate))}setHms(e,t,r){let a=new Date(this.nativeDate.setHours(e,t,r));return new n(a)}setYear(e){return new n(Pi(this.nativeDate,e))}addYears(e){return new n(Ba(this.nativeDate,e))}setMonth(e){return new n(Ti(this.nativeDate,e))}addMonths(e){return new n(zr(this.nativeDate,e))}setDay(e,t){return new n(wi(this.nativeDate,e,t))}setDate(e){let t=new Date(this.nativeDate);return t.setDate(e),new n(t)}addDays(e){return this.setDate(this.getDate()+e)}add(e,t){switch(t){case"decade":return this.addYears(e*10);case"year":return this.addYears(e);case"month":return this.addMonths(e);default:return this.addMonths(e)}}isSame(e,t="day"){let r;switch(t){case"decade":r=(a,i)=>Math.abs(a.getFullYear()-i.getFullYear())<11;break;case"year":r=vi;break;case"month":r=pi;break;case"day":r=sr;break;case"hour":r=mi;break;case"minute":r=fi;break;case"second":r=yi;break;default:r=sr;break}return r(this.nativeDate,this.toNativeDate(e))}isSameYear(e){return this.isSame(e,"year")}isSameMonth(e){return this.isSame(e,"month")}isSameDay(e){return this.isSame(e,"day")}isSameHour(e){return this.isSame(e,"hour")}isSameMinute(e){return this.isSame(e,"minute")}isSameSecond(e){return this.isSame(e,"second")}isBefore(e,t="day"){if(e===null)return!1;let r;switch(t){case"year":r=Wa;break;case"month":r=Ka;break;case"day":r=Ln;break;case"hour":r=$a;break;case"minute":r=Ga;break;case"second":r=Ja;break;default:r=Ln;break}return r(this.nativeDate,this.toNativeDate(e))<0}isBeforeYear(e){return this.isBefore(e,"year")}isBeforeMonth(e){return this.isBefore(e,"month")}isBeforeDay(e){return this.isBefore(e,"day")}isToday(){return _i(this.nativeDate)}isValid(){return Br(this.nativeDate)}isFirstDayOfMonth(){return ii(this.nativeDate)}isLastDayOfMonth(){return Qa(this.nativeDate)}toNativeDate(e){return e instanceof n?e.nativeDate:e}},iM=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]],Si=class{constructor(e,t){this.format=e,this.localeId=t,this.regex=null,this.matchMap={hour:null,minute:null,second:null,periodNarrow:null,periodWide:null,periodAbbreviated:null},this.genRegexp()}toDate(e){let t=this.getTimeResult(e),r=new Date;return ft(t?.hour)&&r.setHours(t.hour),ft(t?.minute)&&r.setMinutes(t.minute),ft(t?.second)&&r.setSeconds(t.second),t?.period===1&&r.getHours()<12&&r.setHours(r.getHours()+12),r}getTimeResult(e){let t=this.regex.exec(e),r=null;return t?(ft(this.matchMap.periodNarrow)&&(r=ir(this.localeId,nr.Format,ar.Narrow).indexOf(t[this.matchMap.periodNarrow+1])),ft(this.matchMap.periodWide)&&(r=ir(this.localeId,nr.Format,ar.Wide).indexOf(t[this.matchMap.periodWide+1])),ft(this.matchMap.periodAbbreviated)&&(r=ir(this.localeId,nr.Format,ar.Abbreviated).indexOf(t[this.matchMap.periodAbbreviated+1])),{hour:ft(this.matchMap.hour)?Number.parseInt(t[this.matchMap.hour+1],10):null,minute:ft(this.matchMap.minute)?Number.parseInt(t[this.matchMap.minute+1],10):null,second:ft(this.matchMap.second)?Number.parseInt(t[this.matchMap.second+1],10):null,period:r}):null}genRegexp(){let e=this.format.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$&"),t=/h{1,2}/i,r=/m{1,2}/,a=/s{1,2}/,i=/aaaaa/,o=/aaaa/,l=/a{1,3}/,u=t.exec(this.format),h=r.exec(this.format),f=a.exec(this.format),g=i.exec(this.format),_=null,S=null;g||(_=o.exec(this.format)),!_&&!g&&(S=l.exec(this.format)),[u,h,f,g,_,S].filter(b=>!!b).sort((b,I)=>b.index-I.index).forEach((b,I)=>{switch(b){case u:this.matchMap.hour=I,e=e.replace(t,"(\\d{1,2})");break;case h:this.matchMap.minute=I,e=e.replace(r,"(\\d{1,2})");break;case f:this.matchMap.second=I,e=e.replace(a,"(\\d{1,2})");break;case g:this.matchMap.periodNarrow=I;let V=ir(this.localeId,nr.Format,ar.Narrow).join("|");e=e.replace(i,`(${V})`);break;case _:this.matchMap.periodWide=I;let z=ir(this.localeId,nr.Format,ar.Wide).join("|");e=e.replace(o,`(${z})`);break;case S:this.matchMap.periodAbbreviated=I;let $=ir(this.localeId,nr.Format,ar.Abbreviated).join("|");e=e.replace(l,`(${$})`);break}}),this.regex=new RegExp(e)}};var dy={locale:"en",Pagination:{items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},DatePicker:{lang:{placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"],locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"Ok",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"},timePickerLocale:{placeholder:"Select time",rangePlaceholder:["Start time","End time"]}},TimePicker:{placeholder:"Select time",rangePlaceholder:["Start time","End time"]},Calendar:{lang:{placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"],locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"Ok",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"},timePickerLocale:{placeholder:"Select time",rangePlaceholder:["Start time","End time"]}},global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",selectNone:"Clear all data"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No Data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Image:{preview:"Preview"},CronExpression:{cronError:"Invalid cron expression",second:"second",minute:"minute",hour:"hour",day:"day",month:"month",week:"week"},QRCode:{expired:"QR code expired",refresh:"Refresh"}},hy={locale:"zh-cn",Pagination:{items_per_page:"\u6761/\u9875",jump_to:"\u8DF3\u81F3",jump_to_confirm:"\u786E\u5B9A",page:"\u9875",prev_page:"\u4E0A\u4E00\u9875",next_page:"\u4E0B\u4E00\u9875",prev_5:"\u5411\u524D 5 \u9875",next_5:"\u5411\u540E 5 \u9875",prev_3:"\u5411\u524D 3 \u9875",next_3:"\u5411\u540E 3 \u9875",page_size:"\u9875\u7801"},DatePicker:{lang:{placeholder:"\u8BF7\u9009\u62E9\u65E5\u671F",yearPlaceholder:"\u8BF7\u9009\u62E9\u5E74\u4EFD",quarterPlaceholder:"\u8BF7\u9009\u62E9\u5B63\u5EA6",monthPlaceholder:"\u8BF7\u9009\u62E9\u6708\u4EFD",weekPlaceholder:"\u8BF7\u9009\u62E9\u5468",rangePlaceholder:["\u5F00\u59CB\u65E5\u671F","\u7ED3\u675F\u65E5\u671F"],rangeYearPlaceholder:["\u5F00\u59CB\u5E74\u4EFD","\u7ED3\u675F\u5E74\u4EFD"],rangeMonthPlaceholder:["\u5F00\u59CB\u6708\u4EFD","\u7ED3\u675F\u6708\u4EFD"],rangeWeekPlaceholder:["\u5F00\u59CB\u5468","\u7ED3\u675F\u5468"],locale:"zh_CN",today:"\u4ECA\u5929",now:"\u6B64\u523B",backToToday:"\u8FD4\u56DE\u4ECA\u5929",ok:"\u786E\u5B9A",timeSelect:"\u9009\u62E9\u65F6\u95F4",dateSelect:"\u9009\u62E9\u65E5\u671F",weekSelect:"\u9009\u62E9\u5468",clear:"\u6E05\u9664",month:"\u6708",year:"\u5E74",previousMonth:"\u4E0A\u4E2A\u6708 (\u7FFB\u9875\u4E0A\u952E)",nextMonth:"\u4E0B\u4E2A\u6708 (\u7FFB\u9875\u4E0B\u952E)",monthSelect:"\u9009\u62E9\u6708\u4EFD",yearSelect:"\u9009\u62E9\u5E74\u4EFD",decadeSelect:"\u9009\u62E9\u5E74\u4EE3",yearFormat:"YYYY\u5E74",dayFormat:"D\u65E5",dateFormat:"YYYY\u5E74M\u6708D\u65E5",dateTimeFormat:"YYYY\u5E74M\u6708D\u65E5 HH\u65F6mm\u5206ss\u79D2",previousYear:"\u4E0A\u4E00\u5E74 (Control\u952E\u52A0\u5DE6\u65B9\u5411\u952E)",nextYear:"\u4E0B\u4E00\u5E74 (Control\u952E\u52A0\u53F3\u65B9\u5411\u952E)",previousDecade:"\u4E0A\u4E00\u5E74\u4EE3",nextDecade:"\u4E0B\u4E00\u5E74\u4EE3",previousCentury:"\u4E0A\u4E00\u4E16\u7EAA",nextCentury:"\u4E0B\u4E00\u4E16\u7EAA"},timePickerLocale:{placeholder:"\u8BF7\u9009\u62E9\u65F6\u95F4",rangePlaceholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"]}},TimePicker:{placeholder:"\u8BF7\u9009\u62E9\u65F6\u95F4",rangePlaceholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"]},Calendar:{lang:{placeholder:"\u8BF7\u9009\u62E9\u65E5\u671F",yearPlaceholder:"\u8BF7\u9009\u62E9\u5E74\u4EFD",quarterPlaceholder:"\u8BF7\u9009\u62E9\u5B63\u5EA6",monthPlaceholder:"\u8BF7\u9009\u62E9\u6708\u4EFD",weekPlaceholder:"\u8BF7\u9009\u62E9\u5468",rangePlaceholder:["\u5F00\u59CB\u65E5\u671F","\u7ED3\u675F\u65E5\u671F"],rangeYearPlaceholder:["\u5F00\u59CB\u5E74\u4EFD","\u7ED3\u675F\u5E74\u4EFD"],rangeMonthPlaceholder:["\u5F00\u59CB\u6708\u4EFD","\u7ED3\u675F\u6708\u4EFD"],rangeWeekPlaceholder:["\u5F00\u59CB\u5468","\u7ED3\u675F\u5468"],locale:"zh_CN",today:"\u4ECA\u5929",now:"\u6B64\u523B",backToToday:"\u8FD4\u56DE\u4ECA\u5929",ok:"\u786E\u5B9A",timeSelect:"\u9009\u62E9\u65F6\u95F4",dateSelect:"\u9009\u62E9\u65E5\u671F",weekSelect:"\u9009\u62E9\u5468",clear:"\u6E05\u9664",month:"\u6708",year:"\u5E74",previousMonth:"\u4E0A\u4E2A\u6708 (\u7FFB\u9875\u4E0A\u952E)",nextMonth:"\u4E0B\u4E2A\u6708 (\u7FFB\u9875\u4E0B\u952E)",monthSelect:"\u9009\u62E9\u6708\u4EFD",yearSelect:"\u9009\u62E9\u5E74\u4EFD",decadeSelect:"\u9009\u62E9\u5E74\u4EE3",yearFormat:"YYYY\u5E74",dayFormat:"D\u65E5",dateFormat:"YYYY\u5E74M\u6708D\u65E5",dateTimeFormat:"YYYY\u5E74M\u6708D\u65E5 HH\u65F6mm\u5206ss\u79D2",previousYear:"\u4E0A\u4E00\u5E74 (Control\u952E\u52A0\u5DE6\u65B9\u5411\u952E)",nextYear:"\u4E0B\u4E00\u5E74 (Control\u952E\u52A0\u53F3\u65B9\u5411\u952E)",previousDecade:"\u4E0A\u4E00\u5E74\u4EE3",nextDecade:"\u4E0B\u4E00\u5E74\u4EE3",previousCentury:"\u4E0A\u4E00\u4E16\u7EAA",nextCentury:"\u4E0B\u4E00\u4E16\u7EAA"},timePickerLocale:{placeholder:"\u8BF7\u9009\u62E9\u65F6\u95F4",rangePlaceholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"]}},global:{placeholder:"\u8BF7\u9009\u62E9"},Table:{filterTitle:"\u7B5B\u9009",filterConfirm:"\u786E\u5B9A",filterReset:"\u91CD\u7F6E",filterEmptyText:"\u65E0\u7B5B\u9009\u9879",selectAll:"\u5168\u9009\u5F53\u9875",selectInvert:"\u53CD\u9009\u5F53\u9875",selectionAll:"\u5168\u9009\u6240\u6709",sortTitle:"\u6392\u5E8F",expand:"\u5C55\u5F00\u884C",collapse:"\u5173\u95ED\u884C",triggerDesc:"\u70B9\u51FB\u964D\u5E8F",triggerAsc:"\u70B9\u51FB\u5347\u5E8F",cancelSort:"\u53D6\u6D88\u6392\u5E8F",filterCheckall:"\u5168\u9009",filterSearchPlaceholder:"\u5728\u7B5B\u9009\u9879\u4E2D\u641C\u7D22",selectNone:"\u6E05\u7A7A\u6240\u6709"},Modal:{okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",justOkText:"\u77E5\u9053\u4E86"},Popconfirm:{cancelText:"\u53D6\u6D88",okText:"\u786E\u5B9A"},Transfer:{searchPlaceholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5185\u5BB9",itemUnit:"\u9879",itemsUnit:"\u9879",remove:"\u5220\u9664",selectCurrent:"\u5168\u9009\u5F53\u9875",removeCurrent:"\u5220\u9664\u5F53\u9875",selectAll:"\u5168\u9009\u6240\u6709",removeAll:"\u5220\u9664\u5168\u90E8",selectInvert:"\u53CD\u9009\u5F53\u9875"},Upload:{uploading:"\u6587\u4EF6\u4E0A\u4F20\u4E2D",removeFile:"\u5220\u9664\u6587\u4EF6",uploadError:"\u4E0A\u4F20\u9519\u8BEF",previewFile:"\u9884\u89C8\u6587\u4EF6",downloadFile:"\u4E0B\u8F7D\u6587\u4EF6"},Empty:{description:"\u6682\u65E0\u6570\u636E"},Icon:{icon:"\u56FE\u6807"},Text:{edit:"\u7F16\u8F91",copy:"\u590D\u5236",copied:"\u590D\u5236\u6210\u529F",expand:"\u5C55\u5F00"},PageHeader:{back:"\u8FD4\u56DE"},Image:{preview:"\u9884\u89C8"},CronExpression:{cronError:"cron \u8868\u8FBE\u5F0F\u4E0D\u5408\u6CD5",second:"\u79D2",minute:"\u5206\u949F",hour:"\u5C0F\u65F6",day:"\u65E5",month:"\u6708",week:"\u5468"},QRCode:{expired:"\u4E8C\u7EF4\u7801\u8FC7\u671F",refresh:"\u70B9\u51FB\u5237\u65B0"}},$h=new Lr("nz-i18n");function vM(n){return ja([{provide:$h,useValue:n}])}var my=new Lr("nz-date-locale"),ws=(()=>{class n{get localeChange(){return this._change.asObservable()}constructor(t,r){this._change=new ud(this._locale),this.setLocale(t||hy),this.setDateLocale(r||null)}translate(t,r){let a=this._getObjectPath(this._locale,t);return typeof a=="string"?(r&&Object.keys(r).forEach(i=>a=a.replace(new RegExp(`%${i}%`,"g"),r[i])),a):t}setLocale(t){this._locale&&this._locale.locale===t.locale||(this._locale=t,this._change.next(t))}getLocale(){return this._locale}getLocaleId(){return this._locale?this._locale.locale:""}setDateLocale(t){this.dateLocale=t}getDateLocale(){return this.dateLocale}getLocaleData(t,r){let a=t?this._getObjectPath(this._locale,t):this._locale;return!a&&!r&&jr(`Missing translations for "${t}" in language "${this._locale.locale}".
You can use "NzI18nService.setLocale" as a temporary fix.
Welcome to submit a pull request to help us optimize the translations!
https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/CONTRIBUTING.md`),a||r||this._getObjectPath(dy,t)||{}}_getObjectPath(t,r){let a=t,i=r.split("."),o=i.length,l=0;for(;a&&l<o;)a=a[i[l++]];return l===o?a:null}static{this.\u0275fac=function(r){return new(r||n)(Et($h,8),Et(my,8))}}static{this.\u0275prov=rr({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),_M=(()=>{class n{constructor(t){this._locale=t}transform(t,r){return this._locale.translate(t,r)}static{this.\u0275fac=function(r){return new(r||n)(fd(ws,16))}}static{this.\u0275pipe=dd({name:"nzI18n",type:n,pure:!0,standalone:!0})}}return n})(),TM=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Jo({type:n})}static{this.\u0275inj=Qo({})}}return n})(),Gh=new Lr("date-config"),fy={firstDayOfWeek:void 0};function py(n){return tr(tr({},fy),n)}function gy(){let n=Nn(ws),e=Nn(Gh,{optional:!0});return n.getDateLocale()?new _s(n,e):new Ts(n,e)}var Qh=(()=>{class n{constructor(t,r){this.i18n=t,this.config=py(r)}static{this.\u0275fac=function(r){return new(r||n)(Et(ws),Et(Gh,8))}}static{this.\u0275prov=rr({token:n,factory:()=>gy(),providedIn:"root"})}}return n})(),_s=class extends Qh{getISOWeek(e){return ai(e)}getFirstDayOfWeek(){let e;try{e=this.i18n.getDateLocale().options.weekStartsOn}catch{e=1}return this.config.firstDayOfWeek==null?e:this.config.firstDayOfWeek}format(e,t){return e?ni(e,t,{locale:this.i18n.getDateLocale()}):""}parseDate(e,t){return di(e,t,new Date,{locale:this.i18n.getDateLocale(),weekStartsOn:this.getFirstDayOfWeek()})}parseTime(e,t){return this.parseDate(e,t)}},Ts=class extends Qh{getISOWeek(e){return+this.format(e,"w")}getFirstDayOfWeek(){if(this.config.firstDayOfWeek===void 0){let e=this.i18n.getLocaleId();return e&&["zh-cn","zh-tw"].indexOf(e.toLowerCase())>-1?1:0}return this.config.firstDayOfWeek}format(e,t){return e?wd(e,t,this.i18n.getLocaleId()):""}parseDate(e){return new Date(e)}parseTime(e,t){return new Si(t,this.i18n.getLocaleId()).toDate(e)}};var wM={locale:"es",Pagination:{items_per_page:"/ p\xE1gina",jump_to:"Ir a",jump_to_confirm:"confirmar",page:"P\xE1gina",prev_page:"P\xE1gina anterior",next_page:"P\xE1gina siguiente",prev_5:"5 p\xE1ginas previas",next_5:"5 p\xE1ginas siguientes",prev_3:"3 p\xE1ginas previas",next_3:"3 p\xE1ginas siguientes",page_size:"tama\xF1o de p\xE1gina"},DatePicker:{lang:{placeholder:"Seleccionar fecha",yearPlaceholder:"Seleccionar a\xF1o",quarterPlaceholder:"Seleccionar trimestre",monthPlaceholder:"Seleccionar mes",weekPlaceholder:"Seleccionar semana",rangePlaceholder:["Fecha inicial","Fecha final"],rangeYearPlaceholder:["A\xF1o inicial","A\xF1o final"],rangeMonthPlaceholder:["Mes inicial","Mes final"],rangeWeekPlaceholder:["Semana inicial","Semana final"],locale:"es_ES",today:"Hoy",now:"Ahora",backToToday:"Volver a hoy",ok:"Aceptar",clear:"Limpiar",month:"Mes",year:"A\xF1o",timeSelect:"Seleccionar hora",dateSelect:"Seleccionar fecha",weekSelect:"Elegir una semana",monthSelect:"Elegir un mes",yearSelect:"Elegir un a\xF1o",decadeSelect:"Elegir una d\xE9cada",yearFormat:"YYYY",dateFormat:"D/M/YYYY",dayFormat:"D",dateTimeFormat:"D/M/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Mes anterior (PageUp)",nextMonth:"Mes siguiente (PageDown)",previousYear:"A\xF1o anterior (Control + left)",nextYear:"A\xF1o siguiente (Control + right)",previousDecade:"D\xE9cada anterior",nextDecade:"D\xE9cada siguiente",previousCentury:"Siglo anterior",nextCentury:"Siglo siguiente"},timePickerLocale:{placeholder:"Seleccionar hora",rangePlaceholder:["Hora inicial","Hora final"]}},TimePicker:{placeholder:"Seleccionar hora",rangePlaceholder:["Hora inicial","Hora final"]},Calendar:{lang:{placeholder:"Seleccionar fecha",yearPlaceholder:"Seleccionar a\xF1o",quarterPlaceholder:"Seleccionar trimestre",monthPlaceholder:"Seleccionar mes",weekPlaceholder:"Seleccionar semana",rangePlaceholder:["Fecha inicial","Fecha final"],rangeYearPlaceholder:["A\xF1o inicial","A\xF1o final"],rangeMonthPlaceholder:["Mes inicial","Mes final"],rangeWeekPlaceholder:["Semana inicial","Semana final"],locale:"es_ES",today:"Hoy",now:"Ahora",backToToday:"Volver a hoy",ok:"Aceptar",clear:"Limpiar",month:"Mes",year:"A\xF1o",timeSelect:"Seleccionar hora",dateSelect:"Seleccionar fecha",weekSelect:"Elegir una semana",monthSelect:"Elegir un mes",yearSelect:"Elegir un a\xF1o",decadeSelect:"Elegir una d\xE9cada",yearFormat:"YYYY",dateFormat:"D/M/YYYY",dayFormat:"D",dateTimeFormat:"D/M/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Mes anterior (AvP\xE1g)",nextMonth:"Mes siguiente (ReP\xE1g)",previousYear:"A\xF1o anterior (Control + izquierda)",nextYear:"A\xF1o siguiente (Control + derecha)",previousDecade:"D\xE9cada anterior",nextDecade:"D\xE9cada siguiente",previousCentury:"Siglo anterior",nextCentury:"Siglo siguiente"},timePickerLocale:{placeholder:"Seleccionar hora",rangePlaceholder:["Hora inicial","Hora final"]}},global:{placeholder:"Seleccione"},Table:{filterTitle:"Filtrar men\xFA",filterConfirm:"Aceptar",filterReset:"Reiniciar",filterEmptyText:"Sin filtros",emptyText:"Sin datos",selectAll:"Seleccionar todo",selectInvert:"Invertir selecci\xF3n",selectionAll:"Seleccionar todos los datos",sortTitle:"Ordenar",expand:"Expandir fila",collapse:"Colapsar fila",triggerDesc:"Click para ordenar descendentemente",triggerAsc:"Click para ordenar ascendentemenre",cancelSort:"Click para cancelar ordenaci\xF3n",filterCheckall:"Seleccionar todos los filtros",filterSearchPlaceholder:"Buscar en filtros",selectNone:"Vaciar todo"},Modal:{okText:"Aceptar",cancelText:"Cancelar",justOkText:"Aceptar"},Popconfirm:{okText:"Aceptar",cancelText:"Cancelar"},Transfer:{titles:["",""],searchPlaceholder:"Buscar aqu\xED",itemUnit:"elemento",itemsUnit:"elementos",remove:"Eliminar",selectCurrent:"Seleccionar p\xE1gina actual",removeCurrent:"Eliminar p\xE1gina actual",selectAll:"Seleccionar todos los datos",removeAll:"Eliminar todos los datos",selectInvert:"Invertir p\xE1gina actual"},Upload:{uploading:"Subiendo...",removeFile:"Eliminar archivo",uploadError:"Error al subir el archivo",previewFile:"Vista previa",downloadFile:"Descargar archivo"},Empty:{description:"No hay datos"},Icon:{icon:"icono"},Text:{edit:"Editar",copy:"Copiar",copied:"Copiado",expand:"Expandir"},PageHeader:{back:"Volver"},Image:{preview:"Previsualizaci\xF3n"}};var te=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(te||{}),pt="*";function kM(n,e){return{type:te.Trigger,name:n,definitions:e,options:{}}}function xM(n,e=null){return{type:te.Animate,styles:e,timings:n}}function Jh(n,e=null){return{type:te.Sequence,steps:n,options:e}}function Ps(n){return{type:te.Style,styles:n,offset:null}}function DM(n,e,t){return{type:te.State,name:n,styles:e,options:t}}function EM(n,e,t=null){return{type:te.Transition,expr:n,animation:e,options:t}}function bM(n,e,t=null){return{type:te.Query,selector:n,animation:e,options:t}}function IM(n,e){return{type:te.Stagger,timings:n,animation:e}}var Bt=class{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},$n=class{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,a=0,i=this.players.length;i==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==i&&this._onFinish()}),o.onDestroy(()=>{++r==i&&this._onDestroy()}),o.onStart(()=>{++a==i&&this._onStart()})}),this.totalTime=this.players.reduce((o,l)=>Math.max(o,l.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(r=>{let a=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(a)})}getPosition(){let e=this.players.reduce((t,r)=>t===null||r.totalTime>t.totalTime?r:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},ki="!";function Xh(n){return new he(3e3,!1)}function yy(){return new he(3100,!1)}function vy(){return new he(3101,!1)}function _y(n){return new he(3001,!1)}function Ty(n){return new he(3003,!1)}function wy(n){return new he(3004,!1)}function Py(n,e){return new he(3005,!1)}function Sy(){return new he(3006,!1)}function ky(){return new he(3007,!1)}function xy(n,e){return new he(3008,!1)}function Dy(n){return new he(3002,!1)}function Ey(n,e,t,r,a){return new he(3010,!1)}function by(){return new he(3011,!1)}function Iy(){return new he(3012,!1)}function Cy(){return new he(3200,!1)}function Ay(){return new he(3202,!1)}function Yy(){return new he(3013,!1)}function My(n){return new he(3014,!1)}function Fy(n){return new he(3015,!1)}function Ry(n){return new he(3016,!1)}function Ny(n,e){return new he(3404,!1)}function Oy(n){return new he(3502,!1)}function Vy(n){return new he(3503,!1)}function Ly(){return new he(3300,!1)}function jy(n){return new he(3504,!1)}function zy(n){return new he(3301,!1)}function Uy(n,e){return new he(3302,!1)}function By(n){return new he(3303,!1)}function qy(n,e){return new he(3400,!1)}function Hy(n){return new he(3401,!1)}function Ky(n){return new he(3402,!1)}function Wy(n,e){return new he(3505,!1)}function qt(n){switch(n.length){case 0:return new Bt;case 1:return n[0];default:return new $n(n)}}function hm(n,e,t=new Map,r=new Map){let a=[],i=[],o=-1,l=null;if(e.forEach(u=>{let h=u.get("offset"),f=h==o,g=f&&l||new Map;u.forEach((_,S)=>{let D=S,b=_;if(S!=="offset")switch(D=n.normalizePropertyName(D,a),b){case ki:b=t.get(S);break;case pt:b=r.get(S);break;default:b=n.normalizeStyleValue(S,D,b,a);break}g.set(D,b)}),f||i.push(g),l=g,o=h}),a.length)throw Oy(a);return i}function Hs(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&Ss(t,"start",n)));break;case"done":n.onDone(()=>r(t&&Ss(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&Ss(t,"destroy",n)));break}}function Ss(n,e,t){let r=t.totalTime,a=!!t.disabled,i=Ks(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,r??n.totalTime,a),o=n._data;return o!=null&&(i._data=o),i}function Ks(n,e,t,r,a="",i=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:a,totalTime:i,disabled:!!o}}function tt(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function Zh(n){let e=n.indexOf(":"),t=n.substring(1,e),r=n.slice(e+1);return[t,r]}var $y=typeof document>"u"?null:document.documentElement;function Ws(n){let e=n.parentNode||n.host||null;return e===$y?null:e}function Gy(n){return n.substring(1,6)=="ebkit"}var fr=null,em=!1;function Qy(n){fr||(fr=Jy()||{},em=fr.style?"WebkitAppearance"in fr.style:!1);let e=!0;return fr.style&&!Gy(n)&&(e=n in fr.style,!e&&em&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in fr.style)),e}function Jy(){return typeof document<"u"?document.body:null}function mm(n,e){for(;e;){if(e===n)return!0;e=Ws(e)}return!1}function fm(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let r=n.querySelector(e);return r?[r]:[]}var $s=(()=>{class n{validateStyleProperty(t){return Qy(t)}matchesElement(t,r){return!1}containsElement(t,r){return mm(t,r)}getParentElement(t){return Ws(t)}query(t,r,a){return fm(t,r,a)}computeStyle(t,r,a){return a||""}animate(t,r,a,i,o,l=[],u){return new Bt(a,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=rr({token:n,factory:n.\u0275fac})}}return n})(),yr=class{static{this.NOOP=new $s}},vr=class{};var Xy=1e3,pm="{{",Zy="}}",gm="ng-enter",Is="ng-leave",xi="ng-trigger",Ci=".ng-trigger",tm="ng-animating",Cs=".ng-animating";function At(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:As(parseFloat(e[1]),e[2])}function As(n,e){switch(e){case"s":return n*Xy;default:return n}}function Ai(n,e,t){return n.hasOwnProperty("duration")?n:ev(n,e,t)}function ev(n,e,t){let r=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,a,i=0,o="";if(typeof n=="string"){let l=n.match(r);if(l===null)return e.push(Xh(n)),{duration:0,delay:0,easing:""};a=As(parseFloat(l[1]),l[2]);let u=l[3];u!=null&&(i=As(parseFloat(u),l[4]));let h=l[5];h&&(o=h)}else a=n;if(!t){let l=!1,u=e.length;a<0&&(e.push(yy()),l=!0),i<0&&(e.push(vy()),l=!0),l&&e.splice(u,0,Xh(n))}return{duration:a,delay:i,easing:o}}function tv(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function gt(n,e,t){e.forEach((r,a)=>{let i=Gs(a);t&&!t.has(a)&&t.set(a,n.style[i]),n.style[i]=r})}function gr(n,e){e.forEach((t,r)=>{let a=Gs(r);n.style[a]=""})}function Gn(n){return Array.isArray(n)?n.length==1?n[0]:Jh(n):n}function rv(n,e,t){let r=e.params||{},a=ym(n);a.length&&a.forEach(i=>{r.hasOwnProperty(i)||t.push(_y(i))})}var Ys=new RegExp(`${pm}\\s*(.+?)\\s*${Zy}`,"g");function ym(n){let e=[];if(typeof n=="string"){let t;for(;t=Ys.exec(n);)e.push(t[1]);Ys.lastIndex=0}return e}function Jn(n,e,t){let r=`${n}`,a=r.replace(Ys,(i,o)=>{let l=e[o];return l==null&&(t.push(Ty(o)),l=""),l.toString()});return a==r?n:a}var nv=/-+([a-z0-9])/g;function Gs(n){return n.replace(nv,(...e)=>e[1].toUpperCase())}function av(n,e){return n===0||e===0}function iv(n,e,t){if(t.size&&e.length){let r=e[0],a=[];if(t.forEach((i,o)=>{r.has(o)||a.push(o),r.set(o,i)}),a.length)for(let i=1;i<e.length;i++){let o=e[i];a.forEach(l=>o.set(l,Qs(n,l)))}}return e}function et(n,e,t){switch(e.type){case te.Trigger:return n.visitTrigger(e,t);case te.State:return n.visitState(e,t);case te.Transition:return n.visitTransition(e,t);case te.Sequence:return n.visitSequence(e,t);case te.Group:return n.visitGroup(e,t);case te.Animate:return n.visitAnimate(e,t);case te.Keyframes:return n.visitKeyframes(e,t);case te.Style:return n.visitStyle(e,t);case te.Reference:return n.visitReference(e,t);case te.AnimateChild:return n.visitAnimateChild(e,t);case te.AnimateRef:return n.visitAnimateRef(e,t);case te.Query:return n.visitQuery(e,t);case te.Stagger:return n.visitStagger(e,t);default:throw wy(e.type)}}function Qs(n,e){return window.getComputedStyle(n)[e]}var ov=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),Yi=class extends vr{normalizePropertyName(e,t){return Gs(e)}normalizeStyleValue(e,t,r,a){let i="",o=r.toString().trim();if(ov.has(t)&&r!==0&&r!=="0")if(typeof r=="number")i="px";else{let l=r.match(/^[+-]?[\d\.]+([a-z]*)$/);l&&l[1].length==0&&a.push(Py(e,r))}return o+i}};var Mi="*";function sv(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(r=>lv(r,t,e)):t.push(n),t}function lv(n,e,t){if(n[0]==":"){let u=cv(n,t);if(typeof u=="function"){e.push(u);return}n=u}let r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(r==null||r.length<4)return t.push(Fy(n)),e;let a=r[1],i=r[2],o=r[3];e.push(rm(a,o));let l=a==Mi&&o==Mi;i[0]=="<"&&!l&&e.push(rm(o,a))}function cv(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(Ry(n)),"* => *"}}var Di=new Set(["true","1"]),Ei=new Set(["false","0"]);function rm(n,e){let t=Di.has(n)||Ei.has(n),r=Di.has(e)||Ei.has(e);return(a,i)=>{let o=n==Mi||n==a,l=e==Mi||e==i;return!o&&t&&typeof a=="boolean"&&(o=a?Di.has(n):Ei.has(n)),!l&&r&&typeof i=="boolean"&&(l=i?Di.has(e):Ei.has(e)),o&&l}}var vm=":self",uv=new RegExp(`s*${vm}s*,?`,"g");function _m(n,e,t,r){return new Ms(n).build(e,t,r)}var nm="",Ms=class{constructor(e){this._driver=e}build(e,t,r){let a=new Fs(t);return this._resetContextStyleTimingState(a),et(this,Gn(e),a)}_resetContextStyleTimingState(e){e.currentQuerySelector=nm,e.collectedStyles=new Map,e.collectedStyles.set(nm,new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,a=t.depCount=0,i=[],o=[];return e.name.charAt(0)=="@"&&t.errors.push(Sy()),e.definitions.forEach(l=>{if(this._resetContextStyleTimingState(t),l.type==te.State){let u=l,h=u.name;h.toString().split(/\s*,\s*/).forEach(f=>{u.name=f,i.push(this.visitState(u,t))}),u.name=h}else if(l.type==te.Transition){let u=this.visitTransition(l,t);r+=u.queryCount,a+=u.depCount,o.push(u)}else t.errors.push(ky())}),{type:te.Trigger,name:e.name,states:i,transitions:o,queryCount:r,depCount:a,options:null}}visitState(e,t){let r=this.visitStyle(e.styles,t),a=e.options&&e.options.params||null;if(r.containsDynamicStyles){let i=new Set,o=a||{};r.styles.forEach(l=>{l instanceof Map&&l.forEach(u=>{ym(u).forEach(h=>{o.hasOwnProperty(h)||i.add(h)})})}),i.size&&t.errors.push(xy(e.name,[...i.values()]))}return{type:te.State,name:e.name,style:r,options:a?{params:a}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let r=et(this,Gn(e.animation),t),a=sv(e.expr,t.errors);return{type:te.Transition,matchers:a,animation:r,queryCount:t.queryCount,depCount:t.depCount,options:pr(e.options)}}visitSequence(e,t){return{type:te.Sequence,steps:e.steps.map(r=>et(this,r,t)),options:pr(e.options)}}visitGroup(e,t){let r=t.currentTime,a=0,i=e.steps.map(o=>{t.currentTime=r;let l=et(this,o,t);return a=Math.max(a,t.currentTime),l});return t.currentTime=a,{type:te.Group,steps:i,options:pr(e.options)}}visitAnimate(e,t){let r=fv(e.timings,t.errors);t.currentAnimateTimings=r;let a,i=e.styles?e.styles:Ps({});if(i.type==te.Keyframes)a=this.visitKeyframes(i,t);else{let o=e.styles,l=!1;if(!o){l=!0;let h={};r.easing&&(h.easing=r.easing),o=Ps(h)}t.currentTime+=r.duration+r.delay;let u=this.visitStyle(o,t);u.isEmptyStep=l,a=u}return t.currentAnimateTimings=null,{type:te.Animate,timings:r,style:a,options:null}}visitStyle(e,t){let r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){let r=[],a=Array.isArray(e.styles)?e.styles:[e.styles];for(let l of a)typeof l=="string"?l===pt?r.push(l):t.errors.push(Dy(l)):r.push(new Map(Object.entries(l)));let i=!1,o=null;return r.forEach(l=>{if(l instanceof Map&&(l.has("easing")&&(o=l.get("easing"),l.delete("easing")),!i)){for(let u of l.values())if(u.toString().indexOf(pm)>=0){i=!0;break}}}),{type:te.Style,styles:r,easing:o,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){let r=t.currentAnimateTimings,a=t.currentTime,i=t.currentTime;r&&i>0&&(i-=r.duration+r.delay),e.styles.forEach(o=>{typeof o!="string"&&o.forEach((l,u)=>{let h=t.collectedStyles.get(t.currentQuerySelector),f=h.get(u),g=!0;f&&(i!=a&&i>=f.startTime&&a<=f.endTime&&(t.errors.push(Ey(u,f.startTime,f.endTime,i,a)),g=!1),i=f.startTime),g&&h.set(u,{startTime:i,endTime:a}),t.options&&rv(l,t.options,t.errors)})})}visitKeyframes(e,t){let r={type:te.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(by()),r;let a=1,i=0,o=[],l=!1,u=!1,h=0,f=e.steps.map(V=>{let z=this._makeStyleAst(V,t),$=z.offset!=null?z.offset:mv(z.styles),Z=0;return $!=null&&(i++,Z=z.offset=$),u=u||Z<0||Z>1,l=l||Z<h,h=Z,o.push(Z),z});u&&t.errors.push(Iy()),l&&t.errors.push(Cy());let g=e.steps.length,_=0;i>0&&i<g?t.errors.push(Ay()):i==0&&(_=a/(g-1));let S=g-1,D=t.currentTime,b=t.currentAnimateTimings,I=b.duration;return f.forEach((V,z)=>{let $=_>0?z==S?1:_*z:o[z],Z=$*I;t.currentTime=D+b.delay+Z,b.duration=Z,this._validateStyleAst(V,t),V.offset=$,r.styles.push(V)}),r}visitReference(e,t){return{type:te.Reference,animation:et(this,Gn(e.animation),t),options:pr(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:te.AnimateChild,options:pr(e.options)}}visitAnimateRef(e,t){return{type:te.AnimateRef,animation:this.visitReference(e.animation,t),options:pr(e.options)}}visitQuery(e,t){let r=t.currentQuerySelector,a=e.options||{};t.queryCount++,t.currentQuery=e;let[i,o]=dv(e.selector);t.currentQuerySelector=r.length?r+" "+i:i,tt(t.collectedStyles,t.currentQuerySelector,new Map);let l=et(this,Gn(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:te.Query,selector:i,limit:a.limit||0,optional:!!a.optional,includeSelf:o,animation:l,originalSelector:e.selector,options:pr(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(Yy());let r=e.timings==="full"?{duration:0,delay:0,easing:"full"}:Ai(e.timings,t.errors,!0);return{type:te.Stagger,animation:et(this,Gn(e.animation),t),timings:r,options:null}}};function dv(n){let e=!!n.split(/\s*,\s*/).find(t=>t==vm);return e&&(n=n.replace(uv,"")),n=n.replace(/@\*/g,Ci).replace(/@\w+/g,t=>Ci+"-"+t.slice(1)).replace(/:animating/g,Cs),[n,e]}function hv(n){return n?tr({},n):null}var Fs=class{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function mv(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function fv(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let i=Ai(n,e).duration;return ks(i,0,"")}let t=n;if(t.split(/\s+/).some(i=>i.charAt(0)=="{"&&i.charAt(1)=="{")){let i=ks(0,0,"");return i.dynamic=!0,i.strValue=t,i}let a=Ai(t,e);return ks(a.duration,a.delay,a.easing)}function pr(n){return n?(n=tr({},n),n.params&&(n.params=hv(n.params))):n={},n}function ks(n,e,t){return{duration:n,delay:e,easing:t}}function Js(n,e,t,r,a,i,o=null,l=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:a,delay:i,totalTime:a+i,easing:o,subTimeline:l}}var Xn=class{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},pv=1,gv=":enter",yv=new RegExp(gv,"g"),vv=":leave",_v=new RegExp(vv,"g");function Tm(n,e,t,r,a,i=new Map,o=new Map,l,u,h=[]){return new Rs().buildKeyframes(n,e,t,r,a,i,o,l,u,h)}var Rs=class{buildKeyframes(e,t,r,a,i,o,l,u,h,f=[]){h=h||new Xn;let g=new Ns(e,t,h,a,i,f,[]);g.options=u;let _=u.delay?At(u.delay):0;g.currentTimeline.delayNextStep(_),g.currentTimeline.setStyles([o],null,g.errors,u),et(this,r,g);let S=g.timelines.filter(D=>D.containsAnimation());if(S.length&&l.size){let D;for(let b=S.length-1;b>=0;b--){let I=S[b];if(I.element===t){D=I;break}}D&&!D.allowOnlyTimelineStyles()&&D.setStyles([l],null,g.errors,u)}return S.length?S.map(D=>D.buildKeyframes()):[Js(t,[],[],[],0,_,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let r=t.subInstructions.get(t.element);if(r){let a=t.createSubContext(e.options),i=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,a,a.options);i!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){let r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(let a of e){let i=a?.delay;if(i){let o=typeof i=="number"?i:At(Jn(i,a?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let i=t.currentTimeline.currentTime,o=r.duration!=null?At(r.duration):null,l=r.delay!=null?At(r.delay):null;return o!==0&&e.forEach(u=>{let h=t.appendInstructionToTimeline(u,o,l);i=Math.max(i,h.duration+h.delay)}),i}visitReference(e,t){t.updateOptions(e.options,!0),et(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let r=t.subContextCount,a=t,i=e.options;if(i&&(i.params||i.delay)&&(a=t.createSubContext(i),a.transformIntoNewTimeline(),i.delay!=null)){a.previousNode.type==te.Style&&(a.currentTimeline.snapshotCurrentStyles(),a.previousNode=Fi);let o=At(i.delay);a.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>et(this,o,a)),a.currentTimeline.applyStylesToKeyframe(),a.subContextCount>r&&a.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let r=[],a=t.currentTimeline.currentTime,i=e.options&&e.options.delay?At(e.options.delay):0;e.steps.forEach(o=>{let l=t.createSubContext(e.options);i&&l.delayNextStep(i),et(this,o,l),a=Math.max(a,l.currentTimeline.currentTime),r.push(l.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(a),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let r=e.strValue,a=t.params?Jn(r,t.params,t.errors):r;return Ai(a,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let r=t.currentAnimateTimings=this._visitTiming(e.timings,t),a=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),a.snapshotCurrentStyles());let i=e.style;i.type==te.Keyframes?this.visitKeyframes(i,t):(t.incrementTime(r.duration),this.visitStyle(i,t),a.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let r=t.currentTimeline,a=t.currentAnimateTimings;!a&&r.hasCurrentStyleProperties()&&r.forwardFrame();let i=a&&a.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(i):r.setStyles(e.styles,i,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let r=t.currentAnimateTimings,a=t.currentTimeline.duration,i=r.duration,l=t.createSubContext().currentTimeline;l.easing=r.easing,e.styles.forEach(u=>{let h=u.offset||0;l.forwardTime(h*i),l.setStyles(u.styles,u.easing,t.errors,t.options),l.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(l),t.transformIntoNewTimeline(a+i),t.previousNode=e}visitQuery(e,t){let r=t.currentTimeline.currentTime,a=e.options||{},i=a.delay?At(a.delay):0;i&&(t.previousNode.type===te.Style||r==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Fi);let o=r,l=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!a.optional,t.errors);t.currentQueryTotal=l.length;let u=null;l.forEach((h,f)=>{t.currentQueryIndex=f;let g=t.createSubContext(e.options,h);i&&g.delayNextStep(i),h===t.element&&(u=g.currentTimeline),et(this,e.animation,g),g.currentTimeline.applyStylesToKeyframe();let _=g.currentTimeline.currentTime;o=Math.max(o,_)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),u&&(t.currentTimeline.mergeTimelineCollectedStyles(u),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let r=t.parentContext,a=t.currentTimeline,i=e.timings,o=Math.abs(i.duration),l=o*(t.currentQueryTotal-1),u=o*t.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":u=l-u;break;case"full":u=r.currentStaggerTime;break}let f=t.currentTimeline;u&&f.delayNextStep(u);let g=f.currentTime;et(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=a.currentTime-g+(a.startTime-r.currentTimeline.startTime)}},Fi={},Ns=class n{constructor(e,t,r,a,i,o,l,u){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=a,this._leaveClassName=i,this.errors=o,this.timelines=l,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Fi,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=u||new Ri(this._driver,t,0),l.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let r=e,a=this.options;r.duration!=null&&(a.duration=At(r.duration)),r.delay!=null&&(a.delay=At(r.delay));let i=r.params;if(i){let o=a.params;o||(o=this.options.params={}),Object.keys(i).forEach(l=>{(!t||!o.hasOwnProperty(l))&&(o[l]=Jn(i[l],o,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let r=e.params={};Object.keys(t).forEach(a=>{r[a]=t[a]})}}return e}createSubContext(e=null,t,r){let a=t||this.element,i=new n(this._driver,a,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(a,r||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(e),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(e){return this.previousNode=Fi,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){let a={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},i=new Os(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,a,e.stretchStartingKeyframe);return this.timelines.push(i),a}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,a,i,o){let l=[];if(a&&l.push(this.element),e.length>0){e=e.replace(yv,"."+this._enterClassName),e=e.replace(_v,"."+this._leaveClassName);let u=r!=1,h=this._driver.query(this.element,e,u);r!==0&&(h=r<0?h.slice(h.length+r,h.length):h.slice(0,r)),l.push(...h)}return!i&&l.length==0&&o.push(My(t)),l}},Ri=class n{constructor(e,t,r,a){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=a,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=pv,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||pt),this._currentKeyframe.set(t,pt);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,a){t&&this._previousKeyframe.set("easing",t);let i=a&&a.params||{},o=Tv(e,this._globalTimelineStyles);for(let[l,u]of o){let h=Jn(u,i,r);this._pendingStyles.set(l,h),this._localTimelineStyles.has(l)||this._backFill.set(l,this._globalTimelineStyles.get(l)??pt),this._updateStyle(l,h)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{let a=this._styleSummary.get(r);(!a||t.time>a.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,r=this._keyframes.size===1&&this.duration===0,a=[];this._keyframes.forEach((l,u)=>{let h=new Map([...this._backFill,...l]);h.forEach((f,g)=>{f===ki?e.add(g):f===pt&&t.add(g)}),r||h.set("offset",u/this.duration),a.push(h)});let i=[...e.values()],o=[...t.values()];if(r){let l=a[0],u=new Map(l);l.set("offset",0),u.set("offset",1),a=[l,u]}return Js(this.element,a,i,o,this.duration,this.startTime,this.easing,!1)}},Os=class extends Ri{constructor(e,t,r,a,i,o,l=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=a,this.postStyleProps=i,this._stretchStartingKeyframe=l,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:a}=this.timings;if(this._stretchStartingKeyframe&&t){let i=[],o=r+t,l=t/o,u=new Map(e[0]);u.set("offset",0),i.push(u);let h=new Map(e[0]);h.set("offset",am(l)),i.push(h);let f=e.length-1;for(let g=1;g<=f;g++){let _=new Map(e[g]),S=_.get("offset"),D=t+S*r;_.set("offset",am(D/o)),i.push(_)}r=o,t=0,a="",e=i}return Js(this.element,e,this.preStyleProps,this.postStyleProps,r,t,a,!0)}};function am(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function Tv(n,e){let t=new Map,r;return n.forEach(a=>{if(a==="*"){r??=e.keys();for(let i of r)t.set(i,pt)}else for(let[i,o]of a)t.set(i,o)}),t}function im(n,e,t,r,a,i,o,l,u,h,f,g,_){return{type:0,element:n,triggerName:e,isRemovalTransition:a,fromState:t,fromStyles:i,toState:r,toStyles:o,timelines:l,queriedElements:u,preStyleProps:h,postStyleProps:f,totalTime:g,errors:_}}var xs={},Ni=class{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,a){return wv(this.ast.matchers,e,t,r,a)}buildStyles(e,t,r){let a=this._stateStyles.get("*");return e!==void 0&&(a=this._stateStyles.get(e?.toString())||a),a?a.buildStyles(t,r):new Map}build(e,t,r,a,i,o,l,u,h,f){let g=[],_=this.ast.options&&this.ast.options.params||xs,S=l&&l.params||xs,D=this.buildStyles(r,S,g),b=u&&u.params||xs,I=this.buildStyles(a,b,g),V=new Set,z=new Map,$=new Map,Z=a==="void",xe={params:wm(b,_),delay:this.ast.options?.delay},J=f?[]:Tm(e,t,this.ast.animation,i,o,D,I,xe,h,g),T=0;return J.forEach(p=>{T=Math.max(p.duration+p.delay,T)}),g.length?im(t,this._triggerName,r,a,Z,D,I,[],[],z,$,T,g):(J.forEach(p=>{let y=p.element,w=tt(z,y,new Set);p.preStyleProps.forEach(k=>w.add(k));let P=tt($,y,new Set);p.postStyleProps.forEach(k=>P.add(k)),y!==t&&V.add(y)}),im(t,this._triggerName,r,a,Z,D,I,J,[...V.values()],z,$,T))}};function wv(n,e,t,r,a){return n.some(i=>i(e,t,r,a))}function wm(n,e){let t=tr({},e);return Object.entries(n).forEach(([r,a])=>{a!=null&&(t[r]=a)}),t}var Vs=class{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){let r=new Map,a=wm(e,this.defaultParams);return this.styles.styles.forEach(i=>{typeof i!="string"&&i.forEach((o,l)=>{o&&(o=Jn(o,a,t));let u=this.normalizer.normalizePropertyName(l,t);o=this.normalizer.normalizeStyleValue(l,u,o,t),r.set(l,o)})}),r}};function Pv(n,e,t){return new Ls(n,e,t)}var Ls=class{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(a=>{let i=a.options&&a.options.params||{};this.states.set(a.name,new Vs(a.style,i,r))}),om(this.states,"true","1"),om(this.states,"false","0"),t.transitions.forEach(a=>{this.transitionFactories.push(new Ni(e,a,this.states))}),this.fallbackTransition=Sv(e,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,a){return this.transitionFactories.find(o=>o.match(e,t,r,a))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}};function Sv(n,e,t){let r=[(o,l)=>!0],a={type:te.Sequence,steps:[],options:null},i={type:te.Transition,animation:a,matchers:r,options:null,queryCount:0,depCount:0};return new Ni(n,i,e)}function om(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var kv=new Xn,js=class{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){let r=[],a=[],i=_m(this._driver,t,r,a);if(r.length)throw Vy(r);a.length&&void 0,this._animations.set(e,i)}_buildPlayer(e,t,r){let a=e.element,i=hm(this._normalizer,e.keyframes,t,r);return this._driver.animate(a,i,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){let a=[],i=this._animations.get(e),o,l=new Map;if(i?(o=Tm(this._driver,t,i,gm,Is,new Map,new Map,r,kv,a),o.forEach(f=>{let g=tt(l,f.element,new Map);f.postStyleProps.forEach(_=>g.set(_,null))})):(a.push(Ly()),o=[]),a.length)throw jy(a);l.forEach((f,g)=>{f.forEach((_,S)=>{f.set(S,this._driver.computeStyle(g,S,pt))})});let u=o.map(f=>{let g=l.get(f.element);return this._buildPlayer(f,new Map,g)}),h=qt(u);return this._playersById.set(e,h),h.onDestroy(()=>this.destroy(e)),this.players.push(h),h}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw zy(e);return t}listen(e,t,r,a){let i=Ks(t,"","","");return Hs(this._getPlayer(e),r,i,a),()=>{}}command(e,t,r,a){if(r=="register"){this.register(e,a[0]);return}if(r=="create"){let o=a[0]||{};this.create(e,t,o);return}let i=this._getPlayer(e);switch(r){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(a[0]));break;case"destroy":this.destroy(e);break}}},sm="ng-animate-queued",xv=".ng-animate-queued",Ds="ng-animate-disabled",Dv=".ng-animate-disabled",Ev="ng-star-inserted",bv=".ng-star-inserted",Iv=[],Pm={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Cv={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ht="__ng_removed",Zn=class{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let r=e&&e.hasOwnProperty("value"),a=r?e.value:e;if(this.value=Yv(a),r){let i=e,{value:o}=i,l=cd(i,["value"]);this.options=l}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let r=this.options.params;Object.keys(t).forEach(a=>{r[a]==null&&(r[a]=t[a])})}}},Qn="void",Es=new Zn(Qn),zs=class{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,st(t,this._hostClassName)}listen(e,t,r,a){if(!this._triggers.has(t))throw Uy(r,t);if(r==null||r.length==0)throw By(t);if(!Mv(r))throw qy(r,t);let i=tt(this._elementListeners,e,[]),o={name:t,phase:r,callback:a};i.push(o);let l=tt(this._engine.statesByElement,e,new Map);return l.has(t)||(st(e,xi),st(e,xi+"-"+t),l.set(t,Es)),()=>{this._engine.afterFlush(()=>{let u=i.indexOf(o);u>=0&&i.splice(u,1),this._triggers.has(t)||l.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw Hy(e);return t}trigger(e,t,r,a=!0){let i=this._getTrigger(t),o=new ea(this.id,t,e),l=this._engine.statesByElement.get(e);l||(st(e,xi),st(e,xi+"-"+t),this._engine.statesByElement.set(e,l=new Map));let u=l.get(t),h=new Zn(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&u&&h.absorbOptions(u.options),l.set(t,h),u||(u=Es),!(h.value===Qn)&&u.value===h.value){if(!Nv(u.params,h.params)){let b=[],I=i.matchStyles(u.value,u.params,b),V=i.matchStyles(h.value,h.params,b);b.length?this._engine.reportError(b):this._engine.afterFlush(()=>{gr(e,I),gt(e,V)})}return}let _=tt(this._engine.playersByElement,e,[]);_.forEach(b=>{b.namespaceId==this.id&&b.triggerName==t&&b.queued&&b.destroy()});let S=i.matchTransition(u.value,h.value,e,h.params),D=!1;if(!S){if(!a)return;S=i.fallbackTransition,D=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:S,fromState:u,toState:h,player:o,isFallbackTransition:D}),D||(st(e,sm),o.onStart(()=>{Gr(e,sm)})),o.onDone(()=>{let b=this.players.indexOf(o);b>=0&&this.players.splice(b,1);let I=this._engine.playersByElement.get(e);if(I){let V=I.indexOf(o);V>=0&&I.splice(V,1)}}),this.players.push(o),_.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(a=>a.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let r=this._engine.driver.query(e,Ci,!0);r.forEach(a=>{if(a[ht])return;let i=this._engine.fetchNamespacesByElement(a);i.size?i.forEach(o=>o.triggerLeaveAnimation(a,t,!1,!0)):this.clearElementCache(a)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(a=>this.clearElementCache(a)))}triggerLeaveAnimation(e,t,r,a){let i=this._engine.statesByElement.get(e),o=new Map;if(i){let l=[];if(i.forEach((u,h)=>{if(o.set(h,u.value),this._triggers.has(h)){let f=this.trigger(e,h,Qn,a);f&&l.push(f)}}),l.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&qt(l).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){let a=new Set;t.forEach(i=>{let o=i.name;if(a.has(o))return;a.add(o);let u=this._triggers.get(o).fallbackTransition,h=r.get(o)||Es,f=new Zn(Qn),g=new ea(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:u,fromState:h,toState:f,player:g,isFallbackTransition:!0})})}}removeNode(e,t){let r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let a=!1;if(r.totalAnimations){let i=r.players.length?r.playersByQueriedElement.get(e):[];if(i&&i.length)a=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){a=!0;break}}}if(this.prepareLeaveAnimationListeners(e),a)r.markElementAsRemoved(this.id,e,!1,t);else{let i=e[ht];(!i||i===Pm)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){st(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(r=>{let a=r.player;if(a.destroyed)return;let i=r.element,o=this._elementListeners.get(i);o&&o.forEach(l=>{if(l.name==r.triggerName){let u=Ks(i,r.triggerName,r.fromState.value,r.toState.value);u._data=e,Hs(r.player,l.phase,u,l.callback)}}),a.markedForDestroy?this._engine.afterFlush(()=>{a.destroy()}):t.push(r)}),this._queue=[],t.sort((r,a)=>{let i=r.transition.ast.depCount,o=a.transition.ast.depCount;return i==0||o==0?i-o:this._engine.driver.containsElement(r.element,a.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},Us=class{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r,a){this.bodyNode=e,this.driver=t,this._normalizer=r,this.scheduler=a,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,o)=>{}}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){let r=new zs(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){let r=this._namespaceList,a=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,l=this.driver.getParentElement(t);for(;l;){let u=a.get(l);if(u){let h=r.indexOf(u);r.splice(h+1,0,e),o=!0;break}l=this.driver.getParentElement(l)}o||r.unshift(e)}else r.push(e);return a.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let a=this._namespaceLookup[e];a&&a.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);let a=this._namespaceList.indexOf(r);a>=0&&this._namespaceList.splice(a,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,r=this.statesByElement.get(e);if(r){for(let a of r.values())if(a.namespaceId){let i=this._fetchNamespace(a.namespaceId);i&&t.add(i)}}return t}trigger(e,t,r,a){if(bi(t)){let i=this._fetchNamespace(e);if(i)return i.trigger(t,r,a),!0}return!1}insertNode(e,t,r,a){if(!bi(t))return;let i=t[ht];if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;let o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){let o=this._fetchNamespace(e);o&&o.insertNode(t,r)}a&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),st(e,Ds)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Gr(e,Ds))}removeNode(e,t,r){if(bi(t)){this.scheduler?.notify();let a=e?this._fetchNamespace(e):null;a?a.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);let i=this.namespacesByHostElement.get(t);i&&i.id!==e&&i.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,a,i){this.collectedLeaveElements.push(t),t[ht]={namespaceId:e,setForRemoval:a,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:i}}listen(e,t,r,a,i){return bi(t)?this._fetchNamespace(e).listen(t,r,a,i):()=>{}}_buildInstruction(e,t,r,a,i){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,a,e.fromState.options,e.toState.options,t,i)}destroyInnerAnimations(e){let t=this.driver.query(e,Ci,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,Cs,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return qt(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[ht];if(t&&t.setForRemoval){if(e[ht]=Pm,t.namespaceId){this.destroyInnerAnimations(e);let r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(Ds)&&this.markElementAsDisabled(e,!1),this.driver.query(e,Dv,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,a)=>this._balanceNamespaceList(r,a)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++){let a=this.collectedEnterElements[r];st(a,Ev)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let r=[];try{t=this._flushAnimations(r,e)}finally{for(let a=0;a<r.length;a++)r[a]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++){let a=this.collectedLeaveElements[r];this.processLeaveNode(a)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){let r=this._whenQuietFns;this._whenQuietFns=[],t.length?qt(t).onDone(()=>{r.forEach(a=>a())}):r.forEach(a=>a())}}reportError(e){throw Ky(e)}_flushAnimations(e,t){let r=new Xn,a=[],i=new Map,o=[],l=new Map,u=new Map,h=new Map,f=new Set;this.disabledNodes.forEach(O=>{f.add(O);let U=this.driver.query(O,xv,!0);for(let G=0;G<U.length;G++)f.add(U[G])});let g=this.bodyNode,_=Array.from(this.statesByElement.keys()),S=um(_,this.collectedEnterElements),D=new Map,b=0;S.forEach((O,U)=>{let G=gm+b++;D.set(U,G),O.forEach(se=>st(se,G))});let I=[],V=new Set,z=new Set;for(let O=0;O<this.collectedLeaveElements.length;O++){let U=this.collectedLeaveElements[O],G=U[ht];G&&G.setForRemoval&&(I.push(U),V.add(U),G.hasAnimation?this.driver.query(U,bv,!0).forEach(se=>V.add(se)):z.add(U))}let $=new Map,Z=um(_,Array.from(V));Z.forEach((O,U)=>{let G=Is+b++;$.set(U,G),O.forEach(se=>st(se,G))}),e.push(()=>{S.forEach((O,U)=>{let G=D.get(U);O.forEach(se=>Gr(se,G))}),Z.forEach((O,U)=>{let G=$.get(U);O.forEach(se=>Gr(se,G))}),I.forEach(O=>{this.processLeaveNode(O)})});let xe=[],J=[];for(let O=this._namespaceList.length-1;O>=0;O--)this._namespaceList[O].drainQueuedTransitions(t).forEach(G=>{let se=G.player,be=G.element;if(xe.push(se),this.collectedEnterElements.length){let Pe=be[ht];if(Pe&&Pe.setForMove){if(Pe.previousTriggersValues&&Pe.previousTriggersValues.has(G.triggerName)){let we=Pe.previousTriggersValues.get(G.triggerName),ie=this.statesByElement.get(G.element);if(ie&&ie.has(G.triggerName)){let Ie=ie.get(G.triggerName);Ie.value=we,ie.set(G.triggerName,Ie)}}se.destroy();return}}let je=!g||!this.driver.containsElement(g,be),_e=$.get(be),Te=D.get(be),ge=this._buildInstruction(G,r,Te,_e,je);if(ge.errors&&ge.errors.length){J.push(ge);return}if(je){se.onStart(()=>gr(be,ge.fromStyles)),se.onDestroy(()=>gt(be,ge.toStyles)),a.push(se);return}if(G.isFallbackTransition){se.onStart(()=>gr(be,ge.fromStyles)),se.onDestroy(()=>gt(be,ge.toStyles)),a.push(se);return}let ut=[];ge.timelines.forEach(Pe=>{Pe.stretchStartingKeyframe=!0,this.disabledNodes.has(Pe.element)||ut.push(Pe)}),ge.timelines=ut,r.append(be,ge.timelines);let Ar={instruction:ge,player:se,element:be};o.push(Ar),ge.queriedElements.forEach(Pe=>tt(l,Pe,[]).push(se)),ge.preStyleProps.forEach((Pe,we)=>{if(Pe.size){let ie=u.get(we);ie||u.set(we,ie=new Set),Pe.forEach((Ie,Je)=>ie.add(Je))}}),ge.postStyleProps.forEach((Pe,we)=>{let ie=h.get(we);ie||h.set(we,ie=new Set),Pe.forEach((Ie,Je)=>ie.add(Je))})});if(J.length){let O=[];J.forEach(U=>{O.push(Wy(U.triggerName,U.errors))}),xe.forEach(U=>U.destroy()),this.reportError(O)}let T=new Map,p=new Map;o.forEach(O=>{let U=O.element;r.has(U)&&(p.set(U,U),this._beforeAnimationBuild(O.player.namespaceId,O.instruction,T))}),a.forEach(O=>{let U=O.element;this._getPreviousPlayers(U,!1,O.namespaceId,O.triggerName,null).forEach(se=>{tt(T,U,[]).push(se),se.destroy()})});let y=I.filter(O=>dm(O,u,h)),w=new Map;cm(w,this.driver,z,h,pt).forEach(O=>{dm(O,u,h)&&y.push(O)});let k=new Map;S.forEach((O,U)=>{cm(k,this.driver,new Set(O),u,ki)}),y.forEach(O=>{let U=w.get(O),G=k.get(O);w.set(O,new Map([...U?.entries()??[],...G?.entries()??[]]))});let v=[],Le=[],ke={};o.forEach(O=>{let{element:U,player:G,instruction:se}=O;if(r.has(U)){if(f.has(U)){G.onDestroy(()=>gt(U,se.toStyles)),G.disabled=!0,G.overrideTotalTime(se.totalTime),a.push(G);return}let be=ke;if(p.size>1){let _e=U,Te=[];for(;_e=_e.parentNode;){let ge=p.get(_e);if(ge){be=ge;break}Te.push(_e)}Te.forEach(ge=>p.set(ge,be))}let je=this._buildAnimation(G.namespaceId,se,T,i,k,w);if(G.setRealPlayer(je),be===ke)v.push(G);else{let _e=this.playersByElement.get(be);_e&&_e.length&&(G.parentPlayer=qt(_e)),a.push(G)}}else gr(U,se.fromStyles),G.onDestroy(()=>gt(U,se.toStyles)),Le.push(G),f.has(U)&&a.push(G)}),Le.forEach(O=>{let U=i.get(O.element);if(U&&U.length){let G=qt(U);O.setRealPlayer(G)}}),a.forEach(O=>{O.parentPlayer?O.syncPlayerEvents(O.parentPlayer):O.destroy()});for(let O=0;O<I.length;O++){let U=I[O],G=U[ht];if(Gr(U,Is),G&&G.hasAnimation)continue;let se=[];if(l.size){let je=l.get(U);je&&je.length&&se.push(...je);let _e=this.driver.query(U,Cs,!0);for(let Te=0;Te<_e.length;Te++){let ge=l.get(_e[Te]);ge&&ge.length&&se.push(...ge)}}let be=se.filter(je=>!je.destroyed);be.length?Fv(this,U,be):this.processLeaveNode(U)}return I.length=0,v.forEach(O=>{this.players.push(O),O.onDone(()=>{O.destroy();let U=this.players.indexOf(O);this.players.splice(U,1)}),O.play()}),v}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,a,i){let o=[];if(t){let l=this.playersByQueriedElement.get(e);l&&(o=l)}else{let l=this.playersByElement.get(e);if(l){let u=!i||i==Qn;l.forEach(h=>{h.queued||!u&&h.triggerName!=a||o.push(h)})}}return(r||a)&&(o=o.filter(l=>!(r&&r!=l.namespaceId||a&&a!=l.triggerName))),o}_beforeAnimationBuild(e,t,r){let a=t.triggerName,i=t.element,o=t.isRemovalTransition?void 0:e,l=t.isRemovalTransition?void 0:a;for(let u of t.timelines){let h=u.element,f=h!==i,g=tt(r,h,[]);this._getPreviousPlayers(h,f,o,l,t.toState).forEach(S=>{let D=S.getRealPlayer();D.beforeDestroy&&D.beforeDestroy(),S.destroy(),g.push(S)})}gr(i,t.fromStyles)}_buildAnimation(e,t,r,a,i,o){let l=t.triggerName,u=t.element,h=[],f=new Set,g=new Set,_=t.timelines.map(D=>{let b=D.element;f.add(b);let I=b[ht];if(I&&I.removedBeforeQueried)return new Bt(D.duration,D.delay);let V=b!==u,z=Rv((r.get(b)||Iv).map(T=>T.getRealPlayer())).filter(T=>{let p=T;return p.element?p.element===b:!1}),$=i.get(b),Z=o.get(b),xe=hm(this._normalizer,D.keyframes,$,Z),J=this._buildPlayer(D,xe,z);if(D.subTimeline&&a&&g.add(b),V){let T=new ea(e,l,b);T.setRealPlayer(J),h.push(T)}return J});h.forEach(D=>{tt(this.playersByQueriedElement,D.element,[]).push(D),D.onDone(()=>Av(this.playersByQueriedElement,D.element,D))}),f.forEach(D=>st(D,tm));let S=qt(_);return S.onDestroy(()=>{f.forEach(D=>Gr(D,tm)),gt(u,t.toStyles)}),g.forEach(D=>{tt(a,D,[]).push(S)}),S}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Bt(e.duration,e.delay)}},ea=class{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Bt,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(a=>Hs(e,r,void 0,a))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){tt(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function Av(n,e,t){let r=n.get(e);if(r){if(r.length){let a=r.indexOf(t);r.splice(a,1)}r.length==0&&n.delete(e)}return r}function Yv(n){return n??null}function bi(n){return n&&n.nodeType===1}function Mv(n){return n=="start"||n=="done"}function lm(n,e){let t=n.style.display;return n.style.display=e??"none",t}function cm(n,e,t,r,a){let i=[];t.forEach(u=>i.push(lm(u)));let o=[];r.forEach((u,h)=>{let f=new Map;u.forEach(g=>{let _=e.computeStyle(h,g,a);f.set(g,_),(!_||_.length==0)&&(h[ht]=Cv,o.push(h))}),n.set(h,f)});let l=0;return t.forEach(u=>lm(u,i[l++])),o}function um(n,e){let t=new Map;if(n.forEach(l=>t.set(l,[])),e.length==0)return t;let r=1,a=new Set(e),i=new Map;function o(l){if(!l)return r;let u=i.get(l);if(u)return u;let h=l.parentNode;return t.has(h)?u=h:a.has(h)?u=r:u=o(h),i.set(l,u),u}return e.forEach(l=>{let u=o(l);u!==r&&t.get(u).push(l)}),t}function st(n,e){n.classList?.add(e)}function Gr(n,e){n.classList?.remove(e)}function Fv(n,e,t){qt(t).onDone(()=>n.processLeaveNode(e))}function Rv(n){let e=[];return Sm(n,e),e}function Sm(n,e){for(let t=0;t<n.length;t++){let r=n[t];r instanceof $n?Sm(r.players,e):e.push(r)}}function Nv(n,e){let t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let a=0;a<t.length;a++){let i=t[a];if(!e.hasOwnProperty(i)||n[i]!==e[i])return!1}return!0}function dm(n,e,t){let r=t.get(n);if(!r)return!1;let a=e.get(n);return a?r.forEach(i=>a.add(i)):e.set(n,r),t.delete(n),!0}var Qr=class{constructor(e,t,r,a){this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,o)=>{},this._transitionEngine=new Us(e.body,t,r,a),this._timelineEngine=new js(e.body,t,r),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(e,t,r,a,i){let o=e+"-"+a,l=this._triggerCache[o];if(!l){let u=[],h=[],f=_m(this._driver,i,u,h);if(u.length)throw Ny(a,u);h.length&&void 0,l=Pv(a,f,this._normalizer),this._triggerCache[o]=l}this._transitionEngine.registerTrigger(t,a,l)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,a){this._transitionEngine.insertNode(e,t,r,a)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,a){if(r.charAt(0)=="@"){let[i,o]=Zh(r),l=a;this._timelineEngine.command(i,t,o,l)}else this._transitionEngine.trigger(e,t,r,a)}listen(e,t,r,a,i){if(r.charAt(0)=="@"){let[o,l]=Zh(r);return this._timelineEngine.listen(o,t,l,i)}return this._transitionEngine.listen(e,t,r,a,i)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function Ov(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=bs(e[0]),e.length>1&&(r=bs(e[e.length-1]))):e instanceof Map&&(t=bs(e)),t||r?new Bs(n,t,r):null}var Bs=class n{static{this.initialStylesByElement=new WeakMap}constructor(e,t,r){this._element=e,this._startStyles=t,this._endStyles=r,this._state=0;let a=n.initialStylesByElement.get(e);a||n.initialStylesByElement.set(e,a=new Map),this._initialStyles=a}start(){this._state<1&&(this._startStyles&&gt(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(gt(this._element,this._initialStyles),this._endStyles&&(gt(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(gr(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(gr(this._element,this._endStyles),this._endStyles=null),gt(this._element,this._initialStyles),this._state=3)}};function bs(n){let e=null;return n.forEach((t,r)=>{Vv(r)&&(e=e||new Map,e.set(r,t))}),e}function Vv(n){return n==="display"||n==="position"}var Oi=class{constructor(e,t,r,a){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,a)=>{a!=="offset"&&e.set(a,this._finished?r:Qs(this.element,a))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},Vi=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return mm(e,t)}getParentElement(e){return Ws(e)}query(e,t,r){return fm(e,t,r)}computeStyle(e,t,r){return Qs(e,t)}animate(e,t,r,a,i,o=[]){let l=a==0?"both":"forwards",u={duration:r,delay:a,fill:l};i&&(u.easing=i);let h=new Map,f=o.filter(S=>S instanceof Oi);av(r,a)&&f.forEach(S=>{S.currentSnapshot.forEach((D,b)=>h.set(b,D))});let g=tv(t).map(S=>new Map(S));g=iv(e,g,h);let _=Ov(e,g);return new Oi(e,g,u,_)}};var Ii="@",km="@.disabled",Li=class{constructor(e,t,r,a){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=a,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,a=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,a)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,a){this.delegate.setAttribute(e,t,r,a)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,a){this.delegate.setStyle(e,t,r,a)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){t.charAt(0)==Ii&&t==km?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},qs=class extends Li{constructor(e,t,r,a,i){super(t,r,a,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){t.charAt(0)==Ii?t.charAt(1)=="."&&t==km?(r=r===void 0?!0:!!r,this.disableAnimations(e,r)):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if(t.charAt(0)==Ii){let a=Lv(e),i=t.slice(1),o="";return i.charAt(0)!=Ii&&([i,o]=jv(i)),this.engine.listen(this.namespaceId,a,i,o,l=>{let u=l._data||-1;this.factory.scheduleListenerCallback(u,r,l)})}return this.delegate.listen(e,t,r)}};function Lv(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function jv(n){let e=n.indexOf("."),t=n.substring(0,e),r=n.slice(e+1);return[t,r]}var ji=class{constructor(e,t,r){this.delegate=e,this.engine=t,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,t.onRemovalComplete=(a,i)=>{let o=i?.parentNode(a);o&&i.removeChild(o,a)}}createRenderer(e,t){let r="",a=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let h=this._rendererCache,f=h.get(a);if(!f){let g=()=>h.delete(a);f=new Li(r,a,this.engine,g),h.set(a,f)}return f}let i=t.id,o=t.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);let l=h=>{Array.isArray(h)?h.forEach(l):this.engine.registerTrigger(i,o,e,h.name,h)};return t.data.animation.forEach(l),new qs(this,o,a,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,r){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(r));return}let a=this._animationCallbacksBuffer;a.length==0&&queueMicrotask(()=>{this._zone.run(()=>{a.forEach(i=>{let[o,l]=i;o(l)}),this._animationCallbacksBuffer=[]})}),a.push([t,r])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var Uv=(()=>{class n extends Qr{constructor(t,r,a){super(t,r,a,Nn(gd,{optional:!0}))}ngOnDestroy(){this.flush()}static{this.\u0275fac=function(r){return new(r||n)(Et(Td),Et(yr),Et(vr))}}static{this.\u0275prov=rr({token:n,factory:n.\u0275fac})}}return n})();function Bv(){return new Yi}function qv(n,e,t){return new ji(n,e,t)}var xm=[{provide:vr,useFactory:Bv},{provide:Qr,useClass:Uv},{provide:yd,useFactory:qv,deps:[Pd,Qr,Ua]}],Hv=[{provide:yr,useFactory:()=>new Vi},{provide:za,useValue:"BrowserAnimations"},...xm],BM=[{provide:yr,useClass:$s},{provide:za,useValue:"NoopAnimations"},...xm];function qM(){return vd("NgEagerAnimations"),[...Hv]}var Dm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Em={};var Ht,Xs;(function(){var n;function e(T,p){function y(){}y.prototype=p.prototype,T.D=p.prototype,T.prototype=new y,T.prototype.constructor=T,T.C=function(w,P,k){for(var v=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)v[Le-2]=arguments[Le];return p.prototype[P].apply(w,v)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(T,p,y){y||(y=0);var w=Array(16);if(typeof p=="string")for(var P=0;16>P;++P)w[P]=p.charCodeAt(y++)|p.charCodeAt(y++)<<8|p.charCodeAt(y++)<<16|p.charCodeAt(y++)<<24;else for(P=0;16>P;++P)w[P]=p[y++]|p[y++]<<8|p[y++]<<16|p[y++]<<24;p=T.g[0],y=T.g[1],P=T.g[2];var k=T.g[3],v=p+(k^y&(P^k))+w[0]+3614090360&4294967295;p=y+(v<<7&4294967295|v>>>25),v=k+(P^p&(y^P))+w[1]+3905402710&4294967295,k=p+(v<<12&4294967295|v>>>20),v=P+(y^k&(p^y))+w[2]+606105819&4294967295,P=k+(v<<17&4294967295|v>>>15),v=y+(p^P&(k^p))+w[3]+3250441966&4294967295,y=P+(v<<22&4294967295|v>>>10),v=p+(k^y&(P^k))+w[4]+4118548399&4294967295,p=y+(v<<7&4294967295|v>>>25),v=k+(P^p&(y^P))+w[5]+1200080426&4294967295,k=p+(v<<12&4294967295|v>>>20),v=P+(y^k&(p^y))+w[6]+2821735955&4294967295,P=k+(v<<17&4294967295|v>>>15),v=y+(p^P&(k^p))+w[7]+4249261313&4294967295,y=P+(v<<22&4294967295|v>>>10),v=p+(k^y&(P^k))+w[8]+1770035416&4294967295,p=y+(v<<7&4294967295|v>>>25),v=k+(P^p&(y^P))+w[9]+2336552879&4294967295,k=p+(v<<12&4294967295|v>>>20),v=P+(y^k&(p^y))+w[10]+4294925233&4294967295,P=k+(v<<17&4294967295|v>>>15),v=y+(p^P&(k^p))+w[11]+2304563134&4294967295,y=P+(v<<22&4294967295|v>>>10),v=p+(k^y&(P^k))+w[12]+1804603682&4294967295,p=y+(v<<7&4294967295|v>>>25),v=k+(P^p&(y^P))+w[13]+4254626195&4294967295,k=p+(v<<12&4294967295|v>>>20),v=P+(y^k&(p^y))+w[14]+2792965006&4294967295,P=k+(v<<17&4294967295|v>>>15),v=y+(p^P&(k^p))+w[15]+1236535329&4294967295,y=P+(v<<22&4294967295|v>>>10),v=p+(P^k&(y^P))+w[1]+4129170786&4294967295,p=y+(v<<5&4294967295|v>>>27),v=k+(y^P&(p^y))+w[6]+3225465664&4294967295,k=p+(v<<9&4294967295|v>>>23),v=P+(p^y&(k^p))+w[11]+643717713&4294967295,P=k+(v<<14&4294967295|v>>>18),v=y+(k^p&(P^k))+w[0]+3921069994&4294967295,y=P+(v<<20&4294967295|v>>>12),v=p+(P^k&(y^P))+w[5]+3593408605&4294967295,p=y+(v<<5&4294967295|v>>>27),v=k+(y^P&(p^y))+w[10]+38016083&4294967295,k=p+(v<<9&4294967295|v>>>23),v=P+(p^y&(k^p))+w[15]+3634488961&4294967295,P=k+(v<<14&4294967295|v>>>18),v=y+(k^p&(P^k))+w[4]+3889429448&4294967295,y=P+(v<<20&4294967295|v>>>12),v=p+(P^k&(y^P))+w[9]+568446438&4294967295,p=y+(v<<5&4294967295|v>>>27),v=k+(y^P&(p^y))+w[14]+3275163606&4294967295,k=p+(v<<9&4294967295|v>>>23),v=P+(p^y&(k^p))+w[3]+4107603335&4294967295,P=k+(v<<14&4294967295|v>>>18),v=y+(k^p&(P^k))+w[8]+1163531501&4294967295,y=P+(v<<20&4294967295|v>>>12),v=p+(P^k&(y^P))+w[13]+2850285829&4294967295,p=y+(v<<5&4294967295|v>>>27),v=k+(y^P&(p^y))+w[2]+4243563512&4294967295,k=p+(v<<9&4294967295|v>>>23),v=P+(p^y&(k^p))+w[7]+1735328473&4294967295,P=k+(v<<14&4294967295|v>>>18),v=y+(k^p&(P^k))+w[12]+2368359562&4294967295,y=P+(v<<20&4294967295|v>>>12),v=p+(y^P^k)+w[5]+4294588738&4294967295,p=y+(v<<4&4294967295|v>>>28),v=k+(p^y^P)+w[8]+2272392833&4294967295,k=p+(v<<11&4294967295|v>>>21),v=P+(k^p^y)+w[11]+1839030562&4294967295,P=k+(v<<16&4294967295|v>>>16),v=y+(P^k^p)+w[14]+4259657740&4294967295,y=P+(v<<23&4294967295|v>>>9),v=p+(y^P^k)+w[1]+2763975236&4294967295,p=y+(v<<4&4294967295|v>>>28),v=k+(p^y^P)+w[4]+1272893353&4294967295,k=p+(v<<11&4294967295|v>>>21),v=P+(k^p^y)+w[7]+4139469664&4294967295,P=k+(v<<16&4294967295|v>>>16),v=y+(P^k^p)+w[10]+3200236656&4294967295,y=P+(v<<23&4294967295|v>>>9),v=p+(y^P^k)+w[13]+681279174&4294967295,p=y+(v<<4&4294967295|v>>>28),v=k+(p^y^P)+w[0]+3936430074&4294967295,k=p+(v<<11&4294967295|v>>>21),v=P+(k^p^y)+w[3]+3572445317&4294967295,P=k+(v<<16&4294967295|v>>>16),v=y+(P^k^p)+w[6]+76029189&4294967295,y=P+(v<<23&4294967295|v>>>9),v=p+(y^P^k)+w[9]+3654602809&4294967295,p=y+(v<<4&4294967295|v>>>28),v=k+(p^y^P)+w[12]+3873151461&4294967295,k=p+(v<<11&4294967295|v>>>21),v=P+(k^p^y)+w[15]+530742520&4294967295,P=k+(v<<16&4294967295|v>>>16),v=y+(P^k^p)+w[2]+3299628645&4294967295,y=P+(v<<23&4294967295|v>>>9),v=p+(P^(y|~k))+w[0]+4096336452&4294967295,p=y+(v<<6&4294967295|v>>>26),v=k+(y^(p|~P))+w[7]+1126891415&4294967295,k=p+(v<<10&4294967295|v>>>22),v=P+(p^(k|~y))+w[14]+2878612391&4294967295,P=k+(v<<15&4294967295|v>>>17),v=y+(k^(P|~p))+w[5]+4237533241&4294967295,y=P+(v<<21&4294967295|v>>>11),v=p+(P^(y|~k))+w[12]+1700485571&4294967295,p=y+(v<<6&4294967295|v>>>26),v=k+(y^(p|~P))+w[3]+2399980690&4294967295,k=p+(v<<10&4294967295|v>>>22),v=P+(p^(k|~y))+w[10]+4293915773&4294967295,P=k+(v<<15&4294967295|v>>>17),v=y+(k^(P|~p))+w[1]+2240044497&4294967295,y=P+(v<<21&4294967295|v>>>11),v=p+(P^(y|~k))+w[8]+1873313359&4294967295,p=y+(v<<6&4294967295|v>>>26),v=k+(y^(p|~P))+w[15]+4264355552&4294967295,k=p+(v<<10&4294967295|v>>>22),v=P+(p^(k|~y))+w[6]+2734768916&4294967295,P=k+(v<<15&4294967295|v>>>17),v=y+(k^(P|~p))+w[13]+1309151649&4294967295,y=P+(v<<21&4294967295|v>>>11),v=p+(P^(y|~k))+w[4]+4149444226&4294967295,p=y+(v<<6&4294967295|v>>>26),v=k+(y^(p|~P))+w[11]+3174756917&4294967295,k=p+(v<<10&4294967295|v>>>22),v=P+(p^(k|~y))+w[2]+718787259&4294967295,P=k+(v<<15&4294967295|v>>>17),v=y+(k^(P|~p))+w[9]+3951481745&4294967295,T.g[0]=T.g[0]+p&4294967295,T.g[1]=T.g[1]+(P+(v<<21&4294967295|v>>>11))&4294967295,T.g[2]=T.g[2]+P&4294967295,T.g[3]=T.g[3]+k&4294967295}r.prototype.u=function(T,p){p===void 0&&(p=T.length);for(var y=p-this.blockSize,w=this.B,P=this.h,k=0;k<p;){if(P==0)for(;k<=y;)a(this,T,k),k+=this.blockSize;if(typeof T=="string"){for(;k<p;)if(w[P++]=T.charCodeAt(k++),P==this.blockSize){a(this,w),P=0;break}}else for(;k<p;)if(w[P++]=T[k++],P==this.blockSize){a(this,w),P=0;break}}this.h=P,this.o+=p},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var p=1;p<T.length-8;++p)T[p]=0;var y=8*this.o;for(p=T.length-8;p<T.length;++p)T[p]=y&255,y/=256;for(this.u(T),T=Array(16),p=y=0;4>p;++p)for(var w=0;32>w;w+=8)T[y++]=this.g[p]>>>w&255;return T};function i(T,p){var y=l;return Object.prototype.hasOwnProperty.call(y,T)?y[T]:y[T]=p(T)}function o(T,p){this.h=p;for(var y=[],w=!0,P=T.length-1;0<=P;P--){var k=T[P]|0;w&&k==p||(y[P]=k,w=!1)}this.g=y}var l={};function u(T){return-128<=T&&128>T?i(T,function(p){return new o([p|0],0>p?-1:0)}):new o([T|0],0>T?-1:0)}function h(T){if(isNaN(T)||!isFinite(T))return g;if(0>T)return I(h(-T));for(var p=[],y=1,w=0;T>=y;w++)p[w]=T/y|0,y*=4294967296;return new o(p,0)}function f(T,p){if(T.length==0)throw Error("number format error: empty string");if(p=p||10,2>p||36<p)throw Error("radix out of range: "+p);if(T.charAt(0)=="-")return I(f(T.substring(1),p));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=h(Math.pow(p,8)),w=g,P=0;P<T.length;P+=8){var k=Math.min(8,T.length-P),v=parseInt(T.substring(P,P+k),p);8>k?(k=h(Math.pow(p,k)),w=w.j(k).add(h(v))):(w=w.j(y),w=w.add(h(v)))}return w}var g=u(0),_=u(1),S=u(16777216);n=o.prototype,n.m=function(){if(b(this))return-I(this).m();for(var T=0,p=1,y=0;y<this.g.length;y++){var w=this.i(y);T+=(0<=w?w:4294967296+w)*p,p*=4294967296}return T},n.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(D(this))return"0";if(b(this))return"-"+I(this).toString(T);for(var p=h(Math.pow(T,6)),y=this,w="";;){var P=Z(y,p).g;y=V(y,P.j(p));var k=((0<y.g.length?y.g[0]:y.h)>>>0).toString(T);if(y=P,D(y))return k+w;for(;6>k.length;)k="0"+k;w=k+w}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function D(T){if(T.h!=0)return!1;for(var p=0;p<T.g.length;p++)if(T.g[p]!=0)return!1;return!0}function b(T){return T.h==-1}n.l=function(T){return T=V(this,T),b(T)?-1:D(T)?0:1};function I(T){for(var p=T.g.length,y=[],w=0;w<p;w++)y[w]=~T.g[w];return new o(y,~T.h).add(_)}n.abs=function(){return b(this)?I(this):this},n.add=function(T){for(var p=Math.max(this.g.length,T.g.length),y=[],w=0,P=0;P<=p;P++){var k=w+(this.i(P)&65535)+(T.i(P)&65535),v=(k>>>16)+(this.i(P)>>>16)+(T.i(P)>>>16);w=v>>>16,k&=65535,v&=65535,y[P]=v<<16|k}return new o(y,y[y.length-1]&-2147483648?-1:0)};function V(T,p){return T.add(I(p))}n.j=function(T){if(D(this)||D(T))return g;if(b(this))return b(T)?I(this).j(I(T)):I(I(this).j(T));if(b(T))return I(this.j(I(T)));if(0>this.l(S)&&0>T.l(S))return h(this.m()*T.m());for(var p=this.g.length+T.g.length,y=[],w=0;w<2*p;w++)y[w]=0;for(w=0;w<this.g.length;w++)for(var P=0;P<T.g.length;P++){var k=this.i(w)>>>16,v=this.i(w)&65535,Le=T.i(P)>>>16,ke=T.i(P)&65535;y[2*w+2*P]+=v*ke,z(y,2*w+2*P),y[2*w+2*P+1]+=k*ke,z(y,2*w+2*P+1),y[2*w+2*P+1]+=v*Le,z(y,2*w+2*P+1),y[2*w+2*P+2]+=k*Le,z(y,2*w+2*P+2)}for(w=0;w<p;w++)y[w]=y[2*w+1]<<16|y[2*w];for(w=p;w<2*p;w++)y[w]=0;return new o(y,0)};function z(T,p){for(;(T[p]&65535)!=T[p];)T[p+1]+=T[p]>>>16,T[p]&=65535,p++}function $(T,p){this.g=T,this.h=p}function Z(T,p){if(D(p))throw Error("division by zero");if(D(T))return new $(g,g);if(b(T))return p=Z(I(T),p),new $(I(p.g),I(p.h));if(b(p))return p=Z(T,I(p)),new $(I(p.g),p.h);if(30<T.g.length){if(b(T)||b(p))throw Error("slowDivide_ only works with positive integers.");for(var y=_,w=p;0>=w.l(T);)y=xe(y),w=xe(w);var P=J(y,1),k=J(w,1);for(w=J(w,2),y=J(y,2);!D(w);){var v=k.add(w);0>=v.l(T)&&(P=P.add(y),k=v),w=J(w,1),y=J(y,1)}return p=V(T,P.j(p)),new $(P,p)}for(P=g;0<=T.l(p);){for(y=Math.max(1,Math.floor(T.m()/p.m())),w=Math.ceil(Math.log(y)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),k=h(y),v=k.j(p);b(v)||0<v.l(T);)y-=w,k=h(y),v=k.j(p);D(k)&&(k=_),P=P.add(k),T=V(T,v)}return new $(P,T)}n.A=function(T){return Z(this,T).h},n.and=function(T){for(var p=Math.max(this.g.length,T.g.length),y=[],w=0;w<p;w++)y[w]=this.i(w)&T.i(w);return new o(y,this.h&T.h)},n.or=function(T){for(var p=Math.max(this.g.length,T.g.length),y=[],w=0;w<p;w++)y[w]=this.i(w)|T.i(w);return new o(y,this.h|T.h)},n.xor=function(T){for(var p=Math.max(this.g.length,T.g.length),y=[],w=0;w<p;w++)y[w]=this.i(w)^T.i(w);return new o(y,this.h^T.h)};function xe(T){for(var p=T.g.length+1,y=[],w=0;w<p;w++)y[w]=T.i(w)<<1|T.i(w-1)>>>31;return new o(y,T.h)}function J(T,p){var y=p>>5;p%=32;for(var w=T.g.length-y,P=[],k=0;k<w;k++)P[k]=0<p?T.i(k+y)>>>p|T.i(k+y+1)<<32-p:T.i(k+y);return new o(P,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Xs=Em.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=f,Ht=Em.Integer=o}).apply(typeof Dm<"u"?Dm:typeof self<"u"?self:typeof window<"u"?window:{});var zi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Yt={};var Zs,Kv,Jr,el,ta,Ui,tl,rl,nl;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(s,c,d){return s==Array.prototype||s==Object.prototype||(s[c]=d.value),s};function t(s){s=[typeof globalThis=="object"&&globalThis,s,typeof window=="object"&&window,typeof self=="object"&&self,typeof zi=="object"&&zi];for(var c=0;c<s.length;++c){var d=s[c];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=t(this);function a(s,c){if(c)e:{var d=r;s=s.split(".");for(var m=0;m<s.length-1;m++){var x=s[m];if(!(x in d))break e;d=d[x]}s=s[s.length-1],m=d[s],c=c(m),c!=m&&c!=null&&e(d,s,{configurable:!0,writable:!0,value:c})}}function i(s,c){s instanceof String&&(s+="");var d=0,m=!1,x={next:function(){if(!m&&d<s.length){var E=d++;return{value:c(E,s[E]),done:!1}}return m=!0,{done:!0,value:void 0}}};return x[Symbol.iterator]=function(){return x},x}a("Array.prototype.values",function(s){return s||function(){return i(this,function(c,d){return d})}});var o=o||{},l=this||self;function u(s){var c=typeof s;return c=c!="object"?c:s?Array.isArray(s)?"array":c:"null",c=="array"||c=="object"&&typeof s.length=="number"}function h(s){var c=typeof s;return c=="object"&&s!=null||c=="function"}function f(s,c,d){return s.call.apply(s.bind,arguments)}function g(s,c,d){if(!s)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var x=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(x,m),s.apply(c,x)}}return function(){return s.apply(c,arguments)}}function _(s,c,d){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:g,_.apply(null,arguments)}function S(s,c){var d=Array.prototype.slice.call(arguments,1);return function(){var m=d.slice();return m.push.apply(m,arguments),s.apply(this,m)}}function D(s,c){function d(){}d.prototype=c.prototype,s.aa=c.prototype,s.prototype=new d,s.prototype.constructor=s,s.Qb=function(m,x,E){for(var N=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)N[Se-2]=arguments[Se];return c.prototype[x].apply(m,N)}}function b(s){let c=s.length;if(0<c){let d=Array(c);for(let m=0;m<c;m++)d[m]=s[m];return d}return[]}function I(s,c){for(let d=1;d<arguments.length;d++){let m=arguments[d];if(u(m)){let x=s.length||0,E=m.length||0;s.length=x+E;for(let N=0;N<E;N++)s[x+N]=m[N]}else s.push(m)}}class V{constructor(c,d){this.i=c,this.j=d,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function z(s){return/^[\s\xa0]*$/.test(s)}function $(){var s=l.navigator;return s&&(s=s.userAgent)?s:""}function Z(s){return Z[" "](s),s}Z[" "]=function(){};var xe=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function J(s,c,d){for(let m in s)c.call(d,s[m],m,s)}function T(s,c){for(let d in s)c.call(void 0,s[d],d,s)}function p(s){let c={};for(let d in s)c[d]=s[d];return c}let y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(s,c){let d,m;for(let x=1;x<arguments.length;x++){m=arguments[x];for(d in m)s[d]=m[d];for(let E=0;E<y.length;E++)d=y[E],Object.prototype.hasOwnProperty.call(m,d)&&(s[d]=m[d])}}function P(s){var c=1;s=s.split(":");let d=[];for(;0<c&&s.length;)d.push(s.shift()),c--;return s.length&&d.push(s.join(":")),d}function k(s){l.setTimeout(()=>{throw s},0)}function v(){var s=se;let c=null;return s.g&&(c=s.g,s.g=s.g.next,s.g||(s.h=null),c.next=null),c}class Le{constructor(){this.h=this.g=null}add(c,d){let m=ke.get();m.set(c,d),this.h?this.h.next=m:this.g=m,this.h=m}}var ke=new V(()=>new O,s=>s.reset());class O{constructor(){this.next=this.g=this.h=null}set(c,d){this.h=c,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let U,G=!1,se=new Le,be=()=>{let s=l.Promise.resolve(void 0);U=()=>{s.then(je)}};var je=()=>{for(var s;s=v();){try{s.h.call(s.g)}catch(d){k(d)}var c=ke;c.j(s),100>c.h&&(c.h++,s.next=c.g,c.g=s)}G=!1};function _e(){this.s=this.s,this.C=this.C}_e.prototype.s=!1,_e.prototype.ma=function(){this.s||(this.s=!0,this.N())},_e.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Te(s,c){this.type=s,this.g=this.target=c,this.defaultPrevented=!1}Te.prototype.h=function(){this.defaultPrevented=!0};var ge=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var s=!1,c=Object.defineProperty({},"passive",{get:function(){s=!0}});try{let d=()=>{};l.addEventListener("test",d,c),l.removeEventListener("test",d,c)}catch{}return s}();function ut(s,c){if(Te.call(this,s?s.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,s){var d=this.type=s.type,m=s.changedTouches&&s.changedTouches.length?s.changedTouches[0]:null;if(this.target=s.target||s.srcElement,this.g=c,c=s.relatedTarget){if(xe){e:{try{Z(c.nodeName);var x=!0;break e}catch{}x=!1}x||(c=null)}}else d=="mouseover"?c=s.fromElement:d=="mouseout"&&(c=s.toElement);this.relatedTarget=c,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=s.clientX!==void 0?s.clientX:s.pageX,this.clientY=s.clientY!==void 0?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0),this.button=s.button,this.key=s.key||"",this.ctrlKey=s.ctrlKey,this.altKey=s.altKey,this.shiftKey=s.shiftKey,this.metaKey=s.metaKey,this.pointerId=s.pointerId||0,this.pointerType=typeof s.pointerType=="string"?s.pointerType:Ar[s.pointerType]||"",this.state=s.state,this.i=s,s.defaultPrevented&&ut.aa.h.call(this)}}D(ut,Te);var Ar={2:"touch",3:"pen",4:"mouse"};ut.prototype.h=function(){ut.aa.h.call(this);var s=this.i;s.preventDefault?s.preventDefault():s.returnValue=!1};var Pe="closure_listenable_"+(1e6*Math.random()|0),we=0;function ie(s,c,d,m,x){this.listener=s,this.proxy=null,this.src=c,this.type=d,this.capture=!!m,this.ha=x,this.key=++we,this.da=this.fa=!1}function Ie(s){s.da=!0,s.listener=null,s.proxy=null,s.src=null,s.ha=null}function Je(s){this.src=s,this.g={},this.h=0}Je.prototype.add=function(s,c,d,m,x){var E=s.toString();s=this.g[E],s||(s=this.g[E]=[],this.h++);var N=Mr(s,c,m,x);return-1<N?(c=s[N],d||(c.fa=!1)):(c=new ie(c,this.src,E,!!m,x),c.fa=d,s.push(c)),c};function Yr(s,c){var d=c.type;if(d in s.g){var m=s.g[d],x=Array.prototype.indexOf.call(m,c,void 0),E;(E=0<=x)&&Array.prototype.splice.call(m,x,1),E&&(Ie(c),s.g[d].length==0&&(delete s.g[d],s.h--))}}function Mr(s,c,d,m){for(var x=0;x<s.length;++x){var E=s[x];if(!E.da&&E.listener==c&&E.capture==!!d&&E.ha==m)return x}return-1}var Qt="closure_lm_"+(1e6*Math.random()|0),Fr={};function cu(s,c,d,m,x){if(m&&m.once)return du(s,c,d,m,x);if(Array.isArray(c)){for(var E=0;E<c.length;E++)cu(s,c[E],d,m,x);return null}return d=Mo(d),s&&s[Pe]?s.K(c,d,h(m)?!!m.capture:!!m,x):uu(s,c,d,!1,m,x)}function uu(s,c,d,m,x,E){if(!c)throw Error("Invalid event type");var N=h(x)?!!x.capture:!!x,Se=Ao(s);if(Se||(s[Qt]=Se=new Je(s)),d=Se.add(c,d,m,N,E),d.proxy)return d;if(m=pp(),d.proxy=m,m.src=s,m.listener=d,s.addEventListener)ge||(x=N),x===void 0&&(x=!1),s.addEventListener(c.toString(),m,x);else if(s.attachEvent)s.attachEvent(mu(c.toString()),m);else if(s.addListener&&s.removeListener)s.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return d}function pp(){function s(d){return c.call(s.src,s.listener,d)}let c=gp;return s}function du(s,c,d,m,x){if(Array.isArray(c)){for(var E=0;E<c.length;E++)du(s,c[E],d,m,x);return null}return d=Mo(d),s&&s[Pe]?s.L(c,d,h(m)?!!m.capture:!!m,x):uu(s,c,d,!0,m,x)}function hu(s,c,d,m,x){if(Array.isArray(c))for(var E=0;E<c.length;E++)hu(s,c[E],d,m,x);else m=h(m)?!!m.capture:!!m,d=Mo(d),s&&s[Pe]?(s=s.i,c=String(c).toString(),c in s.g&&(E=s.g[c],d=Mr(E,d,m,x),-1<d&&(Ie(E[d]),Array.prototype.splice.call(E,d,1),E.length==0&&(delete s.g[c],s.h--)))):s&&(s=Ao(s))&&(c=s.g[c.toString()],s=-1,c&&(s=Mr(c,d,m,x)),(d=-1<s?c[s]:null)&&Co(d))}function Co(s){if(typeof s!="number"&&s&&!s.da){var c=s.src;if(c&&c[Pe])Yr(c.i,s);else{var d=s.type,m=s.proxy;c.removeEventListener?c.removeEventListener(d,m,s.capture):c.detachEvent?c.detachEvent(mu(d),m):c.addListener&&c.removeListener&&c.removeListener(m),(d=Ao(c))?(Yr(d,s),d.h==0&&(d.src=null,c[Qt]=null)):Ie(s)}}}function mu(s){return s in Fr?Fr[s]:Fr[s]="on"+s}function gp(s,c){if(s.da)s=!0;else{c=new ut(c,this);var d=s.listener,m=s.ha||s.src;s.fa&&Co(s),s=d.call(m,c)}return s}function Ao(s){return s=s[Qt],s instanceof Je?s:null}var Yo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mo(s){return typeof s=="function"?s:(s[Yo]||(s[Yo]=function(c){return s.handleEvent(c)}),s[Yo])}function ze(){_e.call(this),this.i=new Je(this),this.M=this,this.F=null}D(ze,_e),ze.prototype[Pe]=!0,ze.prototype.removeEventListener=function(s,c,d,m){hu(this,s,c,d,m)};function $e(s,c){var d,m=s.F;if(m)for(d=[];m;m=m.F)d.push(m);if(s=s.M,m=c.type||c,typeof c=="string")c=new Te(c,s);else if(c instanceof Te)c.target=c.target||s;else{var x=c;c=new Te(m,s),w(c,x)}if(x=!0,d)for(var E=d.length-1;0<=E;E--){var N=c.g=d[E];x=xa(N,m,!0,c)&&x}if(N=c.g=s,x=xa(N,m,!0,c)&&x,x=xa(N,m,!1,c)&&x,d)for(E=0;E<d.length;E++)N=c.g=d[E],x=xa(N,m,!1,c)&&x}ze.prototype.N=function(){if(ze.aa.N.call(this),this.i){var s=this.i,c;for(c in s.g){for(var d=s.g[c],m=0;m<d.length;m++)Ie(d[m]);delete s.g[c],s.h--}}this.F=null},ze.prototype.K=function(s,c,d,m){return this.i.add(String(s),c,!1,d,m)},ze.prototype.L=function(s,c,d,m){return this.i.add(String(s),c,!0,d,m)};function xa(s,c,d,m){if(c=s.i.g[String(c)],!c)return!0;c=c.concat();for(var x=!0,E=0;E<c.length;++E){var N=c[E];if(N&&!N.da&&N.capture==d){var Se=N.listener,Oe=N.ha||N.src;N.fa&&Yr(s.i,N),x=Se.call(Oe,m)!==!1&&x}}return x&&!m.defaultPrevented}function fu(s,c,d){if(typeof s=="function")d&&(s=_(s,d));else if(s&&typeof s.handleEvent=="function")s=_(s.handleEvent,s);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(s,c||0)}function pu(s){s.g=fu(()=>{s.g=null,s.i&&(s.i=!1,pu(s))},s.l);let c=s.h;s.h=null,s.m.apply(null,c)}class yp extends _e{constructor(c,d){super(),this.m=c,this.l=d,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:pu(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pn(s){_e.call(this),this.h=s,this.g={}}D(Pn,_e);var gu=[];function yu(s){J(s.g,function(c,d){this.g.hasOwnProperty(d)&&Co(c)},s),s.g={}}Pn.prototype.N=function(){Pn.aa.N.call(this),yu(this)},Pn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fo=l.JSON.stringify,vp=l.JSON.parse,_p=class{stringify(s){return l.JSON.stringify(s,void 0)}parse(s){return l.JSON.parse(s,void 0)}};function Ro(){}Ro.prototype.h=null;function vu(s){return s.h||(s.h=s.i())}function _u(){}var Sn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function No(){Te.call(this,"d")}D(No,Te);function Oo(){Te.call(this,"c")}D(Oo,Te);var Jt={},Tu=null;function Da(){return Tu=Tu||new ze}Jt.La="serverreachability";function wu(s){Te.call(this,Jt.La,s)}D(wu,Te);function kn(s){let c=Da();$e(c,new wu(c))}Jt.STAT_EVENT="statevent";function Pu(s,c){Te.call(this,Jt.STAT_EVENT,s),this.stat=c}D(Pu,Te);function Ge(s){let c=Da();$e(c,new Pu(c,s))}Jt.Ma="timingevent";function Su(s,c){Te.call(this,Jt.Ma,s),this.size=c}D(Su,Te);function xn(s,c){if(typeof s!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){s()},c)}function Dn(){this.g=!0}Dn.prototype.xa=function(){this.g=!1};function Tp(s,c,d,m,x,E){s.info(function(){if(s.g)if(E)for(var N="",Se=E.split("&"),Oe=0;Oe<Se.length;Oe++){var me=Se[Oe].split("=");if(1<me.length){var Ue=me[0];me=me[1];var Be=Ue.split("_");N=2<=Be.length&&Be[1]=="type"?N+(Ue+"="+me+"&"):N+(Ue+"=redacted&")}}else N=null;else N=E;return"XMLHTTP REQ ("+m+") [attempt "+x+"]: "+c+`
`+d+`
`+N})}function wp(s,c,d,m,x,E,N){s.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+x+"]: "+c+`
`+d+`
`+E+" "+N})}function Rr(s,c,d,m){s.info(function(){return"XMLHTTP TEXT ("+c+"): "+Sp(s,d)+(m?" "+m:"")})}function Pp(s,c){s.info(function(){return"TIMEOUT: "+c})}Dn.prototype.info=function(){};function Sp(s,c){if(!s.g)return c;if(!c)return null;try{var d=JSON.parse(c);if(d){for(s=0;s<d.length;s++)if(Array.isArray(d[s])){var m=d[s];if(!(2>m.length)){var x=m[1];if(Array.isArray(x)&&!(1>x.length)){var E=x[0];if(E!="noop"&&E!="stop"&&E!="close")for(var N=1;N<x.length;N++)x[N]=""}}}}return Fo(d)}catch{return c}}var Ea={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ku={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Vo;function ba(){}D(ba,Ro),ba.prototype.g=function(){return new XMLHttpRequest},ba.prototype.i=function(){return{}},Vo=new ba;function Ot(s,c,d,m){this.j=s,this.i=c,this.l=d,this.R=m||1,this.U=new Pn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new xu}function xu(){this.i=null,this.g="",this.h=!1}var Du={},Lo={};function jo(s,c,d){s.L=1,s.v=Ya(xt(c)),s.m=d,s.P=!0,Eu(s,null)}function Eu(s,c){s.F=Date.now(),Ia(s),s.A=xt(s.v);var d=s.A,m=s.R;Array.isArray(m)||(m=[String(m)]),zu(d.i,"t",m),s.C=0,d=s.j.J,s.h=new xu,s.g=id(s.j,d?c:null,!s.m),0<s.O&&(s.M=new yp(_(s.Y,s,s.g),s.O)),c=s.U,d=s.g,m=s.ca;var x="readystatechange";Array.isArray(x)||(x&&(gu[0]=x.toString()),x=gu);for(var E=0;E<x.length;E++){var N=cu(d,x[E],m||c.handleEvent,!1,c.h||c);if(!N)break;c.g[N.key]=N}c=s.H?p(s.H):{},s.m?(s.u||(s.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",s.g.ea(s.A,s.u,s.m,c)):(s.u="GET",s.g.ea(s.A,s.u,null,c)),kn(),Tp(s.i,s.u,s.A,s.l,s.R,s.m)}Ot.prototype.ca=function(s){s=s.target;let c=this.M;c&&Dt(s)==3?c.j():this.Y(s)},Ot.prototype.Y=function(s){try{if(s==this.g)e:{let Be=Dt(this.g);var c=this.g.Ba();let Vr=this.g.Z();if(!(3>Be)&&(Be!=3||this.g&&(this.h.h||this.g.oa()||$u(this.g)))){this.J||Be!=4||c==7||(c==8||0>=Vr?kn(3):kn(2)),zo(this);var d=this.g.Z();this.X=d;t:if(bu(this)){var m=$u(this.g);s="";var x=m.length,E=Dt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Xt(this),En(this);var N="";break t}this.h.i=new l.TextDecoder}for(c=0;c<x;c++)this.h.h=!0,s+=this.h.i.decode(m[c],{stream:!(E&&c==x-1)});m.length=0,this.h.g+=s,this.C=0,N=this.h.g}else N=this.g.oa();if(this.o=d==200,wp(this.i,this.u,this.A,this.l,this.R,Be,d),this.o){if(this.T&&!this.K){t:{if(this.g){var Se,Oe=this.g;if((Se=Oe.g?Oe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(Se)){var me=Se;break t}}me=null}if(d=me)Rr(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Uo(this,d);else{this.o=!1,this.s=3,Ge(12),Xt(this),En(this);break e}}if(this.P){d=!0;let dt;for(;!this.J&&this.C<N.length;)if(dt=kp(this,N),dt==Lo){Be==4&&(this.s=4,Ge(14),d=!1),Rr(this.i,this.l,null,"[Incomplete Response]");break}else if(dt==Du){this.s=4,Ge(15),Rr(this.i,this.l,N,"[Invalid Chunk]"),d=!1;break}else Rr(this.i,this.l,dt,null),Uo(this,dt);if(bu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Be!=4||N.length!=0||this.h.h||(this.s=1,Ge(16),d=!1),this.o=this.o&&d,!d)Rr(this.i,this.l,N,"[Invalid Chunked Response]"),Xt(this),En(this);else if(0<N.length&&!this.W){this.W=!0;var Ue=this.j;Ue.g==this&&Ue.ba&&!Ue.M&&(Ue.j.info("Great, no buffering proxy detected. Bytes received: "+N.length),$o(Ue),Ue.M=!0,Ge(11))}}else Rr(this.i,this.l,N,null),Uo(this,N);Be==4&&Xt(this),this.o&&!this.J&&(Be==4?td(this.j,this):(this.o=!1,Ia(this)))}else zp(this.g),d==400&&0<N.indexOf("Unknown SID")?(this.s=3,Ge(12)):(this.s=0,Ge(13)),Xt(this),En(this)}}}catch{}finally{}};function bu(s){return s.g?s.u=="GET"&&s.L!=2&&s.j.Ca:!1}function kp(s,c){var d=s.C,m=c.indexOf(`
`,d);return m==-1?Lo:(d=Number(c.substring(d,m)),isNaN(d)?Du:(m+=1,m+d>c.length?Lo:(c=c.slice(m,m+d),s.C=m+d,c)))}Ot.prototype.cancel=function(){this.J=!0,Xt(this)};function Ia(s){s.S=Date.now()+s.I,Iu(s,s.I)}function Iu(s,c){if(s.B!=null)throw Error("WatchDog timer not null");s.B=xn(_(s.ba,s),c)}function zo(s){s.B&&(l.clearTimeout(s.B),s.B=null)}Ot.prototype.ba=function(){this.B=null;let s=Date.now();0<=s-this.S?(Pp(this.i,this.A),this.L!=2&&(kn(),Ge(17)),Xt(this),this.s=2,En(this)):Iu(this,this.S-s)};function En(s){s.j.G==0||s.J||td(s.j,s)}function Xt(s){zo(s);var c=s.M;c&&typeof c.ma=="function"&&c.ma(),s.M=null,yu(s.U),s.g&&(c=s.g,s.g=null,c.abort(),c.ma())}function Uo(s,c){try{var d=s.j;if(d.G!=0&&(d.g==s||Bo(d.h,s))){if(!s.K&&Bo(d.h,s)&&d.G==3){try{var m=d.Da.g.parse(c)}catch{m=null}if(Array.isArray(m)&&m.length==3){var x=m;if(x[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<s.F)Oa(d),Ra(d);else break e;Wo(d),Ge(18)}}else d.za=x[1],0<d.za-d.T&&37500>x[2]&&d.F&&d.v==0&&!d.C&&(d.C=xn(_(d.Za,d),6e3));if(1>=Yu(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else er(d,11)}else if((s.K||d.g==s)&&Oa(d),!z(c))for(x=d.Da.g.parse(c),c=0;c<x.length;c++){let me=x[c];if(d.T=me[0],me=me[1],d.G==2)if(me[0]=="c"){d.K=me[1],d.ia=me[2];let Ue=me[3];Ue!=null&&(d.la=Ue,d.j.info("VER="+d.la));let Be=me[4];Be!=null&&(d.Aa=Be,d.j.info("SVER="+d.Aa));let Vr=me[5];Vr!=null&&typeof Vr=="number"&&0<Vr&&(m=1.5*Vr,d.L=m,d.j.info("backChannelRequestTimeoutMs_="+m)),m=d;let dt=s.g;if(dt){let La=dt.g?dt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(La){var E=m.h;E.g||La.indexOf("spdy")==-1&&La.indexOf("quic")==-1&&La.indexOf("h2")==-1||(E.j=E.l,E.g=new Set,E.h&&(qo(E,E.h),E.h=null))}if(m.D){let Go=dt.g?dt.g.getResponseHeader("X-HTTP-Session-Id"):null;Go&&(m.ya=Go,De(m.I,m.D,Go))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-s.F,d.j.info("Handshake RTT: "+d.R+"ms")),m=d;var N=s;if(m.qa=ad(m,m.J?m.ia:null,m.W),N.K){Mu(m.h,N);var Se=N,Oe=m.L;Oe&&(Se.I=Oe),Se.B&&(zo(Se),Ia(Se)),m.g=N}else Zu(m);0<d.i.length&&Na(d)}else me[0]!="stop"&&me[0]!="close"||er(d,7);else d.G==3&&(me[0]=="stop"||me[0]=="close"?me[0]=="stop"?er(d,7):Ko(d):me[0]!="noop"&&d.l&&d.l.ta(me),d.v=0)}}kn(4)}catch{}}var xp=class{constructor(s,c){this.g=s,this.map=c}};function Cu(s){this.l=s||10,l.PerformanceNavigationTiming?(s=l.performance.getEntriesByType("navigation"),s=0<s.length&&(s[0].nextHopProtocol=="hq"||s[0].nextHopProtocol=="h2")):s=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=s?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Au(s){return s.h?!0:s.g?s.g.size>=s.j:!1}function Yu(s){return s.h?1:s.g?s.g.size:0}function Bo(s,c){return s.h?s.h==c:s.g?s.g.has(c):!1}function qo(s,c){s.g?s.g.add(c):s.h=c}function Mu(s,c){s.h&&s.h==c?s.h=null:s.g&&s.g.has(c)&&s.g.delete(c)}Cu.prototype.cancel=function(){if(this.i=Fu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let s of this.g.values())s.cancel();this.g.clear()}};function Fu(s){if(s.h!=null)return s.i.concat(s.h.D);if(s.g!=null&&s.g.size!==0){let c=s.i;for(let d of s.g.values())c=c.concat(d.D);return c}return b(s.i)}function Dp(s){if(s.V&&typeof s.V=="function")return s.V();if(typeof Map<"u"&&s instanceof Map||typeof Set<"u"&&s instanceof Set)return Array.from(s.values());if(typeof s=="string")return s.split("");if(u(s)){for(var c=[],d=s.length,m=0;m<d;m++)c.push(s[m]);return c}c=[],d=0;for(m in s)c[d++]=s[m];return c}function Ep(s){if(s.na&&typeof s.na=="function")return s.na();if(!s.V||typeof s.V!="function"){if(typeof Map<"u"&&s instanceof Map)return Array.from(s.keys());if(!(typeof Set<"u"&&s instanceof Set)){if(u(s)||typeof s=="string"){var c=[];s=s.length;for(var d=0;d<s;d++)c.push(d);return c}c=[],d=0;for(let m in s)c[d++]=m;return c}}}function Ru(s,c){if(s.forEach&&typeof s.forEach=="function")s.forEach(c,void 0);else if(u(s)||typeof s=="string")Array.prototype.forEach.call(s,c,void 0);else for(var d=Ep(s),m=Dp(s),x=m.length,E=0;E<x;E++)c.call(void 0,m[E],d&&d[E],s)}var Nu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bp(s,c){if(s){s=s.split("&");for(var d=0;d<s.length;d++){var m=s[d].indexOf("="),x=null;if(0<=m){var E=s[d].substring(0,m);x=s[d].substring(m+1)}else E=s[d];c(E,x?decodeURIComponent(x.replace(/\+/g," ")):"")}}}function Zt(s){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,s instanceof Zt){this.h=s.h,Ca(this,s.j),this.o=s.o,this.g=s.g,Aa(this,s.s),this.l=s.l;var c=s.i,d=new Cn;d.i=c.i,c.g&&(d.g=new Map(c.g),d.h=c.h),Ou(this,d),this.m=s.m}else s&&(c=String(s).match(Nu))?(this.h=!1,Ca(this,c[1]||"",!0),this.o=bn(c[2]||""),this.g=bn(c[3]||"",!0),Aa(this,c[4]),this.l=bn(c[5]||"",!0),Ou(this,c[6]||"",!0),this.m=bn(c[7]||"")):(this.h=!1,this.i=new Cn(null,this.h))}Zt.prototype.toString=function(){var s=[],c=this.j;c&&s.push(In(c,Vu,!0),":");var d=this.g;return(d||c=="file")&&(s.push("//"),(c=this.o)&&s.push(In(c,Vu,!0),"@"),s.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&s.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&s.push("/"),s.push(In(d,d.charAt(0)=="/"?Ap:Cp,!0))),(d=this.i.toString())&&s.push("?",d),(d=this.m)&&s.push("#",In(d,Mp)),s.join("")};function xt(s){return new Zt(s)}function Ca(s,c,d){s.j=d?bn(c,!0):c,s.j&&(s.j=s.j.replace(/:$/,""))}function Aa(s,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);s.s=c}else s.s=null}function Ou(s,c,d){c instanceof Cn?(s.i=c,Fp(s.i,s.h)):(d||(c=In(c,Yp)),s.i=new Cn(c,s.h))}function De(s,c,d){s.i.set(c,d)}function Ya(s){return De(s,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),s}function bn(s,c){return s?c?decodeURI(s.replace(/%25/g,"%2525")):decodeURIComponent(s):""}function In(s,c,d){return typeof s=="string"?(s=encodeURI(s).replace(c,Ip),d&&(s=s.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),s):null}function Ip(s){return s=s.charCodeAt(0),"%"+(s>>4&15).toString(16)+(s&15).toString(16)}var Vu=/[#\/\?@]/g,Cp=/[#\?:]/g,Ap=/[#\?]/g,Yp=/[#\?@]/g,Mp=/#/g;function Cn(s,c){this.h=this.g=null,this.i=s||null,this.j=!!c}function Vt(s){s.g||(s.g=new Map,s.h=0,s.i&&bp(s.i,function(c,d){s.add(decodeURIComponent(c.replace(/\+/g," ")),d)}))}n=Cn.prototype,n.add=function(s,c){Vt(this),this.i=null,s=Nr(this,s);var d=this.g.get(s);return d||this.g.set(s,d=[]),d.push(c),this.h+=1,this};function Lu(s,c){Vt(s),c=Nr(s,c),s.g.has(c)&&(s.i=null,s.h-=s.g.get(c).length,s.g.delete(c))}function ju(s,c){return Vt(s),c=Nr(s,c),s.g.has(c)}n.forEach=function(s,c){Vt(this),this.g.forEach(function(d,m){d.forEach(function(x){s.call(c,x,m,this)},this)},this)},n.na=function(){Vt(this);let s=Array.from(this.g.values()),c=Array.from(this.g.keys()),d=[];for(let m=0;m<c.length;m++){let x=s[m];for(let E=0;E<x.length;E++)d.push(c[m])}return d},n.V=function(s){Vt(this);let c=[];if(typeof s=="string")ju(this,s)&&(c=c.concat(this.g.get(Nr(this,s))));else{s=Array.from(this.g.values());for(let d=0;d<s.length;d++)c=c.concat(s[d])}return c},n.set=function(s,c){return Vt(this),this.i=null,s=Nr(this,s),ju(this,s)&&(this.h-=this.g.get(s).length),this.g.set(s,[c]),this.h+=1,this},n.get=function(s,c){return s?(s=this.V(s),0<s.length?String(s[0]):c):c};function zu(s,c,d){Lu(s,c),0<d.length&&(s.i=null,s.g.set(Nr(s,c),b(d)),s.h+=d.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let s=[],c=Array.from(this.g.keys());for(var d=0;d<c.length;d++){var m=c[d];let E=encodeURIComponent(String(m)),N=this.V(m);for(m=0;m<N.length;m++){var x=E;N[m]!==""&&(x+="="+encodeURIComponent(String(N[m]))),s.push(x)}}return this.i=s.join("&")};function Nr(s,c){return c=String(c),s.j&&(c=c.toLowerCase()),c}function Fp(s,c){c&&!s.j&&(Vt(s),s.i=null,s.g.forEach(function(d,m){var x=m.toLowerCase();m!=x&&(Lu(this,m),zu(this,x,d))},s)),s.j=c}function Rp(s,c){let d=new Dn;if(l.Image){let m=new Image;m.onload=S(Lt,d,"TestLoadImage: loaded",!0,c,m),m.onerror=S(Lt,d,"TestLoadImage: error",!1,c,m),m.onabort=S(Lt,d,"TestLoadImage: abort",!1,c,m),m.ontimeout=S(Lt,d,"TestLoadImage: timeout",!1,c,m),l.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=s}else c(!1)}function Np(s,c){let d=new Dn,m=new AbortController,x=setTimeout(()=>{m.abort(),Lt(d,"TestPingServer: timeout",!1,c)},1e4);fetch(s,{signal:m.signal}).then(E=>{clearTimeout(x),E.ok?Lt(d,"TestPingServer: ok",!0,c):Lt(d,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(x),Lt(d,"TestPingServer: error",!1,c)})}function Lt(s,c,d,m,x){try{x&&(x.onload=null,x.onerror=null,x.onabort=null,x.ontimeout=null),m(d)}catch{}}function Op(){this.g=new _p}function Vp(s,c,d){let m=d||"";try{Ru(s,function(x,E){let N=x;h(x)&&(N=Fo(x)),c.push(m+E+"="+encodeURIComponent(N))})}catch(x){throw c.push(m+"type="+encodeURIComponent("_badmap")),x}}function An(s){this.l=s.Ub||null,this.j=s.eb||!1}D(An,Ro),An.prototype.g=function(){return new Ma(this.l,this.j)},An.prototype.i=function(s){return function(){return s}}({});function Ma(s,c){ze.call(this),this.D=s,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Ma,ze),n=Ma.prototype,n.open=function(s,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=s,this.A=c,this.readyState=1,Mn(this)},n.send=function(s){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};s&&(c.body=s),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Yn(this)),this.readyState=0},n.Sa=function(s){if(this.g&&(this.l=s,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=s.headers,this.readyState=2,Mn(this)),this.g&&(this.readyState=3,Mn(this),this.g)))if(this.responseType==="arraybuffer")s.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in s){if(this.j=s.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Uu(this)}else s.text().then(this.Ra.bind(this),this.ga.bind(this))};function Uu(s){s.j.read().then(s.Pa.bind(s)).catch(s.ga.bind(s))}n.Pa=function(s){if(this.g){if(this.o&&s.value)this.response.push(s.value);else if(!this.o){var c=s.value?s.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!s.done}))&&(this.response=this.responseText+=c)}s.done?Yn(this):Mn(this),this.readyState==3&&Uu(this)}},n.Ra=function(s){this.g&&(this.response=this.responseText=s,Yn(this))},n.Qa=function(s){this.g&&(this.response=s,Yn(this))},n.ga=function(){this.g&&Yn(this)};function Yn(s){s.readyState=4,s.l=null,s.j=null,s.v=null,Mn(s)}n.setRequestHeader=function(s,c){this.u.append(s,c)},n.getResponseHeader=function(s){return this.h&&this.h.get(s.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let s=[],c=this.h.entries();for(var d=c.next();!d.done;)d=d.value,s.push(d[0]+": "+d[1]),d=c.next();return s.join(`\r
`)};function Mn(s){s.onreadystatechange&&s.onreadystatechange.call(s)}Object.defineProperty(Ma.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(s){this.m=s?"include":"same-origin"}});function Bu(s){let c="";return J(s,function(d,m){c+=m,c+=":",c+=d,c+=`\r
`}),c}function Ho(s,c,d){e:{for(m in d){var m=!1;break e}m=!0}m||(d=Bu(d),typeof s=="string"?d!=null&&encodeURIComponent(String(d)):De(s,c,d))}function Ce(s){ze.call(this),this.headers=new Map,this.o=s||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(Ce,ze);var Lp=/^https?$/i,jp=["POST","PUT"];n=Ce.prototype,n.Ha=function(s){this.J=s},n.ea=function(s,c,d,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+s);c=c?c.toUpperCase():"GET",this.D=s,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Vo.g(),this.v=this.o?vu(this.o):vu(Vo),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(c,String(s),!0),this.B=!1}catch(E){qu(this,E);return}if(s=d||"",d=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var x in m)d.set(x,m[x]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let E of m.keys())d.set(E,m.get(E));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(d.keys()).find(E=>E.toLowerCase()=="content-type"),x=l.FormData&&s instanceof l.FormData,!(0<=Array.prototype.indexOf.call(jp,c,void 0))||m||x||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[E,N]of d)this.g.setRequestHeader(E,N);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Wu(this),this.u=!0,this.g.send(s),this.u=!1}catch(E){qu(this,E)}};function qu(s,c){s.h=!1,s.g&&(s.j=!0,s.g.abort(),s.j=!1),s.l=c,s.m=5,Hu(s),Fa(s)}function Hu(s){s.A||(s.A=!0,$e(s,"complete"),$e(s,"error"))}n.abort=function(s){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=s||7,$e(this,"complete"),$e(this,"abort"),Fa(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fa(this,!0)),Ce.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ku(this):this.bb())},n.bb=function(){Ku(this)};function Ku(s){if(s.h&&typeof o<"u"&&(!s.v[1]||Dt(s)!=4||s.Z()!=2)){if(s.u&&Dt(s)==4)fu(s.Ea,0,s);else if($e(s,"readystatechange"),Dt(s)==4){s.h=!1;try{let N=s.Z();e:switch(N){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var d;if(!(d=c)){var m;if(m=N===0){var x=String(s.D).match(Nu)[1]||null;!x&&l.self&&l.self.location&&(x=l.self.location.protocol.slice(0,-1)),m=!Lp.test(x?x.toLowerCase():"")}d=m}if(d)$e(s,"complete"),$e(s,"success");else{s.m=6;try{var E=2<Dt(s)?s.g.statusText:""}catch{E=""}s.l=E+" ["+s.Z()+"]",Hu(s)}}finally{Fa(s)}}}}function Fa(s,c){if(s.g){Wu(s);let d=s.g,m=s.v[0]?()=>{}:null;s.g=null,s.v=null,c||$e(s,"ready");try{d.onreadystatechange=m}catch{}}}function Wu(s){s.I&&(l.clearTimeout(s.I),s.I=null)}n.isActive=function(){return!!this.g};function Dt(s){return s.g?s.g.readyState:0}n.Z=function(){try{return 2<Dt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(s){if(this.g){var c=this.g.responseText;return s&&c.indexOf(s)==0&&(c=c.substring(s.length)),vp(c)}};function $u(s){try{if(!s.g)return null;if("response"in s.g)return s.g.response;switch(s.H){case"":case"text":return s.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in s.g)return s.g.mozResponseArrayBuffer}return null}catch{return null}}function zp(s){let c={};s=(s.g&&2<=Dt(s)&&s.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<s.length;m++){if(z(s[m]))continue;var d=P(s[m]);let x=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();let E=c[x]||[];c[x]=E,E.push(d)}T(c,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fn(s,c,d){return d&&d.internalChannelParams&&d.internalChannelParams[s]||c}function Gu(s){this.Aa=0,this.i=[],this.j=new Dn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Fn("failFast",!1,s),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Fn("baseRetryDelayMs",5e3,s),this.cb=Fn("retryDelaySeedMs",1e4,s),this.Wa=Fn("forwardChannelMaxRetries",2,s),this.wa=Fn("forwardChannelRequestTimeoutMs",2e4,s),this.pa=s&&s.xmlHttpFactory||void 0,this.Xa=s&&s.Tb||void 0,this.Ca=s&&s.useFetchStreams||!1,this.L=void 0,this.J=s&&s.supportsCrossDomainXhr||!1,this.K="",this.h=new Cu(s&&s.concurrentRequestLimit),this.Da=new Op,this.P=s&&s.fastHandshake||!1,this.O=s&&s.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=s&&s.Rb||!1,s&&s.xa&&this.j.xa(),s&&s.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&s&&s.detectBufferingProxy||!1,this.ja=void 0,s&&s.longPollingTimeout&&0<s.longPollingTimeout&&(this.ja=s.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Gu.prototype,n.la=8,n.G=1,n.connect=function(s,c,d,m){Ge(0),this.W=s,this.H=c||{},d&&m!==void 0&&(this.H.OSID=d,this.H.OAID=m),this.F=this.X,this.I=ad(this,null,this.W),Na(this)};function Ko(s){if(Qu(s),s.G==3){var c=s.U++,d=xt(s.I);if(De(d,"SID",s.K),De(d,"RID",c),De(d,"TYPE","terminate"),Rn(s,d),c=new Ot(s,s.j,c),c.L=2,c.v=Ya(xt(d)),d=!1,l.navigator&&l.navigator.sendBeacon)try{d=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!d&&l.Image&&(new Image().src=c.v,d=!0),d||(c.g=id(c.j,null),c.g.ea(c.v)),c.F=Date.now(),Ia(c)}nd(s)}function Ra(s){s.g&&($o(s),s.g.cancel(),s.g=null)}function Qu(s){Ra(s),s.u&&(l.clearTimeout(s.u),s.u=null),Oa(s),s.h.cancel(),s.s&&(typeof s.s=="number"&&l.clearTimeout(s.s),s.s=null)}function Na(s){if(!Au(s.h)&&!s.s){s.s=!0;var c=s.Ga;U||be(),G||(U(),G=!0),se.add(c,s),s.B=0}}function Up(s,c){return Yu(s.h)>=s.h.j-(s.s?1:0)?!1:s.s?(s.i=c.D.concat(s.i),!0):s.G==1||s.G==2||s.B>=(s.Va?0:s.Wa)?!1:(s.s=xn(_(s.Ga,s,c),rd(s,s.B)),s.B++,!0)}n.Ga=function(s){if(this.s)if(this.s=null,this.G==1){if(!s){this.U=Math.floor(1e5*Math.random()),s=this.U++;let x=new Ot(this,this.j,s),E=this.o;if(this.S&&(E?(E=p(E),w(E,this.S)):E=this.S),this.m!==null||this.O||(x.H=E,E=null),this.P)e:{for(var c=0,d=0;d<this.i.length;d++){t:{var m=this.i[d];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(c+=m,4096<c){c=d;break e}if(c===4096||d===this.i.length-1){c=d+1;break e}}c=1e3}else c=1e3;c=Xu(this,x,c),d=xt(this.I),De(d,"RID",s),De(d,"CVER",22),this.D&&De(d,"X-HTTP-Session-Id",this.D),Rn(this,d),E&&(this.O?c="headers="+encodeURIComponent(String(Bu(E)))+"&"+c:this.m&&Ho(d,this.m,E)),qo(this.h,x),this.Ua&&De(d,"TYPE","init"),this.P?(De(d,"$req",c),De(d,"SID","null"),x.T=!0,jo(x,d,null)):jo(x,d,c),this.G=2}}else this.G==3&&(s?Ju(this,s):this.i.length==0||Au(this.h)||Ju(this))};function Ju(s,c){var d;c?d=c.l:d=s.U++;let m=xt(s.I);De(m,"SID",s.K),De(m,"RID",d),De(m,"AID",s.T),Rn(s,m),s.m&&s.o&&Ho(m,s.m,s.o),d=new Ot(s,s.j,d,s.B+1),s.m===null&&(d.H=s.o),c&&(s.i=c.D.concat(s.i)),c=Xu(s,d,1e3),d.I=Math.round(.5*s.wa)+Math.round(.5*s.wa*Math.random()),qo(s.h,d),jo(d,m,c)}function Rn(s,c){s.H&&J(s.H,function(d,m){De(c,m,d)}),s.l&&Ru({},function(d,m){De(c,m,d)})}function Xu(s,c,d){d=Math.min(s.i.length,d);var m=s.l?_(s.l.Na,s.l,s):null;e:{var x=s.i;let E=-1;for(;;){let N=["count="+d];E==-1?0<d?(E=x[0].g,N.push("ofs="+E)):E=0:N.push("ofs="+E);let Se=!0;for(let Oe=0;Oe<d;Oe++){let me=x[Oe].g,Ue=x[Oe].map;if(me-=E,0>me)E=Math.max(0,x[Oe].g-100),Se=!1;else try{Vp(Ue,N,"req"+me+"_")}catch{m&&m(Ue)}}if(Se){m=N.join("&");break e}}}return s=s.i.splice(0,d),c.D=s,m}function Zu(s){if(!s.g&&!s.u){s.Y=1;var c=s.Fa;U||be(),G||(U(),G=!0),se.add(c,s),s.v=0}}function Wo(s){return s.g||s.u||3<=s.v?!1:(s.Y++,s.u=xn(_(s.Fa,s),rd(s,s.v)),s.v++,!0)}n.Fa=function(){if(this.u=null,ed(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var s=2*this.R;this.j.info("BP detection timer enabled: "+s),this.A=xn(_(this.ab,this),s)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ge(10),Ra(this),ed(this))};function $o(s){s.A!=null&&(l.clearTimeout(s.A),s.A=null)}function ed(s){s.g=new Ot(s,s.j,"rpc",s.Y),s.m===null&&(s.g.H=s.o),s.g.O=0;var c=xt(s.qa);De(c,"RID","rpc"),De(c,"SID",s.K),De(c,"AID",s.T),De(c,"CI",s.F?"0":"1"),!s.F&&s.ja&&De(c,"TO",s.ja),De(c,"TYPE","xmlhttp"),Rn(s,c),s.m&&s.o&&Ho(c,s.m,s.o),s.L&&(s.g.I=s.L);var d=s.g;s=s.ia,d.L=1,d.v=Ya(xt(c)),d.m=null,d.P=!0,Eu(d,s)}n.Za=function(){this.C!=null&&(this.C=null,Ra(this),Wo(this),Ge(19))};function Oa(s){s.C!=null&&(l.clearTimeout(s.C),s.C=null)}function td(s,c){var d=null;if(s.g==c){Oa(s),$o(s),s.g=null;var m=2}else if(Bo(s.h,c))d=c.D,Mu(s.h,c),m=1;else return;if(s.G!=0){if(c.o)if(m==1){d=c.m?c.m.length:0,c=Date.now()-c.F;var x=s.B;m=Da(),$e(m,new Su(m,d)),Na(s)}else Zu(s);else if(x=c.s,x==3||x==0&&0<c.X||!(m==1&&Up(s,c)||m==2&&Wo(s)))switch(d&&0<d.length&&(c=s.h,c.i=c.i.concat(d)),x){case 1:er(s,5);break;case 4:er(s,10);break;case 3:er(s,6);break;default:er(s,2)}}}function rd(s,c){let d=s.Ta+Math.floor(Math.random()*s.cb);return s.isActive()||(d*=2),d*c}function er(s,c){if(s.j.info("Error code "+c),c==2){var d=_(s.fb,s),m=s.Xa;let x=!m;m=new Zt(m||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ca(m,"https"),Ya(m),x?Rp(m.toString(),d):Np(m.toString(),d)}else Ge(2);s.G=0,s.l&&s.l.sa(c),nd(s),Qu(s)}n.fb=function(s){s?(this.j.info("Successfully pinged google.com"),Ge(2)):(this.j.info("Failed to ping google.com"),Ge(1))};function nd(s){if(s.G=0,s.ka=[],s.l){let c=Fu(s.h);(c.length!=0||s.i.length!=0)&&(I(s.ka,c),I(s.ka,s.i),s.h.i.length=0,b(s.i),s.i.length=0),s.l.ra()}}function ad(s,c,d){var m=d instanceof Zt?xt(d):new Zt(d);if(m.g!="")c&&(m.g=c+"."+m.g),Aa(m,m.s);else{var x=l.location;m=x.protocol,c=c?c+"."+x.hostname:x.hostname,x=+x.port;var E=new Zt(null);m&&Ca(E,m),c&&(E.g=c),x&&Aa(E,x),d&&(E.l=d),m=E}return d=s.D,c=s.ya,d&&c&&De(m,d,c),De(m,"VER",s.la),Rn(s,m),m}function id(s,c,d){if(c&&!s.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=s.Ca&&!s.pa?new Ce(new An({eb:d})):new Ce(s.pa),c.Ha(s.J),c}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function od(){}n=od.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Va(){}Va.prototype.g=function(s,c){return new Xe(s,c)};function Xe(s,c){ze.call(this),this.g=new Gu(c),this.l=s,this.h=c&&c.messageUrlParams||null,s=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(s?s["X-Client-Protocol"]="webchannel":s={"X-Client-Protocol":"webchannel"}),this.g.o=s,s=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(s?s["X-WebChannel-Content-Type"]=c.messageContentType:s={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(s?s["X-WebChannel-Client-Profile"]=c.va:s={"X-WebChannel-Client-Profile":c.va}),this.g.S=s,(s=c&&c.Sb)&&!z(s)&&(this.g.m=s),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!z(c)&&(this.g.D=c,s=this.h,s!==null&&c in s&&(s=this.h,c in s&&delete s[c])),this.j=new Or(this)}D(Xe,ze),Xe.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Xe.prototype.close=function(){Ko(this.g)},Xe.prototype.o=function(s){var c=this.g;if(typeof s=="string"){var d={};d.__data__=s,s=d}else this.u&&(d={},d.__data__=Fo(s),s=d);c.i.push(new xp(c.Ya++,s)),c.G==3&&Na(c)},Xe.prototype.N=function(){this.g.l=null,delete this.j,Ko(this.g),delete this.g,Xe.aa.N.call(this)};function sd(s){No.call(this),s.__headers__&&(this.headers=s.__headers__,this.statusCode=s.__status__,delete s.__headers__,delete s.__status__);var c=s.__sm__;if(c){e:{for(let d in c){s=d;break e}s=void 0}(this.i=s)&&(s=this.i,c=c!==null&&s in c?c[s]:void 0),this.data=c}else this.data=s}D(sd,No);function ld(){Oo.call(this),this.status=1}D(ld,Oo);function Or(s){this.g=s}D(Or,od),Or.prototype.ua=function(){$e(this.g,"a")},Or.prototype.ta=function(s){$e(this.g,new sd(s))},Or.prototype.sa=function(s){$e(this.g,new ld)},Or.prototype.ra=function(){$e(this.g,"b")},Va.prototype.createWebChannel=Va.prototype.g,Xe.prototype.send=Xe.prototype.o,Xe.prototype.open=Xe.prototype.m,Xe.prototype.close=Xe.prototype.close,nl=Yt.createWebChannelTransport=function(){return new Va},rl=Yt.getStatEventTarget=function(){return Da()},tl=Yt.Event=Jt,Ui=Yt.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ea.NO_ERROR=0,Ea.TIMEOUT=8,Ea.HTTP_ERROR=6,ta=Yt.ErrorCode=Ea,ku.COMPLETE="complete",el=Yt.EventType=ku,_u.EventType=Sn,Sn.OPEN="a",Sn.CLOSE="b",Sn.ERROR="c",Sn.MESSAGE="d",ze.prototype.listen=ze.prototype.K,Jr=Yt.WebChannel=_u,Kv=Yt.FetchXmlHttpFactory=An,Ce.prototype.listenOnce=Ce.prototype.L,Ce.prototype.getLastError=Ce.prototype.Ka,Ce.prototype.getLastErrorCode=Ce.prototype.Ba,Ce.prototype.getStatus=Ce.prototype.Z,Ce.prototype.getResponseJson=Ce.prototype.Oa,Ce.prototype.getResponseText=Ce.prototype.oa,Ce.prototype.send=Ce.prototype.ea,Ce.prototype.setWithCredentials=Ce.prototype.Ha,Zs=Yt.XhrIo=Ce}).apply(typeof zi<"u"?zi:typeof self<"u"?self:typeof window<"u"?window:{});var bm="@firebase/firestore";var Ne=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ne.UNAUTHENTICATED=new Ne(null),Ne.GOOGLE_CREDENTIALS=new Ne("google-credentials-uid"),Ne.FIRST_PARTY=new Ne("first-party-uid"),Ne.MOCK_USER=new Ne("mock-user");var Tn="10.14.0";var wr=new Id("@firebase/firestore");function ra(){return wr.logLevel}function W(n,...e){if(wr.logLevel<=It.DEBUG){let t=e.map(zc);wr.debug(`Firestore (${Tn}): ${n}`,...t)}}function Ft(n,...e){if(wr.logLevel<=It.ERROR){let t=e.map(zc);wr.error(`Firestore (${Tn}): ${n}`,...t)}}function on(n,...e){if(wr.logLevel<=It.WARN){let t=e.map(zc);wr.warn(`Firestore (${Tn}): ${n}`,...t)}}function zc(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function ee(n="Unexpected state"){let e=`FIRESTORE (${Tn}) INTERNAL ASSERTION FAILED: `+n;throw Ft(e),new Error(e)}function ve(n,e){n||ee()}function re(n,e){return n}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Q=class extends Ed{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var vt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Wi=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},ll=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ne.UNAUTHENTICATED))}shutdown(){}},cl=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},ul=class{constructor(e){this.t=e,this.currentUser=Ne.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ve(this.o===void 0);let r=this.i,a=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),i=new vt;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new vt,e.enqueueRetryable(()=>a(this.currentUser))};let o=()=>{let u=i;e.enqueueRetryable(()=>B(this,null,function*(){yield u.promise,yield a(this.currentUser)}))},l=u=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?l(u):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new vt)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ve(typeof r.accessToken=="string"),new Wi(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string"),new Ne(e)}},dl=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Ne.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},hl=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new dl(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ne.FIRST_PARTY))}shutdown(){}invalidateToken(){}},ml=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},fl=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){ve(this.o===void 0);let r=i=>{i.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);let o=i.token!==this.R;return this.R=i.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};let a=i=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>a(i)),setTimeout(()=>{if(!this.appCheck){let i=this.A.getImmediate({optional:!0});i?a(i):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ve(typeof t.token=="string"),this.R=t.token,new ml(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Wv(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var $i=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let a=Wv(40);for(let i=0;i<a.length;++i)r.length<20&&a[i]<t&&(r+=e.charAt(a[i]%e.length))}return r}};function pe(n,e){return n<e?-1:n>e?1:0}function sn(n,e,t){return n.length===e.length&&n.every((r,a)=>t(r,e[a]))}var Ve=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Q(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Q(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Q(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?pe(this.nanoseconds,e.nanoseconds):pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ae=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Ve(0,0))}static max(){return new n(new Ve(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Gi=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ee(),r===void 0?r=e.length-t:r>e.length-t&&ee(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let a=0;a<r;a++){let i=e.get(a),o=t.get(a);if(i<o)return-1;if(i>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Ae=class n extends Gi{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new Q(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(a=>a.length>0))}return new n(t)}static emptyPath(){return new n([])}},$v=/^[_a-zA-Z][_a-zA-Z0-9]*$/,nt=class n extends Gi{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return $v.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",a=0,i=()=>{if(r.length===0)throw new Q(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;a<e.length;){let l=e[a];if(l==="\\"){if(a+1===e.length)throw new Q(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[a+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Q(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,a+=2}else l==="`"?(o=!o,a++):l!=="."||o?(r+=l,a++):(i(),a++)}if(i(),o)throw new Q(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var X=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ae.fromString(e))}static fromName(e){return new n(Ae.fromString(e).popFirst(5))}static empty(){return new n(Ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ae.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ae.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ae(e.slice()))}};var pl=class{constructor(e,t,r,a){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=a}};pl.UNKNOWN_ID=-1;function Gv(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,a=ae.fromTimestamp(r===1e9?new Ve(t+1,0):new Ve(t,r));return new Pr(a,X.empty(),e)}function Qv(n){return new Pr(n.readTime,n.key,-1)}var Pr=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ae.min(),X.empty(),-1)}static max(){return new n(ae.max(),X.empty(),-1)}};function Jv(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=X.comparator(n.documentKey,e.documentKey),t!==0?t:pe(n.largestBatchId,e.largestBatchId))}var Xv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",gl=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ta(n){return B(this,null,function*(){if(n.code!==M.FAILED_PRECONDITION||n.message!==Xv)throw n;W("LocalStore","Unexpectedly lost primary lease")})}var F=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ee(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,a)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,a)},this.catchCallback=i=>{this.wrapFailure(t,i).next(r,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let a=0,i=0,o=!1;e.forEach(l=>{++a,l.next(()=>{++i,o&&i===a&&t()},u=>r(u))}),o=!0,i===a&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(a=>a?n.resolve(a):r());return t}static forEach(e,t){let r=[];return e.forEach((a,i)=>{r.push(t.call(this,a,i))}),this.waitFor(r)}static mapArray(e,t){return new n((r,a)=>{let i=e.length,o=new Array(i),l=0;for(let u=0;u<i;u++){let h=u;t(e[h]).next(f=>{o[h]=f,++l,l===i&&r(o)},f=>a(f))}})}static doWhile(e,t){return new n((r,a)=>{let i=()=>{e()===!0?t().next(()=>{i()},a):r()};i()})}};function Zv(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function wa(n){return n.name==="IndexedDbTransactionError"}var of=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=a=>this.ie(a),this.se=a=>r.writeSequenceNumber(a))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function So(n){return n==null}function la(n){return n===0&&1/n==-1/0}function e_(n){return typeof n=="number"&&Number.isInteger(n)&&!la(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var t_=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],sF=[...t_,"documentOverlays"],r_=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],n_=r_,a_=[...n_,"indexConfiguration","indexState","indexEntries"];var lF=[...a_,"globals"];function Im(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ir(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function sf(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ye=class n{constructor(e,t){this.comparator=e,this.root=t||_t.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,_t.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_t.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new tn(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new tn(this.root,e,this.comparator,!1)}getReverseIterator(){return new tn(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new tn(this.root,e,this.comparator,!0)}},tn=class{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?r(e.key,t):1,t&&a&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},_t=class n{constructor(e,t,r,a,i){this.key=e,this.value=t,this.color=r??n.RED,this.left=a??n.EMPTY,this.right=i??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,i){return new n(e??this.key,t??this.value,r??this.color,a??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this,i=r(e,a.key);return a=i<0?a.copy(null,null,null,a.left.insert(e,t,r),null):i===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return n.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ee();let e=this.left.check();if(e!==this.right.check())throw ee();return e+(this.isRed()?0:1)}};_t.EMPTY=null,_t.RED=!0,_t.BLACK=!1;_t.EMPTY=new class{constructor(){this.size=0}get key(){throw ee()}get value(){throw ee()}get color(){throw ee()}get left(){throw ee()}get right(){throw ee()}copy(e,t,r,a,i){return this}insert(e,t,r){return new _t(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ke=class n{constructor(e){this.comparator=e,this.data=new Ye(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Qi(this.data.getIterator())}getIteratorFrom(e){return new Qi(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let a=t.getNext().key,i=r.getNext().key;if(this.comparator(a,i)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Qi=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var lt=class n{constructor(e){this.fields=e,e.sort(nt.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ke(nt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return sn(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Ji=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var We=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(a){try{return atob(a)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Ji("Invalid base64 string: "+i):i}}(e);return new n(t)}static fromUint8Array(e){let t=function(a){let i="";for(let o=0;o<a.length;++o)i+=String.fromCharCode(a[o]);return i}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};We.EMPTY_BYTE_STRING=new We("");var i_=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rt(n){if(ve(!!n),typeof n=="string"){let e=0,t=i_.exec(n);if(ve(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ee(n.seconds),nanos:Ee(n.nanos)}}function Ee(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Wt(n){return typeof n=="string"?We.fromBase64String(n):We.fromUint8Array(n)}function Uc(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Bc(n){let e=n.mapValue.fields.__previous_value__;return Uc(e)?Bc(e):e}function ca(n){let e=Rt(n.mapValue.fields.__local_write_time__.timestampValue);return new Ve(e.seconds,e.nanos)}var yl=class{constructor(e,t,r,a,i,o,l,u,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h}},Xi=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Bi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Sr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Uc(n)?4:cf(n)?9007199254740991:lf(n)?10:11:ee()}function Pt(n,e){if(n===e)return!0;let t=Sr(n);if(t!==Sr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ca(n).isEqual(ca(e));case 3:return function(a,i){if(typeof a.timestampValue=="string"&&typeof i.timestampValue=="string"&&a.timestampValue.length===i.timestampValue.length)return a.timestampValue===i.timestampValue;let o=Rt(a.timestampValue),l=Rt(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(a,i){return Wt(a.bytesValue).isEqual(Wt(i.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(a,i){return Ee(a.geoPointValue.latitude)===Ee(i.geoPointValue.latitude)&&Ee(a.geoPointValue.longitude)===Ee(i.geoPointValue.longitude)}(n,e);case 2:return function(a,i){if("integerValue"in a&&"integerValue"in i)return Ee(a.integerValue)===Ee(i.integerValue);if("doubleValue"in a&&"doubleValue"in i){let o=Ee(a.doubleValue),l=Ee(i.doubleValue);return o===l?la(o)===la(l):isNaN(o)&&isNaN(l)}return!1}(n,e);case 9:return sn(n.arrayValue.values||[],e.arrayValue.values||[],Pt);case 10:case 11:return function(a,i){let o=a.mapValue.fields||{},l=i.mapValue.fields||{};if(Im(o)!==Im(l))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!Pt(o[u],l[u])))return!1;return!0}(n,e);default:return ee()}}function ua(n,e){return(n.values||[]).find(t=>Pt(t,e))!==void 0}function ln(n,e){if(n===e)return 0;let t=Sr(n),r=Sr(e);if(t!==r)return pe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return pe(n.booleanValue,e.booleanValue);case 2:return function(i,o){let l=Ee(i.integerValue||i.doubleValue),u=Ee(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(n,e);case 3:return Cm(n.timestampValue,e.timestampValue);case 4:return Cm(ca(n),ca(e));case 5:return pe(n.stringValue,e.stringValue);case 6:return function(i,o){let l=Wt(i),u=Wt(o);return l.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(i,o){let l=i.split("/"),u=o.split("/");for(let h=0;h<l.length&&h<u.length;h++){let f=pe(l[h],u[h]);if(f!==0)return f}return pe(l.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,o){let l=pe(Ee(i.latitude),Ee(o.latitude));return l!==0?l:pe(Ee(i.longitude),Ee(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Am(n.arrayValue,e.arrayValue);case 10:return function(i,o){var l,u,h,f;let g=i.fields||{},_=o.fields||{},S=(l=g.value)===null||l===void 0?void 0:l.arrayValue,D=(u=_.value)===null||u===void 0?void 0:u.arrayValue,b=pe(((h=S?.values)===null||h===void 0?void 0:h.length)||0,((f=D?.values)===null||f===void 0?void 0:f.length)||0);return b!==0?b:Am(S,D)}(n.mapValue,e.mapValue);case 11:return function(i,o){if(i===Bi.mapValue&&o===Bi.mapValue)return 0;if(i===Bi.mapValue)return 1;if(o===Bi.mapValue)return-1;let l=i.fields||{},u=Object.keys(l),h=o.fields||{},f=Object.keys(h);u.sort(),f.sort();for(let g=0;g<u.length&&g<f.length;++g){let _=pe(u[g],f[g]);if(_!==0)return _;let S=ln(l[u[g]],h[f[g]]);if(S!==0)return S}return pe(u.length,f.length)}(n.mapValue,e.mapValue);default:throw ee()}}function Cm(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return pe(n,e);let t=Rt(n),r=Rt(e),a=pe(t.seconds,r.seconds);return a!==0?a:pe(t.nanos,r.nanos)}function Am(n,e){let t=n.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){let i=ln(t[a],r[a]);if(i)return i}return pe(t.length,r.length)}function cn(n){return vl(n)}function vl(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Rt(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Wt(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return X.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",a=!0;for(let i of t.values||[])a?a=!1:r+=",",r+=vl(i);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),a="{",i=!0;for(let o of r)i?i=!1:a+=",",a+=`${o}:${vl(t.fields[o])}`;return a+"}"}(n.mapValue):ee()}function _l(n){return!!n&&"integerValue"in n}function qc(n){return!!n&&"arrayValue"in n}function Ym(n){return!!n&&"nullValue"in n}function Mm(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Hi(n){return!!n&&"mapValue"in n}function lf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function aa(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Ir(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=aa(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=aa(n.arrayValue.values[t]);return e}return Object.assign({},n)}function cf(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var rt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Hi(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=aa(t)}setAll(e){let t=nt.emptyPath(),r={},a=[];e.forEach((o,l)=>{if(!t.isImmediateParentOf(l)){let u=this.getFieldsMap(t);this.applyChanges(u,r,a),r={},a=[],t=l.popLast()}o?r[l.lastSegment()]=aa(o):a.push(l.lastSegment())});let i=this.getFieldsMap(t);this.applyChanges(i,r,a)}delete(e){let t=this.field(e.popLast());Hi(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Pt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];Hi(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){Ir(t,(a,i)=>e[a]=i);for(let a of r)delete e[a]}clone(){return new n(aa(this.value))}};function uf(n){let e=[];return Ir(n.fields,(t,r)=>{let a=new nt([t]);if(Hi(r)){let i=uf(r.mapValue).fields;if(i.length===0)e.push(a);else for(let o of i)e.push(a.child(o))}else e.push(a)}),new lt(e)}var mt=class n{constructor(e,t,r,a,i,o,l){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new n(e,0,ae.min(),ae.min(),ae.min(),rt.empty(),0)}static newFoundDocument(e,t,r,a){return new n(e,1,t,ae.min(),r,a,0)}static newNoDocument(e,t){return new n(e,2,t,ae.min(),ae.min(),rt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ae.min(),ae.min(),rt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var un=class{constructor(e,t){this.position=e,this.inclusive=t}};function Fm(n,e,t){let r=0;for(let a=0;a<n.position.length;a++){let i=e[a],o=n.position[a];if(i.field.isKeyField()?r=X.comparator(X.fromName(o.referenceValue),t.key):r=ln(o,t.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Rm(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Pt(n.position[t],e.position[t]))return!1;return!0}var dn=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function o_(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Zi=class{},Re=class n extends Zi{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new wl(e,t,r):t==="array-contains"?new kl(e,r):t==="in"?new xl(e,r):t==="not-in"?new Dl(e,r):t==="array-contains-any"?new El(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Pl(e,r):new Sl(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(ln(t,this.value)):t!==null&&Sr(this.value)===Sr(t)&&this.matchesComparison(ln(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ee()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},St=class n extends Zi{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return df(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function df(n){return n.op==="and"}function hf(n){return s_(n)&&df(n)}function s_(n){for(let e of n.filters)if(e instanceof St)return!1;return!0}function Tl(n){if(n instanceof Re)return n.field.canonicalString()+n.op.toString()+cn(n.value);if(hf(n))return n.filters.map(e=>Tl(e)).join(",");{let e=n.filters.map(t=>Tl(t)).join(",");return`${n.op}(${e})`}}function mf(n,e){return n instanceof Re?function(r,a){return a instanceof Re&&r.op===a.op&&r.field.isEqual(a.field)&&Pt(r.value,a.value)}(n,e):n instanceof St?function(r,a){return a instanceof St&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce((i,o,l)=>i&&mf(o,a.filters[l]),!0):!1}(n,e):void ee()}function ff(n){return n instanceof Re?function(t){return`${t.field.canonicalString()} ${t.op} ${cn(t.value)}`}(n):n instanceof St?function(t){return t.op.toString()+" {"+t.getFilters().map(ff).join(" ,")+"}"}(n):"Filter"}var wl=class extends Re{constructor(e,t,r){super(e,t,r),this.key=X.fromName(r.referenceValue)}matches(e){let t=X.comparator(e.key,this.key);return this.matchesComparison(t)}},Pl=class extends Re{constructor(e,t){super(e,"in",t),this.keys=pf("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Sl=class extends Re{constructor(e,t){super(e,"not-in",t),this.keys=pf("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function pf(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>X.fromName(r.referenceValue))}var kl=class extends Re{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return qc(t)&&ua(t.arrayValue,this.value)}},xl=class extends Re{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&ua(this.value.arrayValue,t)}},Dl=class extends Re{constructor(e,t){super(e,"not-in",t)}matches(e){if(ua(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!ua(this.value.arrayValue,t)}},El=class extends Re{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!qc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ua(this.value.arrayValue,r))}};var bl=class{constructor(e,t=null,r=[],a=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=i,this.startAt=o,this.endAt=l,this.ue=null}};function Nm(n,e=null,t=[],r=[],a=null,i=null,o=null){return new bl(n,e,t,r,a,i,o)}function Hc(n){let e=re(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Tl(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),So(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>cn(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>cn(r)).join(",")),e.ue=t}return e.ue}function Kc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!o_(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!mf(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Rm(n.startAt,e.startAt)&&Rm(n.endAt,e.endAt)}function Il(n){return X.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var hn=class{constructor(e,t=null,r=[],a=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function l_(n,e,t,r,a,i,o,l){return new hn(n,e,t,r,a,i,o,l)}function gf(n){return new hn(n)}function Om(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function c_(n){return n.collectionGroup!==null}function ia(n){let e=re(n);if(e.ce===null){e.ce=[];let t=new Set;for(let i of e.explicitOrderBy)e.ce.push(i),t.add(i.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Ke(nt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(i=>{t.has(i.canonicalString())||i.isKeyField()||e.ce.push(new dn(i,r))}),t.has(nt.keyField().canonicalString())||e.ce.push(new dn(nt.keyField(),r))}return e.ce}function Tt(n){let e=re(n);return e.le||(e.le=u_(e,ia(n))),e.le}function u_(n,e){if(n.limitType==="F")return Nm(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(a=>{let i=a.dir==="desc"?"asc":"desc";return new dn(a.field,i)});let t=n.endAt?new un(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new un(n.startAt.position,n.startAt.inclusive):null;return Nm(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Cl(n,e,t){return new hn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ko(n,e){return Kc(Tt(n),Tt(e))&&n.limitType===e.limitType}function yf(n){return`${Hc(Tt(n))}|lt:${n.limitType}`}function Xr(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(a=>ff(a)).join(", ")}]`),So(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(a=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(a)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(a=>cn(a)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(a=>cn(a)).join(",")),`Target(${r})`}(Tt(n))}; limitType=${n.limitType})`}function xo(n,e){return e.isFoundDocument()&&function(r,a){let i=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):X.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(n,e)&&function(r,a){for(let i of ia(r))if(!i.field.isKeyField()&&a.data.field(i.field)===null)return!1;return!0}(n,e)&&function(r,a){for(let i of r.filters)if(!i.matches(a))return!1;return!0}(n,e)&&function(r,a){return!(r.startAt&&!function(o,l,u){let h=Fm(o,l,u);return o.inclusive?h<=0:h<0}(r.startAt,ia(r),a)||r.endAt&&!function(o,l,u){let h=Fm(o,l,u);return o.inclusive?h>=0:h>0}(r.endAt,ia(r),a))}(n,e)}function d_(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function vf(n){return(e,t)=>{let r=!1;for(let a of ia(n)){let i=h_(a,e,t);if(i!==0)return i;r=r||a.field.isKeyField()}return 0}}function h_(n,e,t){let r=n.field.isKeyField()?X.comparator(e.key,t.key):function(i,o,l){let u=o.data.field(i),h=l.data.field(i);return u!==null&&h!==null?ln(u,h):ee()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ee()}}var $t=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[a,i]of r)if(this.equalsFn(a,e))return i}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let i=0;i<a.length;i++)if(this.equalsFn(a[i][0],e))return void(a[i]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ir(this.inner,(t,r)=>{for(let[a,i]of r)e(a,i)})}isEmpty(){return sf(this.inner)}size(){return this.innerSize}};var m_=new Ye(X.comparator);function Nt(){return m_}var _f=new Ye(X.comparator);function na(...n){let e=_f;for(let t of n)e=e.insert(t.key,t);return e}function Tf(n){let e=_f;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function _r(){return oa()}function wf(){return oa()}function oa(){return new $t(n=>n.toString(),(n,e)=>n.isEqual(e))}var f_=new Ye(X.comparator),p_=new Ke(X.comparator);function le(...n){let e=p_;for(let t of n)e=e.add(t);return e}var g_=new Ke(pe);function y_(){return g_}function Wc(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:la(e)?"-0":e}}function Pf(n){return{integerValue:""+n}}function v_(n,e){return e_(e)?Pf(e):Wc(n,e)}var mn=class{constructor(){this._=void 0}};function __(n,e,t){return n instanceof fn?function(a,i){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return i&&Uc(i)&&(i=Bc(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(t,e):n instanceof kr?kf(n,e):n instanceof xr?xf(n,e):function(a,i){let o=Sf(a,i),l=Vm(o)+Vm(a.Pe);return _l(o)&&_l(a.Pe)?Pf(l):Wc(a.serializer,l)}(n,e)}function T_(n,e,t){return n instanceof kr?kf(n,e):n instanceof xr?xf(n,e):t}function Sf(n,e){return n instanceof pn?function(r){return _l(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}var fn=class extends mn{},kr=class extends mn{constructor(e){super(),this.elements=e}};function kf(n,e){let t=Df(e);for(let r of n.elements)t.some(a=>Pt(a,r))||t.push(r);return{arrayValue:{values:t}}}var xr=class extends mn{constructor(e){super(),this.elements=e}};function xf(n,e){let t=Df(e);for(let r of n.elements)t=t.filter(a=>!Pt(a,r));return{arrayValue:{values:t}}}var pn=class extends mn{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function Vm(n){return Ee(n.integerValue||n.doubleValue)}function Df(n){return qc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function w_(n,e){return n.field.isEqual(e.field)&&function(r,a){return r instanceof kr&&a instanceof kr||r instanceof xr&&a instanceof xr?sn(r.elements,a.elements,Pt):r instanceof pn&&a instanceof pn?Pt(r.Pe,a.Pe):r instanceof fn&&a instanceof fn}(n.transform,e.transform)}var Al=class{constructor(e,t){this.version=e,this.transformResults=t}},Mt=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Ki(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var gn=class{};function Ef(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new da(n.key,Mt.none()):new Dr(n.key,n.data,Mt.none());{let t=n.data,r=rt.empty(),a=new Ke(nt.comparator);for(let i of e.fields)if(!a.has(i)){let o=t.field(i);o===null&&i.length>1&&(i=i.popLast(),o=t.field(i)),o===null?r.delete(i):r.set(i,o),a=a.add(i)}return new kt(n.key,r,new lt(a.toArray()),Mt.none())}}function P_(n,e,t){n instanceof Dr?function(a,i,o){let l=a.value.clone(),u=jm(a.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):n instanceof kt?function(a,i,o){if(!Ki(a.precondition,i))return void i.convertToUnknownDocument(o.version);let l=jm(a.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(bf(a)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):function(a,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function sa(n,e,t,r){return n instanceof Dr?function(i,o,l,u){if(!Ki(i.precondition,o))return l;let h=i.value.clone(),f=zm(i.fieldTransforms,u,o);return h.setAll(f),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(n,e,t,r):n instanceof kt?function(i,o,l,u){if(!Ki(i.precondition,o))return l;let h=zm(i.fieldTransforms,u,o),f=o.data;return f.setAll(bf(i)),f.setAll(h),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(g=>g.field))}(n,e,t,r):function(i,o,l){return Ki(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(n,e,t)}function S_(n,e){let t=null;for(let r of n.fieldTransforms){let a=e.data.field(r.field),i=Sf(r.transform,a||null);i!=null&&(t===null&&(t=rt.empty()),t.set(r.field,i))}return t||null}function Lm(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&sn(r,a,(i,o)=>w_(i,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Dr=class extends gn{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}},kt=class extends gn{constructor(e,t,r,a,i=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}};function bf(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function jm(n,e,t){let r=new Map;ve(n.length===t.length);for(let a=0;a<t.length;a++){let i=n[a],o=i.transform,l=e.data.field(i.field);r.set(i.field,T_(o,l,t[a]))}return r}function zm(n,e,t){let r=new Map;for(let a of n){let i=a.transform,o=t.data.field(a.field);r.set(a.field,__(i,o,e))}return r}var da=class extends gn{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Yl=class extends gn{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Ml=class{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){let i=this.mutations[a];i.key.isEqual(e.key)&&P_(i,e,r[a])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=sa(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=sa(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=wf();return this.mutations.forEach(a=>{let i=e.get(a.key),o=i.overlayedDocument,l=this.applyToLocalView(o,i.mutatedFields);l=t.has(a.key)?null:l;let u=Ef(o,l);u!==null&&r.set(a.key,u),o.isValidDocument()||o.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),le())}isEqual(e){return this.batchId===e.batchId&&sn(this.mutations,e.mutations,(t,r)=>Lm(t,r))&&sn(this.baseMutations,e.baseMutations,(t,r)=>Lm(t,r))}},Fl=class n{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){ve(e.mutations.length===r.length);let a=function(){return f_}(),i=e.mutations;for(let o=0;o<i.length;o++)a=a.insert(i[o].key,r[o].version);return new n(e,t,r,a)}};var Rl=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Nl=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Me,de;function k_(n){switch(n){default:return ee();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function If(n){if(n===void 0)return Ft("GRPC error has no .code"),M.UNKNOWN;switch(n){case Me.OK:return M.OK;case Me.CANCELLED:return M.CANCELLED;case Me.UNKNOWN:return M.UNKNOWN;case Me.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Me.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Me.INTERNAL:return M.INTERNAL;case Me.UNAVAILABLE:return M.UNAVAILABLE;case Me.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Me.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Me.NOT_FOUND:return M.NOT_FOUND;case Me.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Me.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Me.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Me.ABORTED:return M.ABORTED;case Me.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Me.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Me.DATA_LOSS:return M.DATA_LOSS;default:return ee()}}(de=Me||(Me={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";var Um=null;function x_(){return new TextEncoder}var D_=new Ht([4294967295,4294967295],0);function Bm(n){let e=x_().encode(n),t=new Xs;return t.update(e),new Uint8Array(t.digest())}function qm(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ht([t,r],0),new Ht([a,i],0)]}var Ol=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Tr(`Invalid padding: ${t}`);if(r<0)throw new Tr(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Tr(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Tr(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Ht.fromNumber(this.Ie)}Ee(e,t,r){let a=e.add(t.multiply(Ht.fromNumber(r)));return a.compare(D_)===1&&(a=new Ht([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=Bm(e),[r,a]=qm(t);for(let i=0;i<this.hashCount;i++){let o=this.Ee(r,a,i);if(!this.de(o))return!1}return!0}static create(e,t,r){let a=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new n(i,a,t);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;let t=Bm(e),[r,a]=qm(t);for(let i=0;i<this.hashCount;i++){let o=this.Ee(r,a,i);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Tr=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var eo=class n{constructor(e,t,r,a,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let a=new Map;return a.set(e,ha.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ae.min(),a,new Ye(pe),Nt(),le())}},ha=class n{constructor(e,t,r,a,i){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,le(),le(),le())}};var nn=class{constructor(e,t,r,a){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=a}},to=class{constructor(e,t){this.targetId=e,this.me=t}},ro=class{constructor(e,t,r=We.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}},no=class{constructor(){this.fe=0,this.ge=Km(),this.pe=We.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=le(),t=le(),r=le();return this.ge.forEach((a,i)=>{switch(i){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:ee()}}),new ha(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=Km()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ve(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Vl=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Nt(),this.qe=Hm(),this.Qe=new Ye(pe)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:ee()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,a)=>{this.ze(a)&&t(a)})}He(e){let t=e.targetId,r=e.me.count,a=this.Je(t);if(a){let i=a.target;if(Il(i))if(r===0){let o=new X(i.path);this.Ue(t,o,mt.newNoDocument(o,ae.min()))}else ve(r===1);else{let o=this.Ye(t);if(o!==r){let l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(t);let h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,h)}Um?.et(function(f,g,_,S,D){var b,I,V,z,$,Z;let xe={localCacheCount:f,existenceFilterCount:g.count,databaseId:_.database,projectId:_.projectId},J=g.unchangedNames;return J&&(xe.bloomFilter={applied:D===0,hashCount:(b=J?.hashCount)!==null&&b!==void 0?b:0,bitmapLength:(z=(V=(I=J?.bits)===null||I===void 0?void 0:I.bitmap)===null||V===void 0?void 0:V.length)!==null&&z!==void 0?z:0,padding:(Z=($=J?.bits)===null||$===void 0?void 0:$.padding)!==null&&Z!==void 0?Z:0,mightContain:T=>{var p;return(p=S?.mightContain(T))!==null&&p!==void 0&&p}}),xe}(o,e.me,this.Le.tt(),l,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:a=0},hashCount:i=0}=t,o,l;try{o=Wt(r).toUint8Array()}catch(u){if(u instanceof Ji)return on("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Ol(o,a,i)}catch(u){return on(u instanceof Tr?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),a=0;return r.forEach(i=>{let o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(t,i,null),a++)}),a}rt(e){let t=new Map;this.Be.forEach((i,o)=>{let l=this.Je(o);if(l){if(i.current&&Il(l.target)){let u=new X(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,mt.newNoDocument(u,e))}i.be&&(t.set(o,i.ve()),i.Ce())}});let r=le();this.qe.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{let h=this.Je(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));let a=new eo(e,t,this.Qe,this.ke,r);return this.ke=Nt(),this.qe=Hm(),this.Qe=new Ye(pe),a}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let a=this.Ge(e);this.it(e,t)?a.Fe(t,1):a.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new no,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ke(pe),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||W("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new no),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function Hm(){return new Ye(X.comparator)}function Km(){return new Ye(X.comparator)}var E_={asc:"ASCENDING",desc:"DESCENDING"},b_={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},I_={and:"AND",or:"OR"},Ll=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function jl(n,e){return n.useProto3Json||So(e)?e:{value:e}}function ao(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Cf(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function C_(n,e){return ao(n,e.toTimestamp())}function wt(n){return ve(!!n),ae.fromTimestamp(function(t){let r=Rt(t);return new Ve(r.seconds,r.nanos)}(n))}function $c(n,e){return zl(n,e).canonicalString()}function zl(n,e){let t=function(a){return new Ae(["projects",a.projectId,"databases",a.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Af(n){let e=Ae.fromString(n);return ve(Nf(e)),e}function Ul(n,e){return $c(n.databaseId,e.path)}function al(n,e){let t=Af(e);if(t.get(1)!==n.databaseId.projectId)throw new Q(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Q(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new X(Mf(t))}function Yf(n,e){return $c(n.databaseId,e)}function A_(n){let e=Af(n);return e.length===4?Ae.emptyPath():Mf(e)}function Bl(n){return new Ae(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Mf(n){return ve(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Wm(n,e,t){return{name:Ul(n,e),fields:t.value.mapValue.fields}}function Y_(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ee()}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],i=function(h,f){return h.useProto3Json?(ve(f===void 0||typeof f=="string"),We.fromBase64String(f||"")):(ve(f===void 0||f instanceof Buffer||f instanceof Uint8Array),We.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){let f=h.code===void 0?M.UNKNOWN:If(h.code);return new Q(f,h.message||"")}(o);t=new ro(r,a,i,l||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let a=al(n,r.document.name),i=wt(r.document.updateTime),o=r.document.createTime?wt(r.document.createTime):ae.min(),l=new rt({mapValue:{fields:r.document.fields}}),u=mt.newFoundDocument(a,i,o,l),h=r.targetIds||[],f=r.removedTargetIds||[];t=new nn(h,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let a=al(n,r.document),i=r.readTime?wt(r.readTime):ae.min(),o=mt.newNoDocument(a,i),l=r.removedTargetIds||[];t=new nn([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let a=al(n,r.document),i=r.removedTargetIds||[];t=new nn([],i,a,null)}else{if(!("filter"in e))return ee();{e.filter;let r=e.filter;r.targetId;let{count:a=0,unchangedNames:i}=r,o=new Nl(a,i),l=r.targetId;t=new to(l,o)}}return t}function M_(n,e){let t;if(e instanceof Dr)t={update:Wm(n,e.key,e.value)};else if(e instanceof da)t={delete:Ul(n,e.key)};else if(e instanceof kt)t={update:Wm(n,e.key,e.data),updateMask:U_(e.fieldMask)};else{if(!(e instanceof Yl))return ee();t={verify:Ul(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,o){let l=o.transform;if(l instanceof fn)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof kr)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof xr)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof pn)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw ee()}(0,r))),e.precondition.isNone||(t.currentDocument=function(a,i){return i.updateTime!==void 0?{updateTime:C_(a,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ee()}(n,e.precondition)),t}function F_(n,e){return n&&n.length>0?(ve(e!==void 0),n.map(t=>function(a,i){let o=a.updateTime?wt(a.updateTime):wt(i);return o.isEqual(ae.min())&&(o=wt(i)),new Al(o,a.transformResults||[])}(t,e))):[]}function R_(n,e){return{documents:[Yf(n,e.path)]}}function N_(n,e){let t={structuredQuery:{}},r=e.path,a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Yf(n,a);let i=function(h){if(h.length!==0)return Rf(St.create(h,"and"))}(e.filters);i&&(t.structuredQuery.where=i);let o=function(h){if(h.length!==0)return h.map(f=>function(_){return{field:Zr(_.field),direction:L_(_.dir)}}(f))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let l=jl(n,e.limit);return l!==null&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:t,parent:a}}function O_(n){let e=A_(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,a=null;if(r>0){ve(r===1);let f=t.from[0];f.allDescendants?a=f.collectionId:e=e.child(f.collectionId)}let i=[];t.where&&(i=function(g){let _=Ff(g);return _ instanceof St&&hf(_)?_.getFilters():[_]}(t.where));let o=[];t.orderBy&&(o=function(g){return g.map(_=>function(D){return new dn(en(D.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(_))}(t.orderBy));let l=null;t.limit&&(l=function(g){let _;return _=typeof g=="object"?g.value:g,So(_)?null:_}(t.limit));let u=null;t.startAt&&(u=function(g){let _=!!g.before,S=g.values||[];return new un(S,_)}(t.startAt));let h=null;return t.endAt&&(h=function(g){let _=!g.before,S=g.values||[];return new un(S,_)}(t.endAt)),l_(e,a,o,i,l,"F",u,h)}function V_(n,e){let t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ee()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Ff(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=en(t.unaryFilter.field);return Re.create(r,"==",{doubleValue:NaN});case"IS_NULL":let a=en(t.unaryFilter.field);return Re.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let i=en(t.unaryFilter.field);return Re.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=en(t.unaryFilter.field);return Re.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ee()}}(n):n.fieldFilter!==void 0?function(t){return Re.create(en(t.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ee()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return St.create(t.compositeFilter.filters.map(r=>Ff(r)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return ee()}}(t.compositeFilter.op))}(n):ee()}function L_(n){return E_[n]}function j_(n){return b_[n]}function z_(n){return I_[n]}function Zr(n){return{fieldPath:n.canonicalString()}}function en(n){return nt.fromServerFormat(n.fieldPath)}function Rf(n){return n instanceof Re?function(t){if(t.op==="=="){if(Mm(t.value))return{unaryFilter:{field:Zr(t.field),op:"IS_NAN"}};if(Ym(t.value))return{unaryFilter:{field:Zr(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Mm(t.value))return{unaryFilter:{field:Zr(t.field),op:"IS_NOT_NAN"}};if(Ym(t.value))return{unaryFilter:{field:Zr(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zr(t.field),op:j_(t.op),value:t.value}}}(n):n instanceof St?function(t){let r=t.getFilters().map(a=>Rf(a));return r.length===1?r[0]:{compositeFilter:{op:z_(t.op),filters:r}}}(n):ee()}function U_(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Nf(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var ma=class n{constructor(e,t,r,a,i=ae.min(),o=ae.min(),l=We.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var ql=class{constructor(e){this.ct=e}};function B_(n){let e=O_({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Cl(e,e.limit,"L"):e}var io=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Ee(e.integerValue));else if("doubleValue"in e){let r=Ee(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),la(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Rt(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Wt(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?cf(e)?this.dt(t,Number.MAX_SAFE_INTEGER):lf(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):ee()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let a of Object.keys(r))this.Vt(a,t),this.Tt(r[a],t)}wt(e,t){var r,a;let i=e.fields||{};this.dt(t,53);let o="value",l=((a=(r=i[o].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.length)||0;this.dt(t,15),t.At(Ee(l)),this.Vt(o,t),this.Tt(i[o],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let a of r)this.Tt(a,t)}yt(e,t){this.dt(t,37),X.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};io.vt=new io;var Hl=class{constructor(){this.un=new Kl}addToCollectionParentIndex(e,t){return this.un.add(t),F.resolve()}getCollectionParents(e,t){return F.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return F.resolve()}deleteFieldIndex(e,t){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,t){return F.resolve()}getDocumentsMatchingTarget(e,t){return F.resolve(null)}getIndexType(e,t){return F.resolve(0)}getFieldIndexes(e,t){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,t){return F.resolve(Pr.min())}getMinOffsetFromCollectionGroup(e,t){return F.resolve(Pr.min())}updateCollectionGroup(e,t,r){return F.resolve()}updateIndexEntries(e,t){return F.resolve()}},Kl=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new Ke(Ae.comparator),i=!a.has(r);return this.index[t]=a.add(r),i}has(e){let t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new Ke(Ae.comparator)).toArray()}};var uF=new Uint8Array(0);var yt=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};yt.DEFAULT_COLLECTION_PERCENTILE=10,yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yt.DEFAULT=new yt(41943040,yt.DEFAULT_COLLECTION_PERCENTILE,yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yt.DISABLED=new yt(-1,0,0);var fa=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var Wl=class{constructor(){this.changes=new $t(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,mt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?F.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var $l=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Gl=class{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(r=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(r!==null&&sa(r.mutation,a,lt.empty(),Ve.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,le()).next(()=>r))}getLocalViewOfDocuments(e,t,r=le()){let a=_r();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,r).next(i=>{let o=na();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=_r();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,le()))}populateOverlays(e,t,r){let a=[];return r.forEach(i=>{t.has(i)||a.push(i)}),this.documentOverlayCache.getOverlays(e,a).next(i=>{i.forEach((o,l)=>{t.set(o,l)})})}computeViews(e,t,r,a){let i=Nt(),o=oa(),l=function(){return oa()}();return t.forEach((u,h)=>{let f=r.get(h.key);a.has(h.key)&&(f===void 0||f.mutation instanceof kt)?i=i.insert(h.key,h):f!==void 0?(o.set(h.key,f.mutation.getFieldMask()),sa(f.mutation,h,f.mutation.getFieldMask(),Ve.now())):o.set(h.key,lt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((h,f)=>o.set(h,f)),t.forEach((h,f)=>{var g;return l.set(h,new $l(f,(g=o.get(h))!==null&&g!==void 0?g:null))}),l))}recalculateAndSaveOverlays(e,t){let r=oa(),a=new Ye((o,l)=>o-l),i=le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let l of o)l.keys().forEach(u=>{let h=t.get(u);if(h===null)return;let f=r.get(u)||lt.empty();f=l.applyToLocalView(h,f),r.set(u,f);let g=(a.get(l.batchId)||le()).add(u);a=a.insert(l.batchId,g)})}).next(()=>{let o=[],l=a.getReverseIterator();for(;l.hasNext();){let u=l.getNext(),h=u.key,f=u.value,g=wf();f.forEach(_=>{if(!i.has(_)){let S=Ef(t.get(_),r.get(_));S!==null&&g.set(_,S),i=i.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,g))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,a){return function(o){return X.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):c_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next(i=>{let o=a-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-i.size):F.resolve(_r()),l=-1,u=i;return o.next(h=>F.forEach(h,(f,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),i.get(f)?F.resolve():this.remoteDocumentCache.getEntry(e,f).next(_=>{u=u.insert(f,_)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,u,h,le())).next(f=>({batchId:l,changes:Tf(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new X(t)).next(r=>{let a=na();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){let i=t.collectionGroup,o=na();return this.indexManager.getCollectionParents(e,i).next(l=>F.forEach(l,u=>{let h=function(g,_){return new hn(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(t,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,a).next(f=>{f.forEach((g,_)=>{o=o.insert(g,_)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,a){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i,a))).next(o=>{i.forEach((u,h)=>{let f=h.getKey();o.get(f)===null&&(o=o.insert(f,mt.newInvalidDocument(f)))});let l=na();return o.forEach((u,h)=>{let f=i.get(u);f!==void 0&&sa(f.mutation,h,lt.empty(),Ve.now()),xo(t,h)&&(l=l.insert(u,h))}),l})}};var Ql=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return F.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(a){return{id:a.id,version:a.version,createTime:wt(a.createTime)}}(t)),F.resolve()}getNamedQuery(e,t){return F.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(a){return{name:a.name,query:B_(a.bundledQuery),readTime:wt(a.readTime)}}(t)),F.resolve()}};var Jl=class{constructor(){this.overlays=new Ye(X.comparator),this.Ir=new Map}getOverlay(e,t){return F.resolve(this.overlays.get(t))}getOverlays(e,t){let r=_r();return F.forEach(t,a=>this.getOverlay(e,a).next(i=>{i!==null&&r.set(a,i)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((a,i)=>{this.ht(e,t,i)}),F.resolve()}removeOverlaysForBatchId(e,t,r){let a=this.Ir.get(r);return a!==void 0&&(a.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),F.resolve()}getOverlaysForCollection(e,t,r){let a=_r(),i=t.length+1,o=new X(t.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){let u=l.getNext().value,h=u.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===i&&u.largestBatchId>r&&a.set(u.getKey(),u)}return F.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let i=new Ye((h,f)=>h-f),o=this.overlays.getIterator();for(;o.hasNext();){let h=o.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>r){let f=i.get(h.largestBatchId);f===null&&(f=_r(),i=i.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}let l=_r(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,f)=>l.set(h,f)),!(l.size()>=a)););return F.resolve(l)}ht(e,t,r){let a=this.overlays.get(r.key);if(a!==null){let o=this.Ir.get(a.largestBatchId).delete(r.key);this.Ir.set(a.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Rl(t,r));let i=this.Ir.get(t);i===void 0&&(i=le(),this.Ir.set(t,i)),this.Ir.set(t,i.add(r.key))}};var Xl=class{constructor(){this.sessionToken=We.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,F.resolve()}};var pa=class{constructor(){this.Tr=new Ke(Fe.Er),this.dr=new Ke(Fe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new Fe(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Fe(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new X(new Ae([])),r=new Fe(t,e),a=new Fe(t,e+1),i=[];return this.dr.forEachInRange([r,a],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new X(new Ae([])),r=new Fe(t,e),a=new Fe(t,e+1),i=le();return this.dr.forEachInRange([r,a],o=>{i=i.add(o.key)}),i}containsKey(e){let t=new Fe(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Fe=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return X.comparator(e.key,t.key)||pe(e.wr,t.wr)}static Ar(e,t){return pe(e.wr,t.wr)||X.comparator(e.key,t.key)}};var Zl=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Ke(Fe.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){let i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Ml(i,t,r,a);this.mutationQueue.push(o);for(let l of a)this.br=this.br.add(new Fe(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,t){return F.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,a=this.vr(r),i=a<0?0:a;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Fe(t,0),a=new Fe(t,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,a],o=>{let l=this.Dr(o.wr);i.push(l)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ke(pe);return t.forEach(a=>{let i=new Fe(a,0),o=new Fe(a,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],l=>{r=r.add(l.wr)})}),F.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,a=r.length+1,i=r;X.isDocumentKey(i)||(i=i.child(""));let o=new Fe(new X(i),0),l=new Ke(pe);return this.br.forEachWhile(u=>{let h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===a&&(l=l.add(u.wr)),!0)},o),F.resolve(this.Cr(l))}Cr(e){let t=[];return e.forEach(r=>{let a=this.Dr(r);a!==null&&t.push(a)}),t}removeMutationBatch(e,t){ve(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return F.forEach(t.mutations,a=>{let i=new Fe(a.key,t.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new Fe(t,0),a=this.br.firstAfterOrEqual(r);return F.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var ec=class{constructor(e){this.Mr=e,this.docs=function(){return new Ye(X.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,a=this.docs.get(r),i=a?a.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return F.resolve(r?r.document.mutableCopy():mt.newInvalidDocument(t))}getEntries(e,t){let r=Nt();return t.forEach(a=>{let i=this.docs.get(a);r=r.insert(a,i?i.document.mutableCopy():mt.newInvalidDocument(a))}),F.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let i=Nt(),o=t.path,l=new X(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){let{key:h,value:{document:f}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||Jv(Qv(f),r)<=0||(a.has(f.key)||xo(t,f))&&(i=i.insert(f.key,f.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,t,r,a){ee()}Or(e,t){return F.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new tc(this)}getSize(e){return F.resolve(this.size)}},tc=class extends Wl{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,a)=>{a.isValidDocument()?t.push(this.cr.addEntry(e,a)):this.cr.removeEntry(r)}),F.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var rc=class{constructor(e){this.persistence=e,this.Nr=new $t(t=>Hc(t),Kc),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.Lr=0,this.Br=new pa,this.targetCount=0,this.kr=fa.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,a)=>t(a)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),F.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new fa(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,F.resolve()}updateTargetData(e,t){return this.Kn(t),F.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,t,r){let a=0,i=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=t&&r.get(l.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),a++)}),F.waitFor(i).next(()=>a)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return F.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),F.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let a=this.persistence.referenceDelegate,i=[];return a&&t.forEach(o=>{i.push(a.markPotentiallyOrphaned(e,o))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),F.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return F.resolve(r)}containsKey(e,t){return F.resolve(this.Br.containsKey(t))}};var nc=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new of(0),this.Kr=!1,this.Kr=!0,this.$r=new Xl,this.referenceDelegate=e(this),this.Ur=new rc(this),this.indexManager=new Hl,this.remoteDocumentCache=function(a){return new ec(a)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new ql(t),this.Gr=new Ql(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Jl,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new Zl(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){W("MemoryPersistence","Starting transaction:",e);let a=new ac(this.Qr.next());return this.referenceDelegate.zr(),r(a).next(i=>this.referenceDelegate.jr(a).next(()=>i)).toPromise().then(i=>(a.raiseOnCommittedEvent(),i))}Hr(e,t){return F.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},ac=class extends gl{constructor(e){super(),this.currentSequenceNumber=e}},ic=class n{constructor(e){this.persistence=e,this.Jr=new pa,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw ee()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),F.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),F.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(a=>this.Xr.add(a.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,r=>{let a=X.fromPath(r);return this.ei(e,a).next(i=>{i||t.removeEntry(a,ae.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return F.or([()=>F.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var oc=class n{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=a}static Wi(e,t){let r=le(),a=le();for(let i of t.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:a=a.add(i.doc.key)}return new n(e,t.fromCache,r,a)}};var sc=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var lc=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Dd()?8:Zv(xd())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,a){let i={result:null};return this.Yi(e,t).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,t,a,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;let o=new sc;return this.Xi(e,t,o).next(l=>{if(i.result=l,this.zi)return this.es(e,t,o,l.size)})}).next(()=>i.result)}es(e,t,r,a){return r.documentReadCount<this.ji?(ra()<=It.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",Xr(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(ra()<=It.DEBUG&&W("QueryEngine","Query:",Xr(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.Hi*a?(ra()<=It.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",Xr(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Tt(t))):F.resolve())}Yi(e,t){if(Om(t))return F.resolve(null);let r=Tt(t);return this.indexManager.getIndexType(e,r).next(a=>a===0?null:(t.limit!==null&&a===1&&(t=Cl(t,null,"F"),r=Tt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{let o=le(...i);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{let h=this.ts(t,l);return this.ns(t,h,o,u.readTime)?this.Yi(e,Cl(t,null,"F")):this.rs(e,h,t,u)}))})))}Zi(e,t,r,a){return Om(t)||a.isEqual(ae.min())?F.resolve(null):this.Ji.getDocuments(e,r).next(i=>{let o=this.ts(t,i);return this.ns(t,o,r,a)?F.resolve(null):(ra()<=It.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Xr(t)),this.rs(e,o,t,Gv(a,-1)).next(l=>l))})}ts(e,t){let r=new Ke(vf(e));return t.forEach((a,i)=>{xo(e,i)&&(r=r.add(i))}),r}ns(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let i=e.limitType==="F"?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(a)>0)}Xi(e,t,r){return ra()<=It.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",Xr(t)),this.Ji.getDocumentsMatchingQuery(e,t,Pr.min(),r)}rs(e,t,r,a){return this.Ji.getDocumentsMatchingQuery(e,r,a).next(i=>(t.forEach(o=>{i=i.insert(o.key,o)}),i))}};var cc=class{constructor(e,t,r,a){this.persistence=e,this.ss=t,this.serializer=a,this.os=new Ye(pe),this._s=new $t(i=>Hc(i),Kc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Gl(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function q_(n,e,t,r){return new cc(n,e,t,r)}function Of(n,e){return B(this,null,function*(){let t=re(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next(i=>(a=i,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(i=>{let o=[],l=[],u=le();for(let h of a){o.push(h.batchId);for(let f of h.mutations)u=u.add(f.key)}for(let h of i){l.push(h.batchId);for(let f of h.mutations)u=u.add(f.key)}return t.localDocuments.getDocuments(r,u).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:l}))})})})}function H_(n,e){let t=re(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let a=e.batch.keys(),i=t.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,h,f){let g=h.batch,_=g.keys(),S=F.resolve();return _.forEach(D=>{S=S.next(()=>f.getEntry(u,D)).next(b=>{let I=h.docVersions.get(D);ve(I!==null),b.version.compareTo(I)<0&&(g.applyToRemoteDocument(b,h),b.isValidDocument()&&(b.setReadTime(h.commitVersion),f.addEntry(b)))})}),S.next(()=>l.mutationQueue.removeMutationBatch(u,g))}(t,r,e,i).next(()=>i.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=le();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,a))})}function Vf(n){let e=re(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function K_(n,e){let t=re(n),r=e.snapshotVersion,a=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});a=t.os;let l=[];e.targetChanges.forEach((f,g)=>{let _=a.get(g);if(!_)return;l.push(t.Ur.removeMatchingKeys(i,f.removedDocuments,g).next(()=>t.Ur.addMatchingKeys(i,f.addedDocuments,g)));let S=_.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(g)!==null?S=S.withResumeToken(We.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):f.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(f.resumeToken,r)),a=a.insert(g,S),function(b,I,V){return b.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0}(_,S,f)&&l.push(t.Ur.updateTargetData(i,S))});let u=Nt(),h=le();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(t.persistence.referenceDelegate.updateLimboDocument(i,f))}),l.push(W_(i,o,e.documentUpdates).next(f=>{u=f.Ps,h=f.Is})),!r.isEqual(ae.min())){let f=t.Ur.getLastRemoteSnapshotVersion(i).next(g=>t.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(f)}return F.waitFor(l).next(()=>o.apply(i)).next(()=>t.localDocuments.getLocalViewOfDocuments(i,u,h)).next(()=>u)}).then(i=>(t.os=a,i))}function W_(n,e,t){let r=le(),a=le();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let o=Nt();return t.forEach((l,u)=>{let h=i.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(a=a.add(l)),u.isNoDocument()&&u.version.isEqual(ae.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):W("LocalStore","Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{Ps:o,Is:a}})}function $_(n,e){let t=re(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function G_(n,e){let t=re(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let a;return t.Ur.getTargetData(r,e).next(i=>i?(a=i,F.resolve(a)):t.Ur.allocateTargetId(r).next(o=>(a=new ma(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,a).next(()=>a))))}).then(r=>{let a=t.os.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function uc(n,e,t){return B(this,null,function*(){let r=re(n),a=r.os.get(e),i=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,a)))}catch(o){if(!wa(o))throw o;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(a.target)})}function $m(n,e,t){let r=re(n),a=ae.min(),i=le();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,f){let g=re(u),_=g._s.get(f);return _!==void 0?F.resolve(g.os.get(_)):g.Ur.getTargetData(h,f)}(r,o,Tt(e)).next(l=>{if(l)return a=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?a:ae.min(),t?i:le())).next(l=>(Q_(r,d_(e),l),{documents:l,Ts:i})))}function Q_(n,e,t){let r=n.us.get(e)||ae.min();t.forEach((a,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),n.us.set(e,r)}var oo=class{constructor(){this.activeTargetIds=y_()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var dc=class{constructor(){this.so=new oo,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new oo,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var hc=class{_o(e){}shutdown(){}};var so=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var qi=null;function il(){return qi===null?qi=function(){return 268435456+Math.round(2147483648*Math.random())}():qi++,"0x"+qi.toString(16)}var J_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var mc=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var He="WebChannelConnection",fc=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${a}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${i}`}get Fo(){return!1}Mo(t,r,a,i,o){let l=il(),u=this.xo(t,r.toUriEncodedString());W("RestConnection",`Sending RPC '${t}' ${l}:`,u,a);let h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,i,o),this.No(t,u,h,a).then(f=>(W("RestConnection",`Received RPC '${t}' ${l}: `,f),f),f=>{throw on("RestConnection",`RPC '${t}' ${l} failed with error: `,f,"url: ",u,"request:",a),f})}Lo(t,r,a,i,o,l){return this.Mo(t,r,a,i,o)}Oo(t,r,a){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Tn}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>t[o]=i),a&&a.headers.forEach((i,o)=>t[o]=i)}xo(t,r){let a=J_[t];return`${this.Do}/v1/${r}:${a}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,a){let i=il();return new Promise((o,l)=>{let u=new Zs;u.setWithCredentials(!0),u.listenOnce(el.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ta.NO_ERROR:let f=u.getResponseJson();W(He,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(f)),o(f);break;case ta.TIMEOUT:W(He,`RPC '${e}' ${i} timed out`),l(new Q(M.DEADLINE_EXCEEDED,"Request time out"));break;case ta.HTTP_ERROR:let g=u.getStatus();if(W(He,`RPC '${e}' ${i} failed with status:`,g,"response text:",u.getResponseText()),g>0){let _=u.getResponseJson();Array.isArray(_)&&(_=_[0]);let S=_?.error;if(S&&S.status&&S.message){let D=function(I){let V=I.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(V)>=0?V:M.UNKNOWN}(S.status);l(new Q(D,S.message))}else l(new Q(M.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Q(M.UNAVAILABLE,"Connection failed."));break;default:ee()}}finally{W(He,`RPC '${e}' ${i} completed.`)}});let h=JSON.stringify(a);W(He,`RPC '${e}' ${i} sending request:`,a),u.send(t,"POST",h,r,15)})}Bo(e,t,r){let a=il(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=nl(),l=rl(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let f=i.join("");W(He,`Creating RPC '${e}' stream ${a}: ${f}`,u);let g=o.createWebChannel(f,u),_=!1,S=!1,D=new mc({Io:I=>{S?W(He,`Not sending because RPC '${e}' stream ${a} is closed:`,I):(_||(W(He,`Opening RPC '${e}' stream ${a} transport.`),g.open(),_=!0),W(He,`RPC '${e}' stream ${a} sending:`,I),g.send(I))},To:()=>g.close()}),b=(I,V,z)=>{I.listen(V,$=>{try{z($)}catch(Z){setTimeout(()=>{throw Z},0)}})};return b(g,Jr.EventType.OPEN,()=>{S||(W(He,`RPC '${e}' stream ${a} transport opened.`),D.yo())}),b(g,Jr.EventType.CLOSE,()=>{S||(S=!0,W(He,`RPC '${e}' stream ${a} transport closed`),D.So())}),b(g,Jr.EventType.ERROR,I=>{S||(S=!0,on(He,`RPC '${e}' stream ${a} transport errored:`,I),D.So(new Q(M.UNAVAILABLE,"The operation could not be completed")))}),b(g,Jr.EventType.MESSAGE,I=>{var V;if(!S){let z=I.data[0];ve(!!z);let $=z,Z=$.error||((V=$[0])===null||V===void 0?void 0:V.error);if(Z){W(He,`RPC '${e}' stream ${a} received error:`,Z);let xe=Z.status,J=function(y){let w=Me[y];if(w!==void 0)return If(w)}(xe),T=Z.message;J===void 0&&(J=M.INTERNAL,T="Unknown error status: "+xe+" with message "+Z.message),S=!0,D.So(new Q(J,T)),g.close()}else W(He,`RPC '${e}' stream ${a} received:`,z),D.bo(z)}}),b(l,tl.STAT_EVENT,I=>{I.stat===Ui.PROXY?W(He,`RPC '${e}' stream ${a} detected buffering proxy`):I.stat===Ui.NOPROXY&&W(He,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{D.wo()},0),D}};function ol(){return typeof document<"u"?document:null}function Do(n){return new Ll(n,!0)}var lo=class{constructor(e,t,r=1e3,a=1.5,i=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=a,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),a=Math.max(0,t-r);a>0&&W("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,a,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var co=class{constructor(e,t,r,a,i,o,l,u){this.ui=e,this.Ho=r,this.Jo=a,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new lo(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return B(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return B(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return B(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===M.RESOURCE_EXHAUSTED?(Ft(t.toString()),Ft("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,a])=>{this.Yo===t&&this.P_(r,a)},r=>{e(()=>{let a=new Q(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(a)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(a=>{r(()=>this.I_(a))}),this.stream.onMessage(a=>{r(()=>++this.e_==1?this.E_(a):this.onNext(a))})}i_(){this.state=5,this.t_.Go(()=>B(this,null,function*(){this.state=0,this.start()}))}I_(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},pc=class extends co{constructor(e,t,r,a,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,o),this.serializer=i}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=Y_(this.serializer,e),r=function(i){if(!("targetChange"in i))return ae.min();let o=i.targetChange;return o.targetIds&&o.targetIds.length?ae.min():o.readTime?wt(o.readTime):ae.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=Bl(this.serializer),t.addTarget=function(i,o){let l,u=o.target;if(l=Il(u)?{documents:R_(i,u)}:{query:N_(i,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=Cf(i,o.resumeToken);let h=jl(i,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(ae.min())>0){l.readTime=ao(i,o.snapshotVersion.toTimestamp());let h=jl(i,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);let r=V_(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=Bl(this.serializer),t.removeTarget=e,this.a_(t)}},gc=class extends co{constructor(e,t,r,a,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return ve(!!e.streamToken),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ve(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=F_(e.writeResults,e.commitTime),r=wt(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=Bl(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>M_(this.serializer,r))};this.a_(t)}};var yc=class extends class{}{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.y_=!1}w_(){if(this.y_)throw new Q(M.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,zl(t,r),a,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Q(M.UNKNOWN,i.toString())})}Lo(e,t,r,a,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,zl(t,r),a,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Q(M.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},vc=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ft(t),this.D_=!1):W("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var _c=class{constructor(e,t,r,a,i){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(()=>B(this,null,function*(){Cr(this)&&(W("RemoteStore","Restarting streams for network reachability change."),yield function(u){return B(this,null,function*(){let h=re(u);h.L_.add(4),yield Pa(h),h.q_.set("Unknown"),h.L_.delete(4),yield Eo(h)})}(this))}))}),this.q_=new vc(r,a)}};function Eo(n){return B(this,null,function*(){if(Cr(n))for(let e of n.B_)yield e(!0)})}function Pa(n){return B(this,null,function*(){for(let e of n.B_)yield e(!1)})}function Lf(n,e){let t=re(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Xc(t)?Jc(t):wn(t).r_()&&Qc(t,e))}function Gc(n,e){let t=re(n),r=wn(t);t.N_.delete(e),r.r_()&&jf(t,e),t.N_.size===0&&(r.r_()?r.o_():Cr(t)&&t.q_.set("Unknown"))}function Qc(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}wn(n).A_(e)}function jf(n,e){n.Q_.xe(e),wn(n).R_(e)}function Jc(n){n.Q_=new Vl({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),wn(n).start(),n.q_.v_()}function Xc(n){return Cr(n)&&!wn(n).n_()&&n.N_.size>0}function Cr(n){return re(n).L_.size===0}function zf(n){n.Q_=void 0}function X_(n){return B(this,null,function*(){n.q_.set("Online")})}function Z_(n){return B(this,null,function*(){n.N_.forEach((e,t)=>{Qc(n,e)})})}function eT(n,e){return B(this,null,function*(){zf(n),Xc(n)?(n.q_.M_(e),Jc(n)):n.q_.set("Unknown")})}function tT(n,e,t){return B(this,null,function*(){if(n.q_.set("Online"),e instanceof ro&&e.state===2&&e.cause)try{yield function(a,i){return B(this,null,function*(){let o=i.cause;for(let l of i.targetIds)a.N_.has(l)&&(yield a.remoteSyncer.rejectListen(l,o),a.N_.delete(l),a.Q_.removeTarget(l))})}(n,e)}catch(r){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield uo(n,r)}else if(e instanceof nn?n.Q_.Ke(e):e instanceof to?n.Q_.He(e):n.Q_.We(e),!t.isEqual(ae.min()))try{let r=yield Vf(n.localStore);t.compareTo(r)>=0&&(yield function(i,o){let l=i.Q_.rt(o);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){let f=i.N_.get(h);f&&i.N_.set(h,f.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,h)=>{let f=i.N_.get(u);if(!f)return;i.N_.set(u,f.withResumeToken(We.EMPTY_BYTE_STRING,f.snapshotVersion)),jf(i,u);let g=new ma(f.target,u,h,f.sequenceNumber);Qc(i,g)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){W("RemoteStore","Failed to raise snapshot:",r),yield uo(n,r)}})}function uo(n,e,t){return B(this,null,function*(){if(!wa(e))throw e;n.L_.add(1),yield Pa(n),n.q_.set("Offline"),t||(t=()=>Vf(n.localStore)),n.asyncQueue.enqueueRetryable(()=>B(this,null,function*(){W("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Eo(n)}))})}function Uf(n,e){return e().catch(t=>uo(n,t,e))}function bo(n){return B(this,null,function*(){let e=re(n),t=Gt(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;rT(e);)try{let a=yield $_(e.localStore,r);if(a===null){e.O_.length===0&&t.o_();break}r=a.batchId,nT(e,a)}catch(a){yield uo(e,a)}Bf(e)&&qf(e)})}function rT(n){return Cr(n)&&n.O_.length<10}function nT(n,e){n.O_.push(e);let t=Gt(n);t.r_()&&t.V_&&t.m_(e.mutations)}function Bf(n){return Cr(n)&&!Gt(n).n_()&&n.O_.length>0}function qf(n){Gt(n).start()}function aT(n){return B(this,null,function*(){Gt(n).p_()})}function iT(n){return B(this,null,function*(){let e=Gt(n);for(let t of n.O_)e.m_(t.mutations)})}function oT(n,e,t){return B(this,null,function*(){let r=n.O_.shift(),a=Fl.from(r,e,t);yield Uf(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),yield bo(n)})}function sT(n,e){return B(this,null,function*(){e&&Gt(n).V_&&(yield function(r,a){return B(this,null,function*(){if(function(o){return k_(o)&&o!==M.ABORTED}(a.code)){let i=r.O_.shift();Gt(r).s_(),yield Uf(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,a)),yield bo(r)}})}(n,e)),Bf(n)&&qf(n)})}function Gm(n,e){return B(this,null,function*(){let t=re(n);t.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");let r=Cr(t);t.L_.add(3),yield Pa(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Eo(t)})}function lT(n,e){return B(this,null,function*(){let t=re(n);e?(t.L_.delete(2),yield Eo(t)):e||(t.L_.add(2),yield Pa(t),t.q_.set("Unknown"))})}function wn(n){return n.K_||(n.K_=function(t,r,a){let i=re(t);return i.w_(),new pc(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,a)}(n.datastore,n.asyncQueue,{Eo:X_.bind(null,n),Ro:Z_.bind(null,n),mo:eT.bind(null,n),d_:tT.bind(null,n)}),n.B_.push(e=>B(this,null,function*(){e?(n.K_.s_(),Xc(n)?Jc(n):n.q_.set("Unknown")):(yield n.K_.stop(),zf(n))}))),n.K_}function Gt(n){return n.U_||(n.U_=function(t,r,a){let i=re(t);return i.w_(),new gc(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,a)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:aT.bind(null,n),mo:sT.bind(null,n),f_:iT.bind(null,n),g_:oT.bind(null,n)}),n.B_.push(e=>B(this,null,function*(){e?(n.U_.s_(),yield bo(n)):(yield n.U_.stop(),n.O_.length>0&&(W("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var Tc=class n{constructor(e,t,r,a,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=i,this.deferred=new vt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,i){let o=Date.now()+r,l=new n(e,t,o,a,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Zc(n,e){if(Ft("AsyncQueue",`${e}: ${n}`),wa(n))return new Q(M.UNAVAILABLE,`${e}: ${n}`);throw n}var ho=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||X.comparator(t.key,r.key):(t,r)=>X.comparator(t.key,r.key),this.keyedMap=na(),this.sortedSet=new Ye(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let a=t.getNext().key,i=r.getNext().key;if(!a.isEqual(i))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var mo=class{constructor(){this.W_=new Ye(X.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):ee():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},yn=class n{constructor(e,t,r,a,i,o,l,u,h){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,t,r,a,i){let o=[];return t.forEach(l=>{o.push({type:0,doc:l})}),new n(e,t,ho.emptySet(t),o,r,a,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ko(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}};var wc=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},Pc=class{constructor(){this.queries=Qm(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let a=re(t),i=a.queries;a.queries=Qm(),i.forEach((o,l)=>{for(let u of l.j_)u.onError(r)})})(this,new Q(M.ABORTED,"Firestore shutting down"))}};function Qm(){return new $t(n=>yf(n),ko)}function cT(n,e){return B(this,null,function*(){let t=re(n),r=3,a=e.query,i=t.queries.get(a);i?!i.H_()&&e.J_()&&(r=2):(i=new wc,r=e.J_()?0:1);try{switch(r){case 0:i.z_=yield t.onListen(a,!0);break;case 1:i.z_=yield t.onListen(a,!1);break;case 2:yield t.onFirstRemoteStoreListen(a)}}catch(o){let l=Zc(o,`Initialization of query '${Xr(e.query)}' failed`);return void e.onError(l)}t.queries.set(a,i),i.j_.push(e),e.Z_(t.onlineState),i.z_&&e.X_(i.z_)&&eu(t)})}function uT(n,e){return B(this,null,function*(){let t=re(n),r=e.query,a=3,i=t.queries.get(r);if(i){let o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?a=e.J_()?0:1:!i.H_()&&e.J_()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function dT(n,e){let t=re(n),r=!1;for(let a of e){let i=a.query,o=t.queries.get(i);if(o){for(let l of o.j_)l.X_(a)&&(r=!0);o.z_=a}}r&&eu(t)}function hT(n,e,t){let r=re(n),a=r.queries.get(e);if(a)for(let i of a.j_)i.onError(t);r.queries.delete(e)}function eu(n){n.Y_.forEach(e=>{e.next()})}var Sc,Jm;(Jm=Sc||(Sc={})).ea="default",Jm.Cache="cache";var kc=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let a of e.docChanges)a.type!==3&&r.push(a);e=new yn(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=yn.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Sc.Cache}};var fo=class{constructor(e){this.key=e}},po=class{constructor(e){this.key=e}},xc=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=le(),this.mutatedKeys=le(),this.Aa=vf(e),this.Ra=new ho(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new mo,a=t?t.Ra:this.Ra,i=t?t.mutatedKeys:this.mutatedKeys,o=a,l=!1,u=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,h=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((f,g)=>{let _=a.get(f),S=xo(this.query,g)?g:null,D=!!_&&this.mutatedKeys.has(_.key),b=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations),I=!1;_&&S?_.data.isEqual(S.data)?D!==b&&(r.track({type:3,doc:S}),I=!0):this.ga(_,S)||(r.track({type:2,doc:S}),I=!0,(u&&this.Aa(S,u)>0||h&&this.Aa(S,h)<0)&&(l=!0)):!_&&S?(r.track({type:0,doc:S}),I=!0):_&&!S&&(r.track({type:1,doc:_}),I=!0,(u||h)&&(l=!0)),I&&(S?(o=o.add(S),i=b?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:l,mutatedKeys:i}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){let i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((f,g)=>function(S,D){let b=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ee()}};return b(S)-b(D)}(f.type,g.type)||this.Aa(f.doc,g.doc)),this.pa(r),a=a!=null&&a;let l=t&&!a?this.ya():[],u=this.da.size===0&&this.current&&!a?1:0,h=u!==this.Ea;return this.Ea=u,o.length!==0||h?{snapshot:new yn(this.query,e.Ra,i,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new mo,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=le(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new po(r))}),this.da.forEach(r=>{e.has(r)||t.push(new fo(r))}),t}ba(e){this.Ta=e.Ts,this.da=le();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return yn.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},Dc=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Ec=class{constructor(e){this.key=e,this.va=!1}},bc=class{constructor(e,t,r,a,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new $t(l=>yf(l),ko),this.Ma=new Map,this.xa=new Set,this.Oa=new Ye(X.comparator),this.Na=new Map,this.La=new pa,this.Ba={},this.ka=new Map,this.qa=fa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function mT(n,e,t=!0){return B(this,null,function*(){let r=Qf(n),a,i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),a=i.view.Da()):a=yield Hf(r,e,t,!0),a})}function fT(n,e){return B(this,null,function*(){let t=Qf(n);yield Hf(t,e,!0,!1)})}function Hf(n,e,t,r){return B(this,null,function*(){let a=yield G_(n.localStore,Tt(e)),i=a.targetId,o=n.sharedClientState.addLocalQueryTarget(i,t),l;return r&&(l=yield pT(n,e,i,o==="current",a.resumeToken)),n.isPrimaryClient&&t&&Lf(n.remoteStore,a),l})}function pT(n,e,t,r,a){return B(this,null,function*(){n.Ka=(g,_,S)=>function(b,I,V,z){return B(this,null,function*(){let $=I.view.ma(V);$.ns&&($=yield $m(b.localStore,I.query,!1).then(({documents:T})=>I.view.ma(T,$)));let Z=z&&z.targetChanges.get(I.targetId),xe=z&&z.targetMismatches.get(I.targetId)!=null,J=I.view.applyChanges($,b.isPrimaryClient,Z,xe);return Zm(b,I.targetId,J.wa),J.snapshot})}(n,g,_,S);let i=yield $m(n.localStore,e,!0),o=new xc(e,i.Ts),l=o.ma(i.documents),u=ha.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",a),h=o.applyChanges(l,n.isPrimaryClient,u);Zm(n,t,h.wa);let f=new Dc(e,t,o);return n.Fa.set(e,f),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),h.snapshot})}function gT(n,e,t){return B(this,null,function*(){let r=re(n),a=r.Fa.get(e),i=r.Ma.get(a.targetId);if(i.length>1)return r.Ma.set(a.targetId,i.filter(o=>!ko(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||(yield uc(r.localStore,a.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(a.targetId),t&&Gc(r.remoteStore,a.targetId),Ic(r,a.targetId)}).catch(Ta))):(Ic(r,a.targetId),yield uc(r.localStore,a.targetId,!0))})}function yT(n,e){return B(this,null,function*(){let t=re(n),r=t.Fa.get(e),a=t.Ma.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Gc(t.remoteStore,r.targetId))})}function vT(n,e,t){return B(this,null,function*(){let r=xT(n);try{let a=yield function(o,l){let u=re(o),h=Ve.now(),f=l.reduce((S,D)=>S.add(D.key),le()),g,_;return u.persistence.runTransaction("Locally write mutations","readwrite",S=>{let D=Nt(),b=le();return u.cs.getEntries(S,f).next(I=>{D=I,D.forEach((V,z)=>{z.isValidDocument()||(b=b.add(V))})}).next(()=>u.localDocuments.getOverlayedDocuments(S,D)).next(I=>{g=I;let V=[];for(let z of l){let $=S_(z,g.get(z.key).overlayedDocument);$!=null&&V.push(new kt(z.key,$,uf($.value.mapValue),Mt.exists(!0)))}return u.mutationQueue.addMutationBatch(S,h,V,l)}).next(I=>{_=I;let V=I.applyToLocalDocumentSet(g,b);return u.documentOverlayCache.saveOverlays(S,I.batchId,V)})}).then(()=>({batchId:_.batchId,changes:Tf(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),function(o,l,u){let h=o.Ba[o.currentUser.toKey()];h||(h=new Ye(pe)),h=h.insert(l,u),o.Ba[o.currentUser.toKey()]=h}(r,a.batchId,t),yield Sa(r,a.changes),yield bo(r.remoteStore)}catch(a){let i=Zc(a,"Failed to persist write");t.reject(i)}})}function Kf(n,e){return B(this,null,function*(){let t=re(n);try{let r=yield K_(t.localStore,e);e.targetChanges.forEach((a,i)=>{let o=t.Na.get(i);o&&(ve(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?o.va=!0:a.modifiedDocuments.size>0?ve(o.va):a.removedDocuments.size>0&&(ve(o.va),o.va=!1))}),yield Sa(t,r,e)}catch(r){yield Ta(r)}})}function Xm(n,e,t){let r=re(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let a=[];r.Fa.forEach((i,o)=>{let l=o.view.Z_(e);l.snapshot&&a.push(l.snapshot)}),function(o,l){let u=re(o);u.onlineState=l;let h=!1;u.queries.forEach((f,g)=>{for(let _ of g.j_)_.Z_(l)&&(h=!0)}),h&&eu(u)}(r.eventManager,e),a.length&&r.Ca.d_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function _T(n,e,t){return B(this,null,function*(){let r=re(n);r.sharedClientState.updateQueryState(e,"rejected",t);let a=r.Na.get(e),i=a&&a.key;if(i){let o=new Ye(X.comparator);o=o.insert(i,mt.newNoDocument(i,ae.min()));let l=le().add(i),u=new eo(ae.min(),new Map,new Ye(pe),o,l);yield Kf(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),tu(r)}else yield uc(r.localStore,e,!1).then(()=>Ic(r,e,t)).catch(Ta)})}function TT(n,e){return B(this,null,function*(){let t=re(n),r=e.batch.batchId;try{let a=yield H_(t.localStore,e);$f(t,r,null),Wf(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Sa(t,a)}catch(a){yield Ta(a)}})}function wT(n,e,t){return B(this,null,function*(){let r=re(n);try{let a=yield function(o,l){let u=re(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return u.mutationQueue.lookupMutationBatch(h,l).next(g=>(ve(g!==null),f=g.keys(),u.mutationQueue.removeMutationBatch(h,g))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>u.localDocuments.getDocuments(h,f))})}(r.localStore,e);$f(r,e,t),Wf(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Sa(r,a)}catch(a){yield Ta(a)}})}function Wf(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function $f(n,e,t){let r=re(n),a=r.Ba[r.currentUser.toKey()];if(a){let i=a.get(e);i&&(t?i.reject(t):i.resolve(),a=a.remove(e)),r.Ba[r.currentUser.toKey()]=a}}function Ic(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||Gf(n,r)})}function Gf(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(Gc(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),tu(n))}function Zm(n,e,t){for(let r of t)r instanceof fo?(n.La.addReference(r.key,e),PT(n,r)):r instanceof po?(W("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||Gf(n,r.key)):ee()}function PT(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(W("SyncEngine","New document in limbo: "+t),n.xa.add(r),tu(n))}function tu(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new X(Ae.fromString(e)),r=n.qa.next();n.Na.set(r,new Ec(t)),n.Oa=n.Oa.insert(t,r),Lf(n.remoteStore,new ma(Tt(gf(t.path)),r,"TargetPurposeLimboResolution",of.oe))}}function Sa(n,e,t){return B(this,null,function*(){let r=re(n),a=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,t).then(h=>{var f;if((h||t)&&r.isPrimaryClient){let g=h?!h.fromCache:(f=t?.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(h){a.push(h);let g=oc.Wi(u.targetId,h);i.push(g)}}))}),yield Promise.all(o),r.Ca.d_(a),yield function(u,h){return B(this,null,function*(){let f=re(u);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>F.forEach(h,_=>F.forEach(_.$i,S=>f.persistence.referenceDelegate.addReference(g,_.targetId,S)).next(()=>F.forEach(_.Ui,S=>f.persistence.referenceDelegate.removeReference(g,_.targetId,S)))))}catch(g){if(!wa(g))throw g;W("LocalStore","Failed to update sequence numbers: "+g)}for(let g of h){let _=g.targetId;if(!g.fromCache){let S=f.os.get(_),D=S.snapshotVersion,b=S.withLastLimboFreeSnapshotVersion(D);f.os=f.os.insert(_,b)}}})}(r.localStore,i))})}function ST(n,e){return B(this,null,function*(){let t=re(n);if(!t.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());let r=yield Of(t.localStore,e);t.currentUser=e,function(i,o){i.ka.forEach(l=>{l.forEach(u=>{u.reject(new Q(M.CANCELLED,o))})}),i.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Sa(t,r.hs)}})}function kT(n,e){let t=re(n),r=t.Na.get(e);if(r&&r.va)return le().add(r.key);{let a=le(),i=t.Ma.get(e);if(!i)return a;for(let o of i){let l=t.Fa.get(o);a=a.unionWith(l.view.Va)}return a}}function Qf(n){let e=re(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Kf.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kT.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_T.bind(null,e),e.Ca.d_=dT.bind(null,e.eventManager),e.Ca.$a=hT.bind(null,e.eventManager),e}function xT(n){let e=re(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=TT.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=wT.bind(null,e),e}var ef=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return B(this,null,function*(){this.serializer=Do(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return q_(this.persistence,new lc,t.initialUser,this.serializer)}Ga(t){return new nc(ic.Zr,this.serializer)}Wa(t){return new dc}terminate(){return B(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var DT=(()=>{class n{initialize(t,r){return B(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>Xm(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=ST.bind(null,this.syncEngine),yield lT(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Pc}()}createDatastore(t){let r=Do(t.databaseInfo.databaseId),a=function(o){return new fc(o)}(t.databaseInfo);return function(o,l,u,h){return new yc(o,l,u,h)}(t.authCredentials,t.appCheckCredentials,a,r)}createRemoteStore(t){return function(a,i,o,l,u){return new _c(a,i,o,l,u)}(this.localStore,this.datastore,t.asyncQueue,r=>Xm(this.syncEngine,r,0),function(){return so.D()?new so:new hc}())}createSyncEngine(t,r){return function(i,o,l,u,h,f,g){let _=new bc(i,o,l,u,h,f);return g&&(_.Qa=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return B(this,null,function*(){var t,r;yield function(i){return B(this,null,function*(){let o=re(i);W("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield Pa(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var Cc=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ft("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Ac=class{constructor(e,t,r,a,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=Ne.UNAUTHENTICATED,this.clientId=$i.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,o=>B(this,null,function*(){W("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(W("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new vt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>B(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Zc(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function sl(n,e){return B(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(a=>B(this,null,function*(){r.isEqual(a)||(yield Of(e.localStore,a),r=a)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function tf(n,e){return B(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield ET(n);W("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Gm(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,a)=>Gm(e.remoteStore,a)),n._onlineComponents=e})}function ET(n){return B(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{yield sl(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(a){return a.name==="FirebaseError"?a.code===M.FAILED_PRECONDITION||a.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(t))throw t;on("Error using user provided cache. Falling back to memory cache: "+t),yield sl(n,new ef)}}else W("FirestoreClient","Using default OfflineComponentProvider"),yield sl(n,new ef);return n._offlineComponents})}function Jf(n){return B(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),yield tf(n,n._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),yield tf(n,new DT))),n._onlineComponents})}function bT(n){return Jf(n).then(e=>e.syncEngine)}function IT(n){return B(this,null,function*(){let e=yield Jf(n),t=e.eventManager;return t.onListen=mT.bind(null,e.syncEngine),t.onUnlisten=gT.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=fT.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=yT.bind(null,e.syncEngine),t})}function CT(n,e,t={}){let r=new vt;return n.asyncQueue.enqueueAndForget(()=>B(this,null,function*(){return function(i,o,l,u,h){let f=new Cc({next:_=>{f.Za(),o.enqueueAndForget(()=>uT(i,g)),_.fromCache&&u.source==="server"?h.reject(new Q(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(_)},error:_=>h.reject(_)}),g=new kc(l,f,{includeMetadataChanges:!0,_a:!0});return cT(i,g)}(yield IT(n),n.asyncQueue,e,t,r)})),r.promise}function Xf(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var rf=new Map;function Zf(n,e,t){if(!t)throw new Q(M.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function AT(n,e,t,r){if(e===!0&&r===!0)throw new Q(M.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function nf(n){if(!X.isDocumentKey(n))throw new Q(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function af(n){if(X.isDocumentKey(n))throw new Q(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ru(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ee()}function Er(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Q(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=ru(n);throw new Q(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var go=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Q(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Q(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}AT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Xf((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Q(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Q(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Q(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,a){return r.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},vn=class{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new go({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new go(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ll;switch(r.type){case"firstParty":return new hl(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return B(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=rf.get(t);r&&(W("ComponentProvider","Removing Datastore"),rf.delete(t),r.terminate())}(this),Promise.resolve()}};function ep(n,e,t,r={}){var a;let i=(n=Er(n,vn))._getSettings(),o=`${e}:${t}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&on("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=Ne.MOCK_USER;else{l=kd(r.mockUserToken,(a=n._app)===null||a===void 0?void 0:a.options.projectId);let h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new Q(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ne(h)}n._authCredentials=new cl(new Wi(l,u))}}var yo=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},ct=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Kt(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Kt=class n extends yo{constructor(e,t,r){super(e,t,gf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ct(this.firestore,null,new X(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function tp(n,e,...t){if(n=bt(n),Zf("collection","path",e),n instanceof vn){let r=Ae.fromString(e,...t);return af(r),new Kt(n,null,r)}{if(!(n instanceof ct||n instanceof Kt))throw new Q(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ae.fromString(e,...t));return af(r),new Kt(n.firestore,null,r)}}function nu(n,e,...t){if(n=bt(n),arguments.length===1&&(e=$i.newId()),Zf("doc","path",e),n instanceof vn){let r=Ae.fromString(e,...t);return nf(r),new ct(n,null,new X(r))}{if(!(n instanceof ct||n instanceof Kt))throw new Q(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ae.fromString(e,...t));return nf(r),new ct(n.firestore,n instanceof Kt?n.converter:null,new X(r))}}var vo=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new lo(this,"async_queue_retry"),this.Vu=()=>{let r=ol();r&&W("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=ol();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=ol();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new vt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return B(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!wa(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let a=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw Ft("INTERNAL UNHANDLED ERROR: ",a),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let a=Tc.createAndSchedule(this,e,t,r,i=>this.yu(i));return this.Tu.push(a),a}fu(){this.Eu&&ee()}verifyOperationInProgress(){}wu(){return B(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};var br=class extends vn{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new vo,this._persistenceKey=a?.name||"[DEFAULT]"}_terminate(){return B(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new vo(e),this._firestoreClient=void 0,yield e}})}};function rp(n,e){let t=typeof n=="object"?n:Md(),r=typeof n=="string"?n:e||"(default)",a=Ad(t,"firestore").getImmediate({identifier:r});if(!a._initialized){let i=Sd("firestore");i&&ep(a,...i)}return a}function np(n){if(n._terminated)throw new Q(M.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||YT(n),n._firestoreClient}function YT(n){var e,t,r;let a=n._freezeSettings(),i=function(l,u,h,f){return new yl(l,u,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,Xf(f.experimentalLongPollingOptions),f.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,a);n._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=a.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),n._firestoreClient=new Ac(n._authCredentials,n._appCheckCredentials,n._queue,i,n._componentsProvider&&function(l){let u=l?._online.build();return{_offline:l?._offline.build(u),_online:u}}(n._componentsProvider))}var ga=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(We.fromBase64String(e))}catch(t){throw new Q(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(We.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var _n=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Q(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ya=class{constructor(e){this._methodName=e}};var va=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Q(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Q(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return pe(this._lat,e._lat)||pe(this._long,e._long)}};var _a=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,a){if(r.length!==a.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==a[i])return!1;return!0}(this._values,e._values)}};var MT=/^__.*__$/,Yc=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new kt(e,this.data,this.fieldMask,t,this.fieldTransforms):new Dr(e,this.data,t,this.fieldTransforms)}},_o=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new kt(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function ap(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ee()}}var Mc=class n{constructor(e,t,r,a,i,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.Fu({path:r,xu:!1});return a.Ou(e),a}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.Fu({path:r,xu:!1});return a.vu(),a}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return wo(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(ap(this.Cu)&&MT.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},Fc=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Do(e)}Qu(e,t,r,a=!1){return new Mc({Cu:e,methodName:t,qu:r,path:nt.emptyPath(),xu:!1,ku:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function ip(n){let e=n._freezeSettings(),t=Do(n._databaseId);return new Fc(n._databaseId,!!e.ignoreUndefinedProperties,t)}function FT(n,e,t,r,a,i={}){let o=n.Qu(i.merge||i.mergeFields?2:0,e,t,a);au("Data must be an object, but it was:",o,r);let l=op(r,o),u,h;if(i.merge)u=new lt(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){let f=[];for(let g of i.mergeFields){let _=Rc(e,g,t);if(!o.contains(_))throw new Q(M.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);lp(f,_)||f.push(_)}u=new lt(f),h=o.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,h=o.fieldTransforms;return new Yc(new rt(l),u,h)}var To=class n extends ya{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function RT(n,e,t,r){let a=n.Qu(1,e,t);au("Data must be an object, but it was:",a,r);let i=[],o=rt.empty();Ir(r,(u,h)=>{let f=iu(e,u,t);h=bt(h);let g=a.Nu(f);if(h instanceof To)i.push(f);else{let _=Io(h,g);_!=null&&(i.push(f),o.set(f,_))}});let l=new lt(i);return new _o(o,l,a.fieldTransforms)}function NT(n,e,t,r,a,i){let o=n.Qu(1,e,t),l=[Rc(e,r,t)],u=[a];if(i.length%2!=0)throw new Q(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<i.length;_+=2)l.push(Rc(e,i[_])),u.push(i[_+1]);let h=[],f=rt.empty();for(let _=l.length-1;_>=0;--_)if(!lp(h,l[_])){let S=l[_],D=u[_];D=bt(D);let b=o.Nu(S);if(D instanceof To)h.push(S);else{let I=Io(D,b);I!=null&&(h.push(S),f.set(S,I))}}let g=new lt(h);return new _o(f,g,o.fieldTransforms)}function Io(n,e){if(sp(n=bt(n)))return au("Unsupported field value:",e,n),op(n,e);if(n instanceof ya)return function(r,a){if(!ap(a.Cu))throw a.Bu(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Bu(`${r._methodName}() is not currently supported inside arrays`);let i=r._toFieldTransform(a);i&&a.fieldTransforms.push(i)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,a){let i=[],o=0;for(let l of r){let u=Io(l,a.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(n,e)}return function(r,a){if((r=bt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return v_(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let i=Ve.fromDate(r);return{timestampValue:ao(a.serializer,i)}}if(r instanceof Ve){let i=new Ve(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ao(a.serializer,i)}}if(r instanceof va)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ga)return{bytesValue:Cf(a.serializer,r._byteString)};if(r instanceof ct){let i=a.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw a.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:$c(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof _a)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return Wc(l.serializer,u)})}}}}}}(r,a);throw a.Bu(`Unsupported field value: ${ru(r)}`)}(n,e)}function op(n,e){let t={};return sf(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ir(n,(r,a)=>{let i=Io(a,e.Mu(r));i!=null&&(t[r]=i)}),{mapValue:{fields:t}}}function sp(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ve||n instanceof va||n instanceof ga||n instanceof ct||n instanceof ya||n instanceof _a)}function au(n,e,t){if(!sp(t)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(t)){let r=ru(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function Rc(n,e,t){if((e=bt(e))instanceof _n)return e._internalPath;if(typeof e=="string")return iu(n,e);throw wo("Field path arguments must be of type string or ",n,!1,void 0,t)}var OT=new RegExp("[~\\*/\\[\\]]");function iu(n,e,t){if(e.search(OT)>=0)throw wo(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new _n(...e.split("."))._internalPath}catch{throw wo(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function wo(n,e,t,r,a){let i=r&&!r.isEmpty(),o=a!==void 0,l=`Function ${e}() called with invalid data`;t&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${a}`),u+=")"),new Q(M.INVALID_ARGUMENT,l+n+u)}function lp(n,e){return n.some(t=>t.isEqual(e))}var Po=class{constructor(e,t,r,a,i){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Nc(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(cp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Nc=class extends Po{data(){return super.data()}};function cp(n,e){return typeof e=="string"?iu(n,e):e instanceof _n?e._internalPath:e._delegate._internalPath}function VT(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Q(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Oc=class{convertValue(e,t="none"){switch(Sr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ee(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Wt(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ee()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Ir(e,(a,i)=>{r[a]=this.convertValue(i,t)}),r}convertVectorValue(e){var t,r,a;let i=(a=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.map(o=>Ee(o.doubleValue));return new _a(i)}convertGeoPoint(e){return new va(Ee(e.latitude),Ee(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Bc(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ca(e));default:return null}}convertTimestamp(e){let t=Rt(e);return new Ve(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Ae.fromString(e);ve(Nf(r));let a=new Xi(r.get(1),r.get(3)),i=new X(r.popFirst(5));return a.isEqual(t)||Ft(`Document ${i} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}};function LT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var rn=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Vc=class extends Po{constructor(e,t,r,a,i,o){super(e,t,r,a,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new an(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(cp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},an=class extends Vc{data(e={}){return super.data(e)}},Lc=class{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new rn(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new an(this._firestore,this._userDataWriter,r.key,r,new rn(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Q(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,i){if(a._snapshot.oldDocs.isEmpty()){let o=0;return a._snapshot.docChanges.map(l=>{let u=new an(a._firestore,a._userDataWriter,l.doc.key,l.doc,new rn(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{let u=new an(a._firestore,a._userDataWriter,l.doc.key,l.doc,new rn(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter),h=-1,f=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:jT(l.type),doc:u,oldIndex:h,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function jT(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ee()}}var jc=class extends Oc{constructor(e){super(),this.firestore=e}convertBytes(e){return new ga(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new ct(this.firestore,null,t)}};function up(n){n=Er(n,yo);let e=Er(n.firestore,br),t=np(e),r=new jc(e);return VT(n._query),CT(t,n._query).then(a=>new Lc(e,r,n,a))}function dp(n,e,t,...r){n=Er(n,ct);let a=Er(n.firestore,br),i=ip(a),o;return o=typeof(e=bt(e))=="string"||e instanceof _n?NT(i,"updateDoc",n._key,e,t,r):RT(i,"updateDoc",n._key,e),ou(a,[o.toMutation(n._key,Mt.exists(!0))])}function hp(n){return ou(Er(n.firestore,br),[new da(n._key,Mt.none())])}function mp(n,e){let t=Er(n.firestore,br),r=nu(n),a=LT(n.converter,e);return ou(t,[FT(ip(n.firestore),"addDoc",r._key,a,n.converter!==null,{}).toMutation(r._key,Mt.exists(!1))]).then(()=>r)}function ou(n,e){return function(r,a){let i=new vt;return r.asyncQueue.enqueueAndForget(()=>B(this,null,function*(){return vT(yield bT(r),a,i)})),i.promise}(np(n),e)}(function(e,t=!0){(function(a){Tn=a})(Yd),Cd(new bd("firestore",(r,{instanceIdentifier:a,options:i})=>{let o=r.getProvider("app").getImmediate(),l=new br(new ul(r.getProvider("auth-internal")),new fl(r.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Q(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xi(h.options.projectId,f)}(o,a),o);return i=Object.assign({useFetchStreams:t},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Vn(bm,"4.7.3",e),Vn(bm,"4.7.3","esm2017")})();var ka=class{constructor(e){return e}},fp="firestore",su=class{constructor(){return Nd(fp)}};var lu=new Lr("angularfire2.firestore-instances");function zT(n,e){let t=Rd(fp,n,e);return t&&new ka(t)}function UT(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new ka(r)}}var BT={provide:su,deps:[[new On,lu]]},qT={provide:ka,useFactory:zT,deps:[[new On,lu],Ld]};function CR(n,...e){return Vn("angularfire",Fd.full,"fst"),ja([qT,BT,{provide:lu,useFactory:UT(n),multi:!0,deps:[Ua,hd,Vd,jd,[new On,zd],[new On,Od],...e]}])}var AR=jt(mp,!0);var YR=jt(tp,!0);var MR=jt(hp,!0);var FR=jt(nu,!0);var RR=jt(up,!0);var NR=jt(rp,!0);var OR=jt(dp,!0);export{YY as a,MY as b,ay as c,FY as d,jr as e,ft as f,LY as g,jY as h,zY as i,iy as j,UY as k,BY as l,qY as m,HY as n,KY as o,WY as p,ly as q,GY as r,QY as s,Br as t,A as u,rM as v,nM as w,aM as x,Wn as y,vM as z,ws as A,_M as B,TM as C,Qh as D,wM as E,kM as F,xM as G,Ps as H,DM as I,EM as J,bM as K,IM as L,qM as M,ka as N,CR as O,AR as P,YR as Q,MR as R,FR as S,RR as T,NR as U,OR as V};
